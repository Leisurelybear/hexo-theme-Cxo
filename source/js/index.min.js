function iframesound() {
    $("#m-mainsite").attr("target", "_blank"), $("#m-mainsite-icon").attr("target", "_blank"), $("#t_p").hide(), $("#t_s").hide(), $("#faxian").parent().remove(), $("#tougao").parent().remove(), $("#m-news").parent().remove(), $("#m-chat").parent().remove(), $(".t_h.t_h_r").remove(), $(".t_h.t_h_l.iframe").hover(function () {
        $(this).addClass("t_h_h"), $(this).addClass("t_h_l_h")
    }), $(".t_h.t_h_l.iframe").mouseleave(function () {
        $(this).removeClass("t_h_h"), $(this).removeClass("t_h_l_h")
    }), $("#iframeshowcomment").click(function () {
        $("#iframeshowcomment").toggle(), $("#iframeshowplay").toggle(), $("#p").css("visibility", "hidden"), $("#i").css("visibility", "visible")
    }), $("#iframeshowplay").click(function () {
        $("#iframeshowcomment").toggle(), $("#iframeshowplay").toggle(), $("#p").css("visibility", "visible"), $("#i").css("visibility", "hidden")
    }), $(document).mouseleave(function () {
        $("#m, #t, #o.o-iframe, #i.i-iframe").addClass("inactive")
    }), $(document).mouseenter(function () {
        $("#m, #t, #o.o-iframe, #i.i-iframe").removeClass("inactive")
    }), $("#centerplaybtn").click(function () {
        moTool.hideModalBox($("#soundlikemodal")), $("#mpi").click()
    })
}

function iframesoundiframe() {
    window.top != window && (window.location = "/soundiframe/" + $("#scbtn").data("soundid"))
}

function hideimage() {
    var e = $("#p").height();
    e < 400 && $(".mpfi").hide()
}

function saveCompositeIcon(e) {
    moTool.postAjax({
        url: "/icon/savecompositeicon", value: {icon_id: e}, callBack: function () {
            window.location = "/mperson/imageicon"
        }
    })
}

function clearMakeItem() {
    var e = $(".makeitem");
    e.html("")
}

function showIcon() {
    $("#iconmodel").hide(), $("#leftmake").show(), $("#rightmake").show()
}

function composeImgHtml(e, t) {
    var o = defaultImageUrls[t];
    return '<img width="320px" height="320px" src="' + o[e].url + '" data-id="' + o[e].id + '" />'
}

function initDefaultItems(e, t) {
    var o = $("#addhead1"), a = $("#addbody1"), n = $("#addeyes"), i = "√" === t.html();
    i ? (o.html(""), n.html(""), a.html(""), t.html("")) : (o.html(composeImgHtml("head", e)), n.html(composeImgHtml("eyes", e)), a.html(composeImgHtml("body", e)), t.html("√"))
}

function initIcon() {
    var e = $("#addbackground"), t = $("#addhead2"), o = $("#addbody2"), a = $("#addother"), n = $(".selecticonmodel"),
        i = $(".maketypebtn"), d = $("#iconback"), s = $("#saveicon"), r = ["", "bg", "body", "eyes", "head"];
    $.each(defaultImageUrls, function (e, t) {
        moTool.getAjax({
            url: "/icon/getcomponents?p=1&c_type=0&is_default=1&restriction=" + t.restriction,
            callBack: function (e) {
                for (var o = e.info.components, a = 0; a < o.length; a++) {
                    var n = o[a], i = n.element[0], d = parseInt(n.id), s = parseInt(n.c_type);
                    t[r[s]] = {url: i, id: d}
                }
            }
        })
    }), n.click(function () {
        clearMakeItem();
        var d = $(this);
        $("#icon-process-select").removeClass("on"), $("#icon-process-make").addClass("on"), n.removeClass("selecticonmodelclicked"), d.addClass("selecticonmodelclicked");
        var s = n.index(d);
        e.html('<img id="iconbackground" width="320px" height="320px" data-color="#B1B1B1m#CECECEm#B1B1B1m#6A6A6Am#B1B1B1"/>'), t.html(""), o.html(""), a.html("");
        var r = defaultImageUrls[s];
        initDefaultItems(s, d.find("span")), e.find("img").data("id", r.bg.id), i.eq(0).click(), showIcon()
    }), d.click(function () {
        hideIcon(), $("#icon-process-select").addClass("on"), $("#icon-process-make").removeClass("on")
    }), s.click(function () {
        $("#icon-process-save").addClass("on"), $("#icon-process-make").removeClass("on");
        var e = "", t = "", o = "";
        window.location.protocol;
        t += $("#addbackground").find("img").data("id");
        var a = $("#addbackground").find("img").data("color");
        if (o = a, e += '"addbackground"', $("#addother").find("#iconotherback").length > 0 && (t = t + "," + $("#iconotherback").data("id"), e += ',"addother"'), $("#addhead2").find("#iconheadback").length > 0 && (t = t + "," + $("#iconheadback").data("id"), e += ',"addhead2"'), "" !== $("#addbody1").html() && (t = t + "," + $("#addbody1").find("img").data("id"), e += ',"addbody1"'), "" !== $("#addbody2").html() && (t = t + "," + $("#addbody2").find("img").data("id"), e += ',"addbody2"'), "" !== $("#addhead1").html() && (t = t + "," + $("#addhead1").find("img").data("id"), e += ',"addhead1"'), "" !== $("#addeyes").html()) {
            var n = ($("#addeyes").attr("data-top") ? $("#addeyes").attr("data-top") : 0, ",[" + $("#addeyes").find("img").data("id") + ",0," + $("#addeyes").attr("data-top") + "]");
            t += n, e += ',"addeyes"'
        }
        $("#addhead2").find("#iconheadfront").length > 0 && (t = t + "," + $("#iconheadfront").data("id"), e += ',"addhead2"'), $("#addother").find("#iconotherfront").length > 0 && (t = t + "," + $("#iconotherfront").data("id"), e += ',"addother"'), moTool.postAjax({
            url: "/mimage/composite",
            value: {
                "params[title]": "",
                "params[area_color]": o,
                "params[order_info]": "{type:" + $(".selecticonmodelclicked").data("restriction") + ", order:[" + e + "]}",
                "params[components]": "[" + t + "]"
            },
            callBack: function (e) {
                moTool.showModalBox($("#saveiconmodal"), {
                    showClose: !0,
                    showBackground: !1
                }), $("#slsaveicon").html('<div id="slsaveicon"><img id="slsaveiconimage" src="' + e.successVal.profile_url + '" /></div>'), setShareInfo(e.successVal.title, "https://www.missevan.com/icon?userid=" + e.successVal.userid, e.successVal.profile_url), $("#slexit").click(function () {
                    moTool.postAjax({
                        url: "/icon/deleteicon", value: {icon_id: e.success}, startLoad: function () {
                        }, endLoad: function () {
                        }, callBack: function (e) {
                            window.location = "/mperson/imageicon"
                        }
                    })
                }), $("#slretry").click(function () {
                    window.location = "/icon"
                }), $("#slsave").click(function () {
                    saveCompositeIcon(e.success)
                })
            }
        })
    })
}

function resetRm(e) {
    e.empty()
}

function reset(e, t) {
}

function hideIcon() {
    $("#iconmodel").show(), $("#leftmake").hide(), $("#rightmake").hide()
}

function initDefaultItem(e) {
    var t = $(".defaultitem"), o = t.eq(e);
    "√" == o.find("span").html() ? (o.click(), o.click()) : o.click()
}

function loadMakeItem() {
    var e = $(".maketypebtn"), t = $(".makeitem"), o = $(".defaultitem");
    e.hover(function () {
        $(this).addClass("maketypebtnhover")
    }, function () {
        $(this).removeClass("maketypebtnhover")
    }), e.click(function () {
        addPosButton($(this).data("type"));
        var a = null;
        $("#posup").mousedown(function () {
            a = setInterval("eyeUp()", 30), $("#posup").html('<img src="/images/index/chevron-thin-up-red.png">')
        }), $("#posup").mouseup(function () {
            a = clearInterval(a), $("#posup").html('<img src="/images/index/chevron-thin-up.png">')
        });
        var n = null;
        $("#posdown").mousedown(function () {
            n = setInterval("eyeDown()", 30), $("#posdown").html('<img src="/images/index/chevron-thin-down-red.png">')
        }), $("#posdown").mouseup(function () {
            n = clearInterval(n), $("#posdown").html('<img src="/images/index/chevron-thin-down.png">')
        }), e.each(function (e) {
            $(this).removeClass($(this).data("type") + "clicked")
        }), $(this).addClass($(this).data("type") + "clicked");
        var i = e.index($(this));
        t.hide(), t.eq(i).show(), o.hide(), o.eq(i).show();
        var d = t.eq(i).data("type");
        if ("" == t.eq(i).html()) {
            var s = $(".selecticonmodelclicked").data("restriction");
            getComponents(d, s, i, 1)
        }
    })
}

function getComponents(e, t, o, a) {
    var n = $(".makeitem");
    moTool.getAjax({
        url: "/icon/getcomponents?p=" + a + "&c_type=" + e + "&restriction=" + t + "&is_default=0",
        startLoad: function () {
            n.eq(o).html('<div id="iconloading">加载中</div>')
        },
        endLoad: function () {
            n.eq(o).html("")
        },
        callBack: function (i) {
            var d = i.info.components, s = i.info.totalpage;
            loadItemStr(n.eq(o), d, o, a), loadItem(n.eq(o));
            var r = "";
            switch (o) {
                case 0:
                    r = "headpage";
                    break;
                case 1:
                    r = "eyepage";
                    break;
                case 2:
                    r = "bodypage";
                    break;
                case 3:
                    r = "otherpage";
                    break;
                case 4:
                    r = "bgpage";
                    break;
                default:
                    r = ""
            }
            componentPageStr(s, a, r), componentPage(e, t, o, r)
        }
    })
}

function componentPage(e, t, o, a) {
    var n = $(".i_page." + a);
    n.click(function () {
        getComponents(e, t, o, $(this).data("page"))
    })
}

function componentPageStr(e, t, o) {
    var a = "", n = "", i = 7, d = $("#" + o);
    if (e > 1) {
        for (var s = (i - 1) / 2, r = t + s; r >= t - s; r--) r > 0 && r <= e && (n = r != t ? n + '<a class="i_page ' + o + '" href="javascript:void(0);" data-page="' + r + '">' + r + "</a>" : n + '<span class="i_pagenow">' + r + "</span>");
        t != e && (n = '<a class="i_page ' + o + '" href="javascript:void(0);" data-page="' + e + '">末页</a><a class="i_page ' + o + '" href="javascript:void(0);" data-page="' + (t + 1) + '">下页</a>' + n), 1 != t && (n = n + '<a class="i_page ' + o + '" href="javascript:void(0);" data-page="' + (t - 1) + '">上页</a><a class="i_page ' + o + '" href="javascript:void(0);" data-page="1">首页</a>')
    }
    a = a + '<div class="i_pagebox">' + n + '</div><div class="clear"></div>', d.html(a)
}

function addPosButton(e) {
    "addeyesicon" == e ? (0 == $("#posup").length && $("#leftmake").append('<div id="posup"><img src="/images/index/chevron-thin-up.png"></div>'), 0 == $("#posdown").length && $("#leftmake").append('<div id="posdown"><img src="/images/index/chevron-thin-down.png"></div>')) : ($("#posup").remove(), $("#posdown").remove())
}

function loadItemStr(e, t, o, a) {
    var n = emptyItemPrepair(e, t, o, a), i = e;
    switch (t.length && $.each(t, function (e, t) {
        var o = t.element, a = t.id, i = "";
        4 == t.c_type ? $.each(o, function (e, t) {
            i = "" != t && 2 != e ? i + "<img " + (1 === e ? ' id="iconheadback" style="display:none;"' : ' id="iconheadfront"') + ' src="' + t + '" data-id="' + a + '" />' : i + '<div style="display:none" class="headori headori' + t + '"></div>'
        }) : i = 1 == t.c_type ? i + '<img id="iconbackground" src="' + o[0] + '" data-color="' + o[1] + '" data-id="' + a + '" />' : 5 == t.c_type ? i + "<img " + (0 == o[1] ? ' id="iconotherback" ' : ' id="iconotherfront"') + ' src="' + o[0] + '" data-id="' + a + '" />' : i + '<img src="' + o[0] + '" data-id="' + a + '" />', t.intro ? i = i + '<div class="item-intro" style="display:none;">' + t.intro + "</div>" : i += '<div class="item-intro" style="display:none;">上传组件的叔叔并没有写介绍 QAQ</div>', n = n + '<div class="makeitemimage">' + i + "</div>"
    }), o) {
        case 0:
            n += '<div id="headpage"></div>';
            break;
        case 1:
            n += '<div id="eyepage"></div>';
            break;
        case 2:
            n += '<div id="bodypage"></div>';
            break;
        case 3:
            n += '<div id="otherpage"></div>';
            break;
        case 4:
            n += '<div id="bgpage"></div>';
            break;
        default:
            n += ""
    }
    i.html(n).show()
}

function emptyItemPrepair(e, t, o, a) {
    var n = "";
    return 1 == a && (0 !== o && 3 !== o || (n = '<div class="makeitemimage emptymakeitemimage">', n += '<div class="item-intro" style="display: none;">默认组件</div></div>')), n
}

function loadItem(e) {
    var t = $(".makeitemimage"), o = $(".makeitem");
    e.find(".makeitemimage").hover(function () {
        var e = $(this).position(), t = $("#makeitems").position();
        e.left - t.left < 365 ? ($(this).find(".item-intro").css("left", e.left + 95), $(this).find(".item-intro").parent().append('<div class="trangle left-trangle" style="left:' + (e.left + 85) + "px;top:" + (e.top + 20) + 'px"></div>')) : ($(this).find(".item-intro").css("left", e.left - 160), $(this).find(".item-intro").parent().append('<div class="trangle right-trangle" style="left:' + e.left + "px;top:" + (e.top + 20) + 'px"></div>')), $(this).find(".item-intro").css("top", e.top + 10), $(this).addClass("makeitemimagehover"), $(this).find(".item-intro").show()
    }, function () {
        $(this).removeClass("makeitemimagehover"), $(this).find(".item-intro").hide(), $(".trangle").remove()
    }), e.find(".makeitemimage").click(function () {
        t.removeClass("makeitemimageclicked"), $(this).addClass("makeitemimageclicked");
        var e = $(this).find("img").clone();
        e.hide();
        var a = o.index($(this).parent());
        switch (a) {
            case 0:
                var n = $(this).find(".headori"), i = $("#addhead1");
                if (n.hasClass("headori0")) i.html(""); else {
                    var d = $(".selecticonmodel").index($(".selecticonmodelclicked"));
                    i.html(composeImgHtml("head", d))
                }
                replaceItem("#addhead2", e);
                break;
            case 1:
                replaceItem("#addeyes", e);
                break;
            case 2:
                $("#addbody1").html(""), replaceItem("#addbody2", e);
                break;
            case 3:
                replaceItem("#addother", e);
                break;
            case 4:
                replaceItem("#addbackground", e)
        }
    })
}

function eyeUp() {
    var e = 0;
    $("#addeyes").attr("data-top") && (e = $("#addeyes").attr("data-top")), e = parseInt(e) - 1, $("#addeyes").attr("data-top", e), $("#addeyes").css("top", e + "px")
}

function eyeDown() {
    var e = 0;
    $("#addeyes").attr("data-top") && (e = $("#addeyes").attr("data-top")), e = parseInt(e) + 1, $("#addeyes").attr("data-top", e), $("#addeyes").css("top", e + "px")
}

function replaceItem(e, t) {
    $(e).html(""), $(e).append(t), t.show()
}

var AudioSpectrum = function () {
    var e = [.5, 1, 1.8], t = function (e) {
        o(e, a)
    }, o = function (e, t) {
        var o = window.AudioContext || window.webkitAudioContext || window.mozAudioContext || window.msAudioContext;
        try {
            AudioSpectrum.audioContext && AudioSpectrum.audioContext.close(), AudioSpectrum.audioContext = new o, AudioSpectrum.audioSource = AudioSpectrum.audioContext.createMediaElementSource(e), AudioSpectrum.analyser = AudioSpectrum.audioContext.createAnalyser(), AudioSpectrum.analyser.fftSize = 512, AudioSpectrum.analyser.smoothingTimeConstant = .3, t && t.call()
        } catch (a) {
            console.log("Your browser does not support AudioContext")
        }
    }, a = function () {
        AudioSpectrum.audioSource.connect(AudioSpectrum.analyser), AudioSpectrum.analyser.connect(AudioSpectrum.audioContext.destination), n()
    }, n = function () {
        if (AudioSpectrum.analyser) {
            var t, o, a, n;
            t = AudioSpectrum.analyser.frequencyBinCount, o = new Uint8Array(t), AudioSpectrum.spectrumArray = new Float32Array(256), AudioSpectrum.analyser.getByteFrequencyData(o);
            for (var i = 0; i < 256; i++) a = o[2 * i], n = a < 100 ? e[0] : a < 200 ? e[1] : e[2], AudioSpectrum.spectrumArray[i] = a / 256 * n
        }
    };
    return {init: t, analyse: n}
}(), _hmt = _hmt || [];
!function () {
    var e = document.createElement("script");
    e.async = !0, e.src = "https://hm.baidu.com/hm.js?91a4e950402ecbaeb38bd149234eb7cc";
    var t = document.getElementsByTagName("script")[0];
    t.parentNode.insertBefore(e, t)
}(), function () {
    var e = document.createElement("script");
    e.async = !0;
    var t = window.location.protocol.split(":")[0];
    "https" === t ? e.src = "https://zz.bdstatic.com/linksubmit/push.js" : e.src = "http://push.zhanzhang.baidu.com/push.js";
    var o = document.getElementsByTagName("script")[0];
    o.parentNode.insertBefore(e, o)
}();
var ImageViewer = function () {
    var e = {
        maxMarginTop: 70,
        maxMarginLeft: 70,
        titleMaxWidth: 450,
        titleIdx: 5,
        srcIdx: 0,
        idIdx: 7,
        transMs: 300,
        loadingPx: 120,
        staticAddr: "//static.missevan.com/mimages/",
        ossStyle: "?x-oss-process=style/download&download=1"
    }, t = function (e, t, n) {
        o(e, t, function () {
            ImageViewer.container || (ImageViewer.container = $(".img-viewer"), ImageViewer.transSp = function () {
                var e = ["transition", "-moz-transition", "-webkit-transition", "-o-transition"],
                    t = document.createElement("el");
                for (idx in e) if (void 0 !== t.style[e[idx]]) return e[idx]
            }()), a(n, function () {
                r(), ImageViewer.container.show()
            })
        })
    }, o = function (e, t, o) {
        ImageViewer.current = t, ImageViewer.imgArr = e, ImageViewer.total = e.length, o && o.call()
    }, a = function (e, t) {
        if (!ImageViewer.viewer) {
            var o = '<div class="img-viewer overlay"></div>';
            loading = '<div class="img-viewer loading-cover"><div class="img-viewer loading"></div></div>', viewer = '<div class="img-viewer viewer">', opt = '<div class="img-viewer-opt"><button class="img-viewer-opt close" title="关闭"></button><a class="img-viewer-opt download" target="_blank" title="下载"></a>' + (e ? "" : '<button class="img-viewer-opt report" title="举报"></button>') + "</div>", nav = '<div class="img-viewer-nav"><button class="img-viewer-nav prev" title="前一张"></button><button class="img-viewer-nav next" title="后一张"></button></div>', imgContainer = '<img class="img-viewer-container">', imgTitle = '<div class="img-viewer-title"></div>', imgCounter = '<div class="img-viewer-counter"></div>', $(o + loading + viewer).appendTo(ImageViewer.container), ImageViewer.loading = ImageViewer.container.children(".loading-cover"), ImageViewer.viewer = ImageViewer.container.children(".viewer"), $(opt + nav + imgContainer + imgTitle + imgCounter).appendTo(ImageViewer.viewer), ImageViewer.opt = ImageViewer.viewer.children(".img-viewer-opt"), ImageViewer.nav = ImageViewer.viewer.children(".img-viewer-nav"), ImageViewer.imgContainer = ImageViewer.viewer.children(".img-viewer-container"), ImageViewer.imgTitle = ImageViewer.viewer.children(".img-viewer-title"), ImageViewer.imgCounter = ImageViewer.viewer.children(".img-viewer-counter"), ImageViewer.closeBtn = ImageViewer.opt.children(".close"), ImageViewer.dlBtn = ImageViewer.opt.children(".download"), ImageViewer.rptBtn = ImageViewer.opt.children(".report"), ImageViewer.prevBtn = ImageViewer.nav.children(".prev"), ImageViewer.nextBtn = ImageViewer.nav.children(".next"), n()
        }
        ImageViewer.total > 1 && "none" === ImageViewer.nav.css("display") ? ImageViewer.nav.show() : 1 === ImageViewer.total && "block" === ImageViewer.nav.css("display") && ImageViewer.nav.hide(), t && t.call()
    }, n = function () {
        ImageViewer.closeBtn.on("click", function () {
            i()
        }), ImageViewer.rptBtn.on("click", function () {
            d()
        }), ImageViewer.prevBtn.on("click", function () {
            s("prev")
        }), ImageViewer.nextBtn.on("click", function () {
            s("next")
        })
    }, i = function () {
        ImageViewer.container.hide(), ImageViewer.imgContainer.attr("src", ""), ImageViewer.imgTitle.text(""), ImageViewer.imgCounter.text("")
    }, d = function () {
        var t = ImageViewer.imgArr[ImageViewer.current];
        index.js.loadReport(t.id || t[e.idIdx], "image")
    }, s = function (e) {
        var t = ImageViewer.current;
        return "next" === e ? ImageViewer.current = ImageViewer.current < ImageViewer.total - 1 ? ++ImageViewer.current : ImageViewer.current : "prev" === e && (ImageViewer.current = ImageViewer.current > 0 ? --ImageViewer.current : ImageViewer.current), t !== ImageViewer.current && void r()
    }, r = function () {
        var t = 0,
            o = (ImageViewer.imgArr[ImageViewer.current].original_cover || e.staticAddr + ImageViewer.imgArr[ImageViewer.current][e.srcIdx]) + e.ossStyle,
            a = ImageViewer.imgArr[ImageViewer.current].title || ImageViewer.imgArr[ImageViewer.current][e.titleIdx],
            n = "( " + (ImageViewer.current + 1) + "/" + ImageViewer.total + " )";
        ImageViewer.transSp && void 0 !== ImageViewer.imgContainer.attr("src") && ImageViewer.imgContainer.attr("src").length > 0 ? (ImageViewer.imgContainer.removeClass("img-viewer-opacity"), ImageViewer.imgTitle.removeClass("img-viewer-opacity"), ImageViewer.imgCounter.removeClass("img-viewer-opacity"), ImageViewer.viewer.find("button").attr("disabled", "disabled"), t = e.transMs) : (ImageViewer.imgContainer.removeClass("img-viewer-opacity"), ImageViewer.imgTitle.removeClass("img-viewer-opacity"), ImageViewer.imgCounter.removeClass("img-viewer-opacity"), ImageViewer.imgTitle.text(a), ImageViewer.imgCounter.text(n), ImageViewer.loading.show()), setTimeout(function () {
            var t = $(window).height(), i = $(window).width();
            ImageViewer.loading.css({
                top: (t - e.loadingPx) / 2,
                left: (i - e.loadingPx) / 2
            }).show(), ImageViewer.imgContainer.load(function () {
                var d = t - $(this).height();
                $(this).css({
                    "max-height": t - 2 * e.maxMarginTop,
                    "max-width": i - 2 * e.maxMarginLeft,
                    top: d >= 2 * e.maxMarginTop ? d / 2 : e.maxMarginTop
                }), ImageViewer.loading.hide(), ImageViewer.imgContainer.addClass("img-viewer-opacity"), ImageViewer.imgTitle.addClass("img-viewer-opacity").text(a), ImageViewer.imgCounter.addClass("img-viewer-opacity").text(n), ImageViewer.dlBtn.attr({
                    href: o,
                    download: o
                }), ImageViewer.viewer.find("button").removeAttr("disabled")
            }).attr("src", o).one("error", function (e) {
                ImageViewer.loading.hide(), ImageViewer.viewer.find("button").removeAttr("disabled")
            })
        }, t)
    };
    return {init: t}
}(), ravenConfig = {
    ignoreUrls: [/extension/i, /^chrome:\/\//i],
    ignoreErrors: [/UCBrowser/i, /MyApp/, /crosstab not supported/]
};
window.ravenConfig = ravenConfig, function (e, t) {
    "use strict";

    function o(o, a) {
        function n(e) {
            return ge.preferFlash && ue && !ge.ignoreFlash && ge.flash[e] !== t && ge.flash[e]
        }

        function i(e) {
            return function (t) {
                var o, a = this._s;
                return a && a._a ? o = e.call(this, t) : (a && a.id ? ge._wD(a.id + ": Ignoring " + t.type) : ge._wD(xe + "Ignoring " + t.type), o = null), o
            }
        }

        this.setupOptions = {
            url: o || null,
            flashVersion: 8,
            debugMode: !0,
            debugFlash: !1,
            useConsole: !0,
            consoleOnly: !0,
            waitForWindowLoad: !1,
            bgColor: "#ffffff",
            useHighPerformance: !1,
            flashPollingInterval: null,
            html5PollingInterval: null,
            flashLoadTimeout: 1e3,
            wmode: null,
            allowScriptAccess: "always",
            useFlashBlock: !1,
            useHTML5Audio: !0,
            forceUseGlobalHTML5Audio: !1,
            ignoreMobileRestrictions: !1,
            html5Test: /^(probably|maybe)$/i,
            preferFlash: !1,
            noSWFCache: !1,
            idPrefix: "sound"
        }, this.defaultOptions = {
            autoLoad: !1,
            autoPlay: !1,
            from: null,
            loops: 1,
            onid3: null,
            onerror: null,
            onload: null,
            whileloading: null,
            onplay: null,
            onpause: null,
            onresume: null,
            whileplaying: null,
            onposition: null,
            onstop: null,
            onfinish: null,
            multiShot: !0,
            multiShotEvents: !1,
            position: null,
            pan: 0,
            playbackRate: 1,
            stream: !0,
            to: null,
            type: null,
            usePolicyFile: !1,
            volume: 100
        }, this.flash9Options = {
            onfailure: null,
            isMovieStar: null,
            usePeakData: !1,
            useWaveformData: !1,
            useEQData: !1,
            onbufferchange: null,
            ondataerror: null
        }, this.movieStarOptions = {
            bufferTime: 3,
            serverURL: null,
            onconnect: null,
            duration: null
        }, this.audioFormats = {
            mp3: {
                type: ['audio/mpeg; codecs="mp3"', "audio/mpeg", "audio/mp3", "audio/MPA", "audio/mpa-robust"],
                required: !0
            },
            mp4: {
                related: ["aac", "m4a", "m4b"],
                type: ['audio/mp4; codecs="mp4a.40.2"', "audio/aac", "audio/x-m4a", "audio/MP4A-LATM", "audio/mpeg4-generic"],
                required: !1
            },
            ogg: {type: ["audio/ogg; codecs=vorbis"], required: !1},
            opus: {type: ["audio/ogg; codecs=opus", "audio/opus"], required: !1},
            wav: {type: ['audio/wav; codecs="1"', "audio/wav", "audio/wave", "audio/x-wav"], required: !1},
            flac: {type: ["audio/flac"], required: !1}
        }, this.movieID = "sm2-container", this.id = a || "sm2movie", this.debugID = "soundmanager-debug", this.debugURLParam = /([#?&])debug=1/i, this.versionNumber = "V2.97a.20170601", this.version = null, this.movieURL = null, this.altURL = null, this.swfLoaded = !1, this.enabled = !1, this.oMC = null, this.sounds = {}, this.soundIDs = [], this.muted = !1, this.didFlashBlock = !1, this.filePattern = null, this.filePatterns = {
            flash8: /\.mp3(\?.*)?$/i,
            flash9: /\.mp3(\?.*)?$/i
        }, this.features = {
            buffering: !1,
            peakData: !1,
            waveformData: !1,
            eqData: !1,
            movieStar: !1
        }, this.sandbox = {
            type: null,
            types: {
                remote: "remote (domain-based) rules",
                localWithFile: "local with file access (no internet access)",
                localWithNetwork: "local with network (internet access only, no local access)",
                localTrusted: "local, trusted (local+internet access)"
            },
            description: null,
            noRemote: null,
            noLocal: null
        }, this.html5 = {usingFlash: null}, this.flash = {}, this.html5Only = !1, this.ignoreFlash = !1;
        var d, s, r, u, l, c, m, p, f, h, v, g, y, $, b, w, x, _, C, k, I, T, S, M, O, D, L, P, B, A, j, R, E, F, V, N,
            H, U, q, z, W, Q, X, G, Y, K, J, Z, ee, te, oe, ae, ne, ie, de, se, re, ue, le, ce, me, pe, fe, he, ve,
            ge = this, ye = null, $e = null, be = "soundManager", we = be + ": ", xe = "HTML5::",
            _e = navigator.userAgent, Ce = e.location.href.toString(), ke = document, Ie = [], Te = !0, Se = !1,
            Me = !1, Oe = !1, De = !1, Le = !1, Pe = 0, Be = ["log", "info", "warn", "error"], Ae = 8, je = null,
            Re = null, Ee = !1, Fe = !1, Ve = 0, Ne = null, He = [], Ue = null, qe = Array.prototype.slice, ze = !1,
            We = 0, Qe = 1e3, Xe = _e.match(/(ipad|iphone|ipod)/i), Ge = _e.match(/android/i),
            Ye = _e.match(/msie|trident/i), Ke = _e.match(/webkit/i), Je = _e.match(/safari/i) && !_e.match(/chrome/i),
            Ze = _e.match(/opera/i), et = _e.match(/(mobile|pre\/|xoom)/i) || Xe || Ge,
            tt = !Ce.match(/usehtml5audio/i) && !Ce.match(/sm2-ignorebadua/i) && Je && !_e.match(/silk/i) && _e.match(/OS\sX\s10_6_([3-7])/i),
            ot = e.console !== t && console.log !== t, at = ke.hasFocus !== t ? ke.hasFocus() : null,
            nt = Je && (ke.hasFocus === t || !ke.hasFocus()), it = !nt, dt = /(mp3|mp4|mpa|m4a|m4b)/i,
            st = "about:blank",
            rt = "data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",
            ut = ke.location ? ke.location.protocol.match(/http/i) : null, lt = ut ? "" : "//",
            ct = /^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4|m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,
            mt = ["mpeg4", "aac", "flv", "mov", "mp4", "m4v", "f4v", "m4a", "m4b", "mp4v", "3gp", "3g2"],
            pt = new RegExp("\\.(" + mt.join("|") + ")(\\?.*)?$", "i");
        this.mimePattern = /^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i, this.useAltURL = !ut, H = {
            swfBox: "sm2-object-box",
            swfDefault: "movieContainer",
            swfError: "swf_error",
            swfTimedout: "swf_timedout",
            swfLoaded: "swf_loaded",
            swfUnblocked: "swf_unblocked",
            sm2Debug: "sm2_debug",
            highPerf: "high_performance",
            flashDebug: "flash_debug"
        }, oe = [null, "MEDIA_ERR_ABORTED", "MEDIA_ERR_NETWORK", "MEDIA_ERR_DECODE", "MEDIA_ERR_SRC_NOT_SUPPORTED"], this.hasHTML5 = function () {
            try {
                return Audio !== t && (Ze && opera !== t && opera.version() < 10 ? new Audio(null) : new Audio).canPlayType !== t
            } catch (e) {
                return !1
            }
        }(), this.setup = function (e) {
            var o = !ge.url;
            return e !== t && Oe && Ue && ge.ok() && (e.flashVersion !== t || e.url !== t || e.html5Test !== t) && W(F("setupLate")), v(e), ze || (et ? ge.setupOptions.ignoreMobileRestrictions && !ge.setupOptions.forceUseGlobalHTML5Audio || (He.push(I.globalHTML5), ze = !0) : ge.setupOptions.forceUseGlobalHTML5Audio && (He.push(I.globalHTML5), ze = !0)), !ve && et && (ge.setupOptions.ignoreMobileRestrictions ? He.push(I.ignoreMobile) : (ge.setupOptions.useHTML5Audio && !ge.setupOptions.preferFlash || ge._wD(I.mobileUA), ge.setupOptions.useHTML5Audio = !0, ge.setupOptions.preferFlash = !1, Xe ? ge.ignoreFlash = !0 : (Ge && !_e.match(/android\s2\.3/i) || !Ge) && (ge._wD(I.globalHTML5), ze = !0))), e && (o && O && e.url !== t && ge.beginDelayedInit(), O || e.url === t || "complete" !== ke.readyState || setTimeout(S, 1)), ve = !0, ge
        }, this.ok = function () {
            return Ue ? Oe && !De : ge.useHTML5Audio && ge.hasHTML5
        }, this.supported = this.ok, this.getMovie = function (t) {
            return s(t) || ke[t] || e[t]
        }, this.createSound = function (e, o) {
            function a() {
                return s = q(s), ge.sounds[s.id] = new d(s), ge.soundIDs.push(s.id), ge.sounds[s.id]
            }

            var n, i, s, r = null;
            if (n = be + ".createSound(): ", i = n + F(Oe ? "notOK" : "notReady"), !Oe || !ge.ok()) return W(i), !1;
            if (o !== t && (e = {
                id: e,
                url: o
            }), s = h(e), s.url = K(s.url), s.id === t && (s.id = ge.setupOptions.idPrefix + We++), s.id.toString().charAt(0).match(/^[0-9]$/) && ge._wD(n + F("badID", s.id), 2), ge._wD(n + s.id + (s.url ? " (" + s.url + ")" : ""), 1), Q(s.id, !0)) return ge._wD(n + s.id + " exists", 1), ge.sounds[s.id];
            if (ee(s)) r = a(), ge.html5Only || ge._wD(s.id + ": Using HTML5"), r._setup_html5(s); else {
                if (ge.html5Only) return ge._wD(s.id + ": No HTML5 support for this sound, and no Flash. Exiting."), a();
                if (ge.html5.usingFlash && s.url && s.url.match(/data:/i)) return ge._wD(s.id + ": data: URIs not supported via Flash. Exiting."), a();
                c > 8 && (null === s.isMovieStar && (s.isMovieStar = !!(s.serverURL || !!s.type && s.type.match(ct) || s.url && s.url.match(pt))), s.isMovieStar && (ge._wD(n + "using MovieStar handling"), s.loops > 1 && p("noNSLoop"))), s = z(s, n), r = a(), 8 === c ? $e._createSound(s.id, s.loops || 1, s.usePolicyFile) : ($e._createSound(s.id, s.url, s.usePeakData, s.useWaveformData, s.useEQData, s.isMovieStar, !!s.isMovieStar && s.bufferTime, s.loops || 1, s.serverURL, s.duration || null, s.autoPlay, !0, s.autoLoad, s.usePolicyFile), s.serverURL || (r.connected = !0, s.onconnect && s.onconnect.apply(r))), s.serverURL || !s.autoLoad && !s.autoPlay || r.load(s)
            }
            return !s.serverURL && s.autoPlay && r.play(), r
        }, this.destroySound = function (e, t) {
            if (!Q(e)) return !1;
            var o, a = ge.sounds[e];
            for (a.stop(), a._iO = {}, a.unload(), o = 0; o < ge.soundIDs.length; o++) if (ge.soundIDs[o] === e) {
                ge.soundIDs.splice(o, 1);
                break
            }
            return t || a.destruct(!0), a = null, delete ge.sounds[e], !0
        }, this.load = function (e, t) {
            return !!Q(e) && ge.sounds[e].load(t)
        }, this.unload = function (e) {
            return !!Q(e) && ge.sounds[e].unload()
        }, this.onPosition = function (e, t, o, a) {
            return !!Q(e) && ge.sounds[e].onposition(t, o, a)
        }, this.onposition = this.onPosition, this.clearOnPosition = function (e, t, o) {
            return !!Q(e) && ge.sounds[e].clearOnPosition(t, o)
        }, this.play = function (e, t) {
            var o = null, a = t && !(t instanceof Object);
            if (!Oe || !ge.ok()) return W(be + ".play(): " + F(Oe ? "notOK" : "notReady")), !1;
            if (Q(e, a)) a && (t = {url: t}); else {
                if (!a) return !1;
                a && (t = {url: t}), t && t.url && (ge._wD(be + '.play(): Attempting to create "' + e + '"', 1), t.id = e, o = ge.createSound(t).play())
            }
            return null === o && (o = ge.sounds[e].play(t)), o
        }, this.start = this.play, this.setPlaybackRate = function (e, t, o) {
            return !!Q(e) && ge.sounds[e].setPlaybackRate(t, o)
        }, this.setPosition = function (e, t) {
            return !!Q(e) && ge.sounds[e].setPosition(t)
        }, this.stop = function (e) {
            return !!Q(e) && (ge._wD(be + ".stop(" + e + ")", 1), ge.sounds[e].stop())
        }, this.stopAll = function () {
            var e;
            ge._wD(be + ".stopAll()", 1);
            for (e in ge.sounds) ge.sounds.hasOwnProperty(e) && ge.sounds[e].stop()
        }, this.pause = function (e) {
            return !!Q(e) && ge.sounds[e].pause()
        }, this.pauseAll = function () {
            var e;
            for (e = ge.soundIDs.length - 1; e >= 0; e--) ge.sounds[ge.soundIDs[e]].pause()
        }, this.resume = function (e) {
            return !!Q(e) && ge.sounds[e].resume()
        }, this.resumeAll = function () {
            var e;
            for (e = ge.soundIDs.length - 1; e >= 0; e--) ge.sounds[ge.soundIDs[e]].resume()
        }, this.togglePause = function (e) {
            return !!Q(e) && ge.sounds[e].togglePause()
        }, this.setPan = function (e, t) {
            return !!Q(e) && ge.sounds[e].setPan(t)
        }, this.setVolume = function (e, o) {
            var a, n;
            if (e !== t && !isNaN(e) && o === t) {
                for (a = 0, n = ge.soundIDs.length; a < n; a++) ge.sounds[ge.soundIDs[a]].setVolume(e);
                return !1
            }
            return !!Q(e) && ge.sounds[e].setVolume(o)
        }, this.mute = function (e) {
            var t = 0;
            if (e instanceof String && (e = null), e) return !!Q(e) && (ge._wD(be + '.mute(): Muting "' + e + '"'), ge.sounds[e].mute());
            for (ge._wD(be + ".mute(): Muting all sounds"), t = ge.soundIDs.length - 1; t >= 0; t--) ge.sounds[ge.soundIDs[t]].mute();
            return ge.muted = !0, !0
        }, this.muteAll = function () {
            ge.mute()
        }, this.unmute = function (e) {
            var t;
            if (e instanceof String && (e = null), e) return !!Q(e) && (ge._wD(be + '.unmute(): Unmuting "' + e + '"'), ge.sounds[e].unmute());
            for (ge._wD(be + ".unmute(): Unmuting all sounds"), t = ge.soundIDs.length - 1; t >= 0; t--) ge.sounds[ge.soundIDs[t]].unmute();
            return ge.muted = !1, !0
        }, this.unmuteAll = function () {
            ge.unmute()
        }, this.toggleMute = function (e) {
            return !!Q(e) && ge.sounds[e].toggleMute()
        }, this.getMemoryUse = function () {
            var e = 0;
            return $e && 8 !== c && (e = parseInt($e._getMemoryUse(), 10)), e
        }, this.disable = function (o) {
            var a;
            if (o === t && (o = !1), De) return !1;
            for (De = !0, p("shutdown", 1), a = ge.soundIDs.length - 1; a >= 0; a--) j(ge.sounds[ge.soundIDs[a]]);
            return j(ge), f(o), se.remove(e, "load", b), !0
        }, this.canPlayMIME = function (e) {
            var t;
            return ge.hasHTML5 && (t = te({type: e})), !t && Ue && (t = e && ge.ok() ? !!((c > 8 ? e.match(ct) : null) || e.match(ge.mimePattern)) : null), t
        }, this.canPlayURL = function (e) {
            var t;
            return ge.hasHTML5 && (t = te({url: e})), !t && Ue && (t = e && ge.ok() ? !!e.match(ge.filePattern) : null), t
        }, this.canPlayLink = function (e) {
            return !(e.type === t || !e.type || !ge.canPlayMIME(e.type)) || ge.canPlayURL(e.href)
        }, this.getSoundById = function (e, t) {
            if (!e) return null;
            var o = ge.sounds[e];
            return o || t || ge._wD(be + '.getSoundById(): Sound "' + e + '" not found.', 2), o
        }, this.onready = function (t, o) {
            var a = "onready", n = !1;
            if ("function" != typeof t) throw F("needFunction", a);
            return Oe && ge._wD(F("queue", a)), o || (o = e), y(a, t, o), $(), n = !0, n
        }, this.ontimeout = function (t, o) {
            var a = "ontimeout", n = !1;
            if ("function" != typeof t) throw F("needFunction", a);
            return Oe && ge._wD(F("queue", a)), o || (o = e), y(a, t, o), $({type: a}), n = !0, n
        }, this._writeDebug = function (e, o) {
            var a, n, i = "soundmanager-debug";
            return !!ge.setupOptions.debugMode && (!!(ot && ge.useConsole && (o && "object" == typeof o ? console.log(e, o) : Be[o] !== t ? console[Be[o]](e) : console.log(e), ge.consoleOnly)) || !!(a = s(i)) && (n = ke.createElement("div"), ++Pe % 2 === 0 && (n.className = "sm2-alt"), o = o === t ? 0 : parseInt(o, 10), n.appendChild(ke.createTextNode(e)), o && (o >= 2 && (n.style.fontWeight = "bold"), 3 === o && (n.style.color = "#ff3333")), a.insertBefore(n, a.firstChild), a = null, !0))
        }, Ce.indexOf("sm2-debug=alert") !== -1 && (this._writeDebug = function (t) {
            e.alert(t)
        }), this._wD = this._writeDebug, this._debug = function () {
            var e, t;
            for (p("currentObj", 1), e = 0, t = ge.soundIDs.length; e < t; e++) ge.sounds[ge.soundIDs[e]]._debug()
        }, this.reboot = function (t, o) {
            ge.soundIDs.length && ge._wD("Destroying " + ge.soundIDs.length + " SMSound object" + (1 !== ge.soundIDs.length ? "s" : "") + "...");
            var a, n, i;
            for (a = ge.soundIDs.length - 1; a >= 0; a--) ge.sounds[ge.soundIDs[a]].destruct();
            if ($e) try {
                Ye && (Re = $e.innerHTML), je = $e.parentNode.removeChild($e)
            } catch (d) {
                p("badRemove", 2)
            }
            if (Re = je = Ue = $e = null, ge.enabled = O = Oe = Ee = Fe = Se = Me = De = ze = ge.swfLoaded = !1, ge.soundIDs = [], ge.sounds = {}, We = 0, ve = !1, t) Ie = []; else for (a in Ie) if (Ie.hasOwnProperty(a)) for (n = 0, i = Ie[a].length; n < i; n++) Ie[a][n].fired = !1;
            return o || ge._wD(be + ": Rebooting..."), ge.html5 = {usingFlash: null}, ge.flash = {}, ge.html5Only = !1, ge.ignoreFlash = !1, e.setTimeout(function () {
                o || ge.beginDelayedInit()
            }, 20), ge
        }, this.reset = function () {
            return p("reset"), ge.reboot(!0, !0)
        }, this.getMoviePercent = function () {
            return $e && "PercentLoaded" in $e ? $e.PercentLoaded() : null
        }, this.beginDelayedInit = function () {
            Le = !0, S(), setTimeout(function () {
                return !Fe && (L(), T(), Fe = !0, !0)
            }, 20), w()
        }, this.destruct = function () {
            ge._wD(be + ".destruct()"), ge.disable(!0)
        }, d = function (e) {
            var o, a, n, i, d, s, r, u, l, f, v = this, g = !1, y = [], $ = 0, b = null;
            l = {
                duration: null,
                time: null
            }, this.id = e.id, this.sID = this.id, this.url = e.url, this.options = h(e), this.instanceOptions = this.options, this._iO = this.instanceOptions, this.pan = this.options.pan, this.volume = this.options.volume, this.isHTML5 = !1, this._a = null, f = !this.url, this.id3 = {}, this._debug = function () {
                ge._wD(v.id + ": Merged options:", v.options)
            }, this.load = function (e) {
                var o, a = null;
                if (e !== t ? v._iO = h(e, v.options) : (e = v.options, v._iO = e, b && b !== v.url && (p("manURL"), v._iO.url = v.url, v.url = null)), v._iO.url || (v._iO.url = v.url), v._iO.url = K(v._iO.url), v.instanceOptions = v._iO, o = v._iO, ge._wD(v.id + ": load (" + o.url + ")"), !o.url && !v.url) return ge._wD(v.id + ": load(): url is unassigned. Exiting.", 2), v;
                if (v.isHTML5 || 8 !== c || v.url || o.autoPlay || ge._wD(v.id + ": Flash 8 load() limitation: Wait for onload() before calling play().", 1), o.url === v.url && 0 !== v.readyState && 2 !== v.readyState) return p("onURL", 1), 3 === v.readyState && o.onload && he(v, function () {
                    o.onload.apply(v, [!!v.duration])
                }), v;
                if (v.loaded = !1, v.readyState = 1, v.playState = 0, v.id3 = {}, ee(o)) a = v._setup_html5(o), a._called_load ? ge._wD(v.id + ": Ignoring request to load again") : (v._html5_canplay = !1, v.url !== o.url && (ge._wD(p("manURL") + ": " + o.url), v._a.src = o.url, v.setPosition(0)), v._a.autobuffer = "auto", v._a.preload = "auto", v._a._called_load = !0); else {
                    if (ge.html5Only) return ge._wD(v.id + ": No flash support. Exiting."), v;
                    if (v._iO.url && v._iO.url.match(/data:/i)) return ge._wD(v.id + ": data: URIs not supported via Flash. Exiting."),
                        v;
                    try {
                        v.isHTML5 = !1, v._iO = z(q(o)), v._iO.autoPlay && (v._iO.position || v._iO.from) && (ge._wD(v.id + ": Disabling autoPlay because of non-zero offset case"), v._iO.autoPlay = !1), o = v._iO, 8 === c ? $e._load(v.id, o.url, o.stream, o.autoPlay, o.usePolicyFile) : $e._load(v.id, o.url, !!o.stream, !!o.autoPlay, o.loops || 1, !!o.autoLoad, o.usePolicyFile)
                    } catch (n) {
                        p("smError", 2), m("onload", !1), P({type: "SMSOUND_LOAD_JS_EXCEPTION", fatal: !0})
                    }
                }
                return v.url = o.url, v
            }, this.unload = function () {
                return 0 !== v.readyState && (ge._wD(v.id + ": unload()"), v.isHTML5 ? (i(), v._a && (v._a.pause(), b = ne(v._a))) : 8 === c ? $e._unload(v.id, st) : $e._unload(v.id), o()), v
            }, this.destruct = function (e) {
                ge._wD(v.id + ": Destruct"), v.isHTML5 ? (i(), v._a && (v._a.pause(), ne(v._a), ze || n(), v._a._s = null, v._a = null)) : (v._iO.onfailure = null, $e._destroySound(v.id)), e || ge.destroySound(v.id, !0)
            }, this.play = function (e, o) {
                var a, n, i, r, l, m, p, y = !0;
                if (a = v.id + ": play(): ", o = o === t || o, e || (e = {}), v.url && (v._iO.url = v.url), v._iO = h(v._iO, v.options), v._iO = h(e, v._iO), v._iO.url = K(v._iO.url), v.instanceOptions = v._iO, !v.isHTML5 && v._iO.serverURL && !v.connected) return v.getAutoPlay() || (ge._wD(a + " Netstream not connected yet - setting autoPlay"), v.setAutoPlay(!0)), v;
                if (ee(v._iO) && (v._setup_html5(v._iO), d()), 1 === v.playState && !v.paused) {
                    if (n = v._iO.multiShot, !n) return ge._wD(a + "Already playing (one-shot)", 1), v.isHTML5 && v.setPosition(v._iO.position), v;
                    ge._wD(a + "Already playing (multi-shot)", 1)
                }
                if (e.url && e.url !== v.url && (v.readyState || v.isHTML5 || 8 !== c || !f ? v.load(v._iO) : f = !1), v.loaded) ge._wD(a.substr(0, a.lastIndexOf(":"))); else if (0 === v.readyState) {
                    if (ge._wD(a + "Attempting to load"), v.isHTML5 || ge.html5Only) {
                        if (!v.isHTML5) return ge._wD(a + "Unsupported type. Exiting."), v;
                        v.load(v._iO)
                    } else v._iO.autoPlay = !0, v.load(v._iO);
                    v.instanceOptions = v._iO
                } else {
                    if (2 === v.readyState) return ge._wD(a + "Could not load - exiting", 2), v;
                    ge._wD(a + "Loading - attempting to play...")
                }
                if (!v.isHTML5 && 9 === c && v.position > 0 && v.position === v.duration && (ge._wD(a + "Sound at end, resetting to position: 0"), e.position = 0), v.paused && v.position >= 0 && (!v._iO.serverURL || v.position > 0)) ge._wD(a + "Resuming from paused state", 1), v.resume(); else if (v._iO = h(e, v._iO), (!v.isHTML5 && null !== v._iO.position && v._iO.position > 0 || null !== v._iO.from && v._iO.from > 0 || null !== v._iO.to) && 0 === v.instanceCount && 0 === v.playState && !v._iO.serverURL && (r = function () {
                    v._iO = h(e, v._iO), v.play(v._iO)
                }, v.isHTML5 && !v._html5_canplay ? (ge._wD(a + "Beginning load for non-zero offset case"), v.load({_oncanplay: r})) : v.isHTML5 || v.loaded || v.readyState && 2 === v.readyState || (ge._wD(a + "Preloading for non-zero offset case"), v.load({onload: r})), v._iO = u()), (!v.instanceCount || v._iO.multiShotEvents || v.isHTML5 && v._iO.multiShot && !ze || !v.isHTML5 && c > 8 && !v.getAutoPlay()) && v.instanceCount++, v._iO.onposition && 0 === v.playState && s(v), v.playState = 1, v.paused = !1, v.position = v._iO.position === t || isNaN(v._iO.position) ? 0 : v._iO.position, v.isHTML5 || (v._iO = z(q(v._iO))), v._iO.onplay && o && (v._iO.onplay.apply(v), g = !0), v.setVolume(v._iO.volume, !0), v.setPan(v._iO.pan, !0), 1 !== v._iO.playbackRate && v.setPlaybackRate(v._iO.playbackRate), v.isHTML5) if (v.instanceCount < 2) {
                    d(), i = v._setup_html5(), v.setPosition(v._iO.position);
                    var $;
                    if (arguments && arguments.length) {
                        var b = arguments[arguments.length - 1];
                        "function" == typeof b && ($ = b)
                    }
                    try {
                        i.play()["catch"](function (e) {
                            $ && $(e)
                        })
                    } catch (w) {
                        console.log(w)
                    }
                } else ge._wD(v.id + ": Cloning Audio() for instance #" + v.instanceCount + "..."), l = new Audio(v._iO.url), l.crossOrigin = "anonymous", m = function () {
                    se.remove(l, "ended", m), v._onfinish(v), ne(l), l = null
                }, p = function () {
                    se.remove(l, "canplay", p);
                    try {
                        l.currentTime = v._iO.position / Qe
                    } catch (e) {
                        W(v.id + ": multiShot play() failed to apply position of " + v._iO.position / Qe)
                    }
                    l.play()
                }, se.add(l, "ended", m), v._iO.volume !== t && (l.volume = Math.max(0, Math.min(1, v._iO.volume / 100))), v.muted && (l.muted = !0), v._iO.position ? se.add(l, "canplay", p) : l.play(); else y = $e._start(v.id, v._iO.loops || 1, 9 === c ? v.position : v.position / Qe, v._iO.multiShot || !1), 9 !== c || y || (ge._wD(a + "No sound hardware, or 32-sound ceiling hit", 2), v._iO.onplayerror && v._iO.onplayerror.apply(v));
                return v
            }, this.start = this.play, this.stop = function (e) {
                var t, o = v._iO;
                return 1 === v.playState && (ge._wD(v.id + ": stop()"), v._onbufferchange(0), v._resetOnPosition(0), v.paused = !1, v.isHTML5 || (v.playState = 0), r(), o.to && v.clearOnPosition(o.to), v.isHTML5 ? v._a && (t = v.position, v.setPosition(0), v.position = t, v._a.pause(), v.playState = 0, v._onTimer(), i()) : ($e._stop(v.id, e), o.serverURL && v.unload()), v.instanceCount = 0, v._iO = {}, o.onstop && o.onstop.apply(v)), v
            }, this.setAutoPlay = function (e) {
                ge._wD(v.id + ": Autoplay turned " + (e ? "on" : "off")), v._iO.autoPlay = e, v.isHTML5 || ($e._setAutoPlay(v.id, e), e && (v.instanceCount || 1 !== v.readyState || (v.instanceCount++, ge._wD(v.id + ": Incremented instance count to " + v.instanceCount))))
            }, this.getAutoPlay = function () {
                return v._iO.autoPlay
            }, this.setPlaybackRate = function (e) {
                var t = Math.max(.5, Math.min(4, e));
                if (t !== e && ge._wD(v.id + ": setPlaybackRate(" + e + "): limiting rate to " + t, 2), v.isHTML5) try {
                    v._iO.playbackRate = t, v._a.playbackRate = t
                } catch (o) {
                    ge._wD(v.id + ": setPlaybackRate(" + t + ") failed: " + o.message, 2)
                }
                return v
            }, this.setPosition = function (e) {
                e === t && (e = 0);
                var o, a, n = v.isHTML5 ? Math.max(e, 0) : Math.min(v.duration || v._iO.duration, Math.max(e, 0));
                if (v.position = n, a = v.position / Qe, v._resetOnPosition(v.position), v._iO.position = n, v.isHTML5) {
                    if (v._a) {
                        if (v._html5_canplay) {
                            if (v._a.currentTime.toFixed(3) !== a.toFixed(3)) {
                                ge._wD(v.id + ": setPosition(" + a + ")");
                                try {
                                    v._a.currentTime = a, (0 === v.playState || v.paused) && v._a.pause()
                                } catch (i) {
                                    ge._wD(v.id + ": setPosition(" + a + ") failed: " + i.message, 2)
                                }
                            }
                        } else if (a) return ge._wD(v.id + ": setPosition(" + a + "): Cannot seek yet, sound not ready", 2), v;
                        v.paused && v._onTimer(!0)
                    }
                } else o = 9 === c ? v.position : a, v.readyState && 2 !== v.readyState && $e._setPosition(v.id, o, v.paused || !v.playState, v._iO.multiShot);
                return v
            }, this.pause = function (e) {
                return v.paused || 0 === v.playState && 1 !== v.readyState ? v : (ge._wD(v.id + ": pause()"), v.paused = !0, v.isHTML5 ? (v._setup_html5().pause(), i()) : (e || e === t) && $e._pause(v.id, v._iO.multiShot), v._iO.onpause && v._iO.onpause.apply(v), v)
            }, this.resume = function () {
                var e = v._iO;
                return v.paused ? (ge._wD(v.id + ": resume()"), v.paused = !1, v.playState = 1, v.isHTML5 ? (v._setup_html5().play(), d()) : (e.isMovieStar && !e.serverURL && v.setPosition(v.position), $e._pause(v.id, e.multiShot)), !g && e.onplay ? (e.onplay.apply(v), g = !0) : e.onresume && e.onresume.apply(v), v) : v
            }, this.togglePause = function () {
                return ge._wD(v.id + ": togglePause()"), 0 === v.playState ? (v.play({position: 9 !== c || v.isHTML5 ? v.position / Qe : v.position}), v) : (v.paused ? v.resume() : v.pause(), v)
            }, this.setPan = function (e, o) {
                return e === t && (e = 0), o === t && (o = !1), v.isHTML5 || $e._setPan(v.id, e), v._iO.pan = e, o || (v.pan = e, v.options.pan = e), v
            }, this.setVolume = function (e, o) {
                return e === t && (e = 100), o === t && (o = !1), v.isHTML5 ? v._a && (ge.muted && !v.muted && (v.muted = !0, v._a.muted = !0), v._a.volume = Math.max(0, Math.min(1, e / 100))) : $e._setVolume(v.id, ge.muted && !v.muted || v.muted ? 0 : e), v._iO.volume = e, o || (v.volume = e, v.options.volume = e), v
            }, this.mute = function () {
                return v.muted = !0, v.isHTML5 ? v._a && (v._a.muted = !0) : $e._setVolume(v.id, 0), v
            }, this.unmute = function () {
                v.muted = !1;
                var e = v._iO.volume !== t;
                return v.isHTML5 ? v._a && (v._a.muted = !1) : $e._setVolume(v.id, e ? v._iO.volume : v.options.volume), v
            }, this.toggleMute = function () {
                return v.muted ? v.unmute() : v.mute()
            }, this.onPosition = function (e, o, a) {
                return y.push({position: parseInt(e, 10), method: o, scope: a !== t ? a : v, fired: !1}), v
            }, this.onposition = this.onPosition, this.clearOnPosition = function (e, t) {
                var o;
                if (e = parseInt(e, 10), !isNaN(e)) for (o = 0; o < y.length; o++) e === y[o].position && (t && t !== y[o].method || (y[o].fired && $--, y.splice(o, 1)))
            }, this._processOnPosition = function () {
                var e, t, o = y.length;
                if (!o || !v.playState || $ >= o) return !1;
                for (e = o - 1; e >= 0; e--) t = y[e], !t.fired && v.position >= t.position && (t.fired = !0, $++, t.method.apply(t.scope, [t.position]), o = y.length);
                return !0
            }, this._resetOnPosition = function (e) {
                var t, o, a = y.length;
                if (!a) return !1;
                for (t = a - 1; t >= 0; t--) o = y[t], o.fired && e <= o.position && (o.fired = !1, $--);
                return !0
            }, u = function () {
                var e, t, o = v._iO, a = o.from, n = o.to;
                return t = function () {
                    ge._wD(v.id + ': "To" time of ' + n + " reached."), v.clearOnPosition(n, t), v.stop()
                }, e = function () {
                    ge._wD(v.id + ': Playing "from" ' + a), null === n || isNaN(n) || v.onPosition(n, t)
                }, null === a || isNaN(a) || (o.position = a, o.multiShot = !1, e()), o
            }, s = function () {
                var e, t = v._iO.onposition;
                if (t) for (e in t) t.hasOwnProperty(e) && v.onPosition(parseInt(e, 10), t[e])
            }, r = function () {
                var e, t = v._iO.onposition;
                if (t) for (e in t) t.hasOwnProperty(e) && v.clearOnPosition(parseInt(e, 10))
            }, d = function () {
                v.isHTML5 && X(v)
            }, i = function () {
                v.isHTML5 && G(v)
            }, o = function (e) {
                e || (y = [], $ = 0), g = !1, v._hasTimer = null, v._a = null, v._html5_canplay = !1, v.bytesLoaded = null, v.bytesTotal = null, v.duration = v._iO && v._iO.duration ? v._iO.duration : null, v.durationEstimate = null, v.buffered = [], v.eqData = [], v.eqData.left = [], v.eqData.right = [], v.failures = 0, v.isBuffering = !1, v.instanceOptions = {}, v.instanceCount = 0, v.loaded = !1, v.metadata = {}, v.readyState = 0, v.muted = !1, v.paused = !1, v.peakData = {
                    left: 0,
                    right: 0
                }, v.waveformData = {left: [], right: []}, v.playState = 0, v.position = null, v.id3 = {}
            }, o(), this._onTimer = function (e) {
                var t, o, a = !1, n = {};
                return (v._hasTimer || e) && v._a && (e || (v.playState > 0 || 1 === v.readyState) && !v.paused) && (t = v._get_html5_duration(), t !== l.duration && (l.duration = t, v.duration = t, a = !0), v.durationEstimate = v.duration, o = v._a.currentTime * Qe || 0, o !== l.time && (l.time = o, a = !0), (a || e) && v._whileplaying(o, n, n, n, n)), a
            }, this._get_html5_duration = function () {
                var e = v._iO, t = v._a && v._a.duration ? v._a.duration * Qe : e && e.duration ? e.duration : null,
                    o = t && !isNaN(t) && t !== 1 / 0 ? t : null;
                return o
            }, this._apply_loop = function (e, t) {
                !e.loop && t > 1 && ge._wD("Note: Native HTML5 looping is infinite.", 1), e.loop = t > 1 ? "loop" : ""
            }, this._setup_html5 = function (e) {
                var t, n = h(v._iO, e), i = ze ? ye : v._a, d = decodeURI(n.url);
                if (ze ? d === decodeURI(re) && (t = !0) : d === decodeURI(b) && (t = !0), i) {
                    if (i._s) if (ze) i._s && i._s.playState && !t && i._s.stop(); else if (!ze && d === decodeURI(b)) return v._apply_loop(i, n.loops), i;
                    t || (b && o(!1), i.src = n.url, v.url = n.url, b = n.url, re = n.url, i._called_load = !1)
                } else n.autoLoad || n.autoPlay ? (v._a = new Audio(n.url), v._a.load()) : v._a = Ze && opera.version() < 10 ? new Audio(null) : new Audio, v._a.crossOrigin = "anonymous", i = v._a, i._called_load = !1, ze && (ye = i);
                return v.isHTML5 = !0, v._a = i, i._s = v, a(), v._apply_loop(i, n.loops), n.autoLoad || n.autoPlay ? v.load() : (i.autobuffer = !1, i.preload = "auto"), i
            }, a = function () {
                function e(e, t, o) {
                    return v._a ? v._a.addEventListener(e, t, o || !1) : null
                }

                if (v._a._added_events) return !1;
                var t;
                v._a._added_events = !0;
                for (t in me) me.hasOwnProperty(t) && e(t, me[t]);
                return !0
            }, n = function () {
                function e(e, t, o) {
                    return v._a ? v._a.removeEventListener(e, t, o || !1) : null
                }

                var t;
                ge._wD(v.id + ": Removing event listeners"), v._a._added_events = !1;
                for (t in me) me.hasOwnProperty(t) && e(t, me[t])
            }, this._onload = function (e) {
                var t, o = !!e || !v.isHTML5 && 8 === c && v.duration;
                return t = v.id + ": ", ge._wD(t + (o ? "onload()" : "Failed to load / invalid sound?" + (v.duration ? " -" : " Zero-length duration reported.") + " (" + v.url + ")"), o ? 1 : 2), o || v.isHTML5 || (ge.sandbox.noRemote === !0 && ge._wD(t + F("noNet"), 1), ge.sandbox.noLocal === !0 && ge._wD(t + F("noLocal"), 1)), v.loaded = o, v.readyState = o ? 3 : 2, v._onbufferchange(0), o || v.isHTML5 || v._onerror(), v._iO.onload && he(v, function () {
                    v._iO.onload.apply(v, [o])
                }), !0
            }, this._onerror = function (e, t) {
                v._iO.onerror && he(v, function () {
                    v._iO.onerror.apply(v, [e, t])
                })
            }, this._onbufferchange = function (e) {
                return 0 !== v.playState && (!(e && v.isBuffering || !e && !v.isBuffering) && (v.isBuffering = 1 === e, v._iO.onbufferchange && (ge._wD(v.id + ": Buffer state change: " + e), v._iO.onbufferchange.apply(v, [e])), !0))
            }, this._onsuspend = function () {
                return v._iO.onsuspend && (ge._wD(v.id + ": Playback suspended"), v._iO.onsuspend.apply(v)), !0
            }, this._onfailure = function (e, t, o) {
                v.failures++, ge._wD(v.id + ": Failure (" + v.failures + "): " + e), v._iO.onfailure && 1 === v.failures ? v._iO.onfailure(e, t, o) : ge._wD(v.id + ": Ignoring failure")
            }, this._onwarning = function (e, t, o) {
                v._iO.onwarning && v._iO.onwarning(e, t, o)
            }, this._onfinish = function () {
                var e = v._iO.onfinish;
                v._onbufferchange(0), v._resetOnPosition(0), v.instanceCount && (v.instanceCount--, v.instanceCount || (r(), v.playState = 0, v.paused = !1, v.instanceCount = 0, v.instanceOptions = {}, v._iO = {}, i(), v.isHTML5 && (v.position = 0)), v.instanceCount && !v._iO.multiShotEvents || e && (ge._wD(v.id + ": onfinish()"), he(v, function () {
                    e.apply(v)
                })))
            }, this._whileloading = function (e, t, o, a) {
                var n = v._iO;
                v.bytesLoaded = e, v.bytesTotal = t, v.duration = Math.floor(o), v.bufferLength = a, v.isHTML5 || n.isMovieStar ? v.durationEstimate = v.duration : n.duration ? v.durationEstimate = v.duration > n.duration ? v.duration : n.duration : v.durationEstimate = parseInt(v.bytesTotal / v.bytesLoaded * v.duration, 10), v.isHTML5 || (v.buffered = [{
                    start: 0,
                    end: v.duration
                }]), (3 !== v.readyState || v.isHTML5) && n.whileloading && n.whileloading.apply(v)
            }, this._whileplaying = function (e, o, a, n, i) {
                var d, s = v._iO;
                return !isNaN(e) && null !== e && (v.position = Math.max(0, e), v._processOnPosition(), !v.isHTML5 && c > 8 && (s.usePeakData && o !== t && o && (v.peakData = {
                    left: o.leftPeak,
                    right: o.rightPeak
                }), s.useWaveformData && a !== t && a && (v.waveformData = {
                    left: a.split(","),
                    right: n.split(",")
                }), s.useEQData && i !== t && i && i.leftEQ && (d = i.leftEQ.split(","), v.eqData = d, v.eqData.left = d, i.rightEQ !== t && i.rightEQ && (v.eqData.right = i.rightEQ.split(",")))), 1 === v.playState && (v.isHTML5 || 8 !== c || v.position || !v.isBuffering || v._onbufferchange(0), s.whileplaying && s.whileplaying.apply(v)), !0)
            }, this._oncaptiondata = function (e) {
                ge._wD(v.id + ": Caption data received."), v.captiondata = e, v._iO.oncaptiondata && v._iO.oncaptiondata.apply(v, [e])
            }, this._onmetadata = function (e, t) {
                ge._wD(v.id + ": Metadata received.");
                var o, a, n = {};
                for (o = 0, a = e.length; o < a; o++) n[e[o]] = t[o];
                v.metadata = n, v._iO.onmetadata && v._iO.onmetadata.call(v, v.metadata)
            }, this._onid3 = function (e, t) {
                ge._wD(v.id + ": ID3 data received.");
                var o, a, n = [];
                for (o = 0, a = e.length; o < a; o++) n[e[o]] = t[o];
                v.id3 = h(v.id3, n), v._iO.onid3 && v._iO.onid3.apply(v)
            }, this._onconnect = function (e) {
                e = 1 === e, ge._wD(v.id + ": " + (e ? "Connected." : "Failed to connect? - " + v.url), e ? 1 : 2), v.connected = e, e && (v.failures = 0, Q(v.id) && (v.getAutoPlay() ? v.play(t, v.getAutoPlay()) : v._iO.autoLoad && v.load()), v._iO.onconnect && v._iO.onconnect.apply(v, [e]))
            }, this._ondataerror = function (e) {
                v.playState > 0 && (ge._wD(v.id + ": Data error: " + e), v._iO.ondataerror && v._iO.ondataerror.apply(v))
            }, this._debug()
        }, D = function () {
            return ke.body || ke.getElementsByTagName("div")[0]
        }, s = function (e) {
            return ke.getElementById(e)
        }, h = function (e, o) {
            var a, n, i = e || {};
            a = o === t ? ge.defaultOptions : o;
            for (n in a) a.hasOwnProperty(n) && i[n] === t && ("object" != typeof a[n] || null === a[n] ? i[n] = a[n] : i[n] = h(i[n], a[n]));
            return i
        }, he = function (t, o) {
            t.isHTML5 || 8 !== c ? o() : e.setTimeout(o, 0)
        }, g = {
            onready: 1,
            ontimeout: 1,
            defaultOptions: 1,
            flash9Options: 1,
            movieStarOptions: 1
        }, v = function (e, o) {
            var a, n = !0, i = o !== t, d = ge.setupOptions, s = g;
            if (e === t) {
                n = [];
                for (a in d) d.hasOwnProperty(a) && n.push(a);
                for (a in s) s.hasOwnProperty(a) && ("object" == typeof ge[a] ? n.push(a + ": {...}") : ge[a] instanceof Function ? n.push(a + ": function() {...}") : n.push(a));
                return ge._wD(F("setup", n.join(", "))), !1
            }
            for (a in e) if (e.hasOwnProperty(a)) if ("object" != typeof e[a] || null === e[a] || e[a] instanceof Array || e[a] instanceof RegExp) i && s[o] !== t ? ge[o][a] = e[a] : d[a] !== t ? (ge.setupOptions[a] = e[a], ge[a] = e[a]) : s[a] === t ? (W(F(ge[a] === t ? "setupUndef" : "setupError", a), 2), n = !1) : ge[a] instanceof Function ? ge[a].apply(ge, e[a] instanceof Array ? e[a] : [e[a]]) : ge[a] = e[a]; else {
                if (s[a] !== t) return v(e[a], a);
                W(F(ge[a] === t ? "setupUndef" : "setupError", a), 2), n = !1
            }
            return n
        }, se = function () {
            function t(e) {
                var t = qe.call(e), o = t.length;
                return i ? (t[1] = "on" + t[1], o > 3 && t.pop()) : 3 === o && t.push(!1), t
            }

            function o(e, t) {
                var o = e.shift(), a = [d[t]];
                i ? o[a](e[0], e[1]) : o[a].apply(o, e)
            }

            function a() {
                o(t(arguments), "add")
            }

            function n() {
                o(t(arguments), "remove")
            }

            var i = e.attachEvent,
                d = {add: i ? "attachEvent" : "addEventListener", remove: i ? "detachEvent" : "removeEventListener"};
            return {add: a, remove: n}
        }(), me = {
            abort: i(function () {
                ge._wD(this._s.id + ": abort")
            }), canplay: i(function () {
                var e, o = this._s;
                if (!o._html5_canplay) {
                    if (o._html5_canplay = !0, ge._wD(o.id + ": canplay"), o._onbufferchange(0), e = o._iO.position === t || isNaN(o._iO.position) ? null : o._iO.position / Qe, this.currentTime !== e) {
                        ge._wD(o.id + ": canplay: Setting position to " + e);
                        try {
                            this.currentTime = e
                        } catch (a) {
                            ge._wD(o.id + ": canplay: Setting position of " + e + " failed: " + a.message, 2)
                        }
                    }
                    o._iO._oncanplay && o._iO._oncanplay()
                }
            }), canplaythrough: i(function () {
                var e = this._s;
                e.loaded || (e._onbufferchange(0), e._whileloading(e.bytesLoaded, e.bytesTotal, e._get_html5_duration()), e._onload(!0))
            }), durationchange: i(function () {
                var e, t = this._s;
                e = t._get_html5_duration(), isNaN(e) || e === t.duration || (ge._wD(this._s.id + ": durationchange (" + e + ")" + (t.duration ? ", previously " + t.duration : "")), t.durationEstimate = t.duration = e)
            }), ended: i(function () {
                var e = this._s;
                ge._wD(e.id + ": ended"), e._onfinish()
            }), error: i(function () {
                var e = oe[this.error.code] || null;
                ge._wD(this._s.id + ": HTML5 error, code " + this.error.code + (e ? " (" + e + ")" : "")), this._s._onload(!1), this._s._onerror(this.error.code, e)
            }), loadeddata: i(function () {
                var e = this._s;
                ge._wD(e.id + ": loadeddata"), e._loaded || Je || (e.duration = e._get_html5_duration())
            }), loadedmetadata: i(function () {
                ge._wD(this._s.id + ": loadedmetadata")
            }), loadstart: i(function () {
                ge._wD(this._s.id + ": loadstart"), this._s._onbufferchange(1)
            }), play: i(function () {
                this._s._onbufferchange(0)
            }), playing: i(function () {
                ge._wD(this._s.id + ": playing " + String.fromCharCode(9835)), this._s._onbufferchange(0)
            }), progress: i(function (e) {
                var t, o, a, n = this._s, i = 0, d = "progress" === e.type, s = e.target.buffered, r = e.loaded || 0,
                    u = e.total || 1;
                if (n.buffered = [], s && s.length) {
                    for (t = 0, o = s.length; t < o; t++) n.buffered.push({start: s.start(t) * Qe, end: s.end(t) * Qe});
                    if (i = (s.end(0) - s.start(0)) * Qe, r = Math.min(1, i / (e.target.duration * Qe)), d && s.length > 1) {
                        for (a = [], o = s.length, t = 0; t < o; t++) a.push(e.target.buffered.start(t) * Qe + "-" + e.target.buffered.end(t) * Qe);
                        ge._wD(this._s.id + ": progress, timeRanges: " + a.join(", "))
                    }
                    d && !isNaN(r) && ge._wD(this._s.id + ": progress, " + Math.floor(100 * r) + "% loaded")
                }
                isNaN(r) || (n._whileloading(r, u, n._get_html5_duration()), r && u && r === u && me.canplaythrough.call(this, e))
            }), ratechange: i(function () {
                ge._wD(this._s.id + ": ratechange")
            }), suspend: i(function (e) {
                var t = this._s;
                ge._wD(this._s.id + ": suspend"), me.progress.call(this, e), t._onsuspend()
            }), stalled: i(function () {
                ge._wD(this._s.id + ": stalled")
            }), timeupdate: i(function () {
                this._s._onTimer()
            }), waiting: i(function () {
                var e = this._s;
                ge._wD(this._s.id + ": waiting"), e._onbufferchange(1)
            })
        }, ee = function (e) {
            var t;
            return t = !(!e || !(e.type || e.url || e.serverURL)) && (!(e.serverURL || e.type && n(e.type)) && (e.type ? te({type: e.type}) : te({url: e.url}) || ge.html5Only || e.url.match(/data:/i)))
        }, ne = function (e) {
            var o;
            return e && (o = Je ? st : ge.html5.canPlayType("audio/wav") ? rt : st, e.src = o, e._called_unload !== t && (e._called_load = !1)), ze && (re = null), o
        }, te = function (e) {
            if (!ge.useHTML5Audio || !ge.hasHTML5) return !1;
            var o, a, i, d, s = e.url || null, r = e.type || null, u = ge.audioFormats;
            if (r && ge.html5[r] !== t) return ge.html5[r] && !n(r);
            if (!ae) {
                ae = [];
                for (d in u) u.hasOwnProperty(d) && (ae.push(d), u[d].related && (ae = ae.concat(u[d].related)));
                ae = new RegExp("\\.(" + ae.join("|") + ")(\\?.*)?$", "i")
            }
            return i = s ? s.toLowerCase().match(ae) : null, i && i.length ? i = i[1] : r ? (a = r.indexOf(";"), i = (a !== -1 ? r.substr(0, a) : r).substr(6)) : o = !1, i && ge.html5[i] !== t ? o = ge.html5[i] && !n(i) : (r = "audio/" + i, o = ge.html5.canPlayType({type: r}), ge.html5[i] = o, o = o && ge.html5[r] && !n(r)), o
        }, de = function () {
            function e(e) {
                var t, o, a = !1, n = !1;
                if (!d || "function" != typeof d.canPlayType) return a;
                if (e instanceof Array) {
                    for (i = 0, o = e.length; i < o; i++) (ge.html5[e[i]] || d.canPlayType(e[i]).match(ge.html5Test)) && (n = !0, ge.html5[e[i]] = !0, ge.flash[e[i]] = !!e[i].match(dt));
                    a = n
                } else t = !(!d || "function" != typeof d.canPlayType) && d.canPlayType(e), a = !(!t || !t.match(ge.html5Test));
                return a
            }

            if (!ge.useHTML5Audio || !ge.hasHTML5) return ge.html5.usingFlash = !0, Ue = !0, !1;
            var o, a, n, i, d = Audio !== t ? Ze && opera.version() < 10 ? new Audio(null) : new Audio : null, s = {};
            n = ge.audioFormats;
            for (o in n) if (n.hasOwnProperty(o) && (a = "audio/" + o, s[o] = e(n[o].type), s[a] = s[o], o.match(dt) ? (ge.flash[o] = !0, ge.flash[a] = !0) : (ge.flash[o] = !1, ge.flash[a] = !1), n[o] && n[o].related)) for (i = n[o].related.length - 1; i >= 0; i--) s["audio/" + n[o].related[i]] = s[o], ge.html5[n[o].related[i]] = s[o], ge.flash[n[o].related[i]] = s[o];
            return s.canPlayType = d ? e : null, ge.html5 = h(ge.html5, s), ge.html5.usingFlash = Z(), Ue = ge.html5.usingFlash, !0
        }, I = {
            notReady: "Unavailable - wait until onready() has fired.",
            notOK: "Audio support is not available.",
            domError: be + "exception caught while appending SWF to DOM.",
            spcWmode: "Removing wmode, preventing known SWF loading issue(s)",
            swf404: we + "Verify that %s is a valid path.",
            tryDebug: "Try " + be + ".debugFlash = true for more security details (output goes to SWF.)",
            checkSWF: "See SWF output for more debug info.",
            localFail: we + "Non-HTTP page (" + ke.location.protocol + " URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",
            waitFocus: we + "Special case: Waiting for SWF to load with window focus...",
            waitForever: we + "Waiting indefinitely for Flash (will recover if unblocked)...",
            waitSWF: we + "Waiting for 100% SWF load...",
            needFunction: we + "Function object expected for %s",
            badID: 'Sound ID "%s" should be a string, starting with a non-numeric character',
            currentObj: we + "_debug(): Current sound objects",
            waitOnload: we + "Waiting for window.onload()",
            docLoaded: we + "Document already loaded",
            onload: we + "initComplete(): calling soundManager.onload()",
            onloadOK: be + ".onload() complete",
            didInit: we + "init(): Already called?",
            secNote: "Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",
            badRemove: we + "Failed to remove Flash node.",
            shutdown: be + ".disable(): Shutting down",
            queue: we + "Queueing %s handler",
            smError: "SMSound.load(): Exception: JS-Flash communication failed, or JS error.",
            fbTimeout: "No flash response, applying ." + H.swfTimedout + " CSS...",
            fbLoaded: "Flash loaded",
            fbHandler: we + "flashBlockHandler()",
            manURL: "SMSound.load(): Using manually-assigned URL",
            onURL: be + ".load(): current URL already assigned.",
            badFV: be + '.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',
            as2loop: "Note: Setting stream:false so looping can work (flash 8 limitation)",
            noNSLoop: "Note: Looping not implemented for MovieStar formats",
            needfl9: "Note: Switching to flash 9, required for MP4 formats.",
            mfTimeout: "Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",
            needFlash: we + "Fatal error: Flash is needed to play some required formats, but is not available.",
            gotFocus: we + "Got window focus.",
            policy: "Enabling usePolicyFile for data access",
            setup: be + ".setup(): allowed parameters: %s",
            setupError: be + '.setup(): "%s" cannot be assigned with this method.',
            setupUndef: be + '.setup(): Could not find option "%s"',
            setupLate: be + ".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",
            noURL: we + "Flash URL required. Call soundManager.setup({url:...}) to get started.",
            sm2Loaded: "SoundManager 2: Ready. " + String.fromCharCode(10003),
            reset: be + ".reset(): Removing event callbacks",
            mobileUA: "Mobile UA detected, preferring HTML5 by default.",
            globalHTML5: "Using singleton HTML5 Audio() pattern for this device.",
            ignoreMobile: "Ignoring mobile restrictions for this device."
        }, F = function () {
            var e, t, o, a, n;
            if (e = qe.call(arguments), a = e.shift(), n = I && I[a] ? I[a] : "", n && e && e.length) for (t = 0, o = e.length; t < o; t++) n = n.replace("%s", e[t]);
            return n
        }, q = function (e) {
            return 8 === c && e.loops > 1 && e.stream && (p("as2loop"), e.stream = !1), e
        }, z = function (e, t) {
            return e && !e.usePolicyFile && (e.onid3 || e.usePeakData || e.useWaveformData || e.useEQData) && (ge._wD((t || "") + F("policy")), e.usePolicyFile = !0), e
        }, W = function (e) {
            ot && console.warn !== t ? console.warn(e) : ge._wD(e)
        }, r = function () {
            return !1
        }, j = function (e) {
            var t;
            for (t in e) e.hasOwnProperty(t) && "function" == typeof e[t] && (e[t] = r);
            t = null
        }, R = function (e) {
            e === t && (e = !1), (De || e) && ge.disable(e)
        }, E = function (e) {
            var t, o = null;
            if (e) if (e.match(/\.swf(\?.*)?$/i)) {
                if (o = e.substr(e.toLowerCase().lastIndexOf(".swf?") + 4)) return e
            } else e.lastIndexOf("/") !== e.length - 1 && (e += "/");
            return t = (e && e.lastIndexOf("/") !== -1 ? e.substr(0, e.lastIndexOf("/") + 1) : "./") + ge.movieURL, ge.noSWFCache && (t += "?ts=" + (new Date).getTime()), t
        }, C = function () {
            c = parseInt(ge.flashVersion, 10), 8 !== c && 9 !== c && (ge._wD(F("badFV", c, Ae)), ge.flashVersion = c = Ae);
            var e = ge.debugMode || ge.debugFlash ? "_debug.swf" : ".swf";
            ge.useHTML5Audio && !ge.html5Only && ge.audioFormats.mp4.required && c < 9 && (ge._wD(F("needfl9")), ge.flashVersion = c = 9), ge.version = ge.versionNumber + (ge.html5Only ? " (HTML5-only mode)" : 9 === c ? " (AS3/Flash 9)" : " (AS2/Flash 8)"), c > 8 ? (ge.defaultOptions = h(ge.defaultOptions, ge.flash9Options), ge.features.buffering = !0, ge.defaultOptions = h(ge.defaultOptions, ge.movieStarOptions), ge.filePatterns.flash9 = new RegExp("\\.(mp3|" + mt.join("|") + ")(\\?.*)?$", "i"), ge.features.movieStar = !0) : ge.features.movieStar = !1, ge.filePattern = ge.filePatterns[8 !== c ? "flash9" : "flash8"], ge.movieURL = (8 === c ? "soundmanager2.swf" : "soundmanager2_flash9.swf").replace(".swf", e), ge.features.peakData = ge.features.waveformData = ge.features.eqData = c > 8
        }, B = function (e, t) {
            $e && $e._setPolling(e, t)
        }, A = function () {
            if (ge.debugURLParam.test(Ce) && (ge.setupOptions.debugMode = ge.debugMode = !0), !s(ge.debugID)) {
                var e, t, o, a, n;
                if (ge.debugMode && !s(ge.debugID) && (!ot || !ge.useConsole || !ge.consoleOnly)) {
                    e = ke.createElement("div"), e.id = ge.debugID + "-toggle", a = {
                        position: "fixed",
                        bottom: "0px",
                        right: "0px",
                        width: "1.2em",
                        height: "1.2em",
                        lineHeight: "1.2em",
                        margin: "2px",
                        textAlign: "center",
                        border: "1px solid #999",
                        cursor: "pointer",
                        background: "#fff",
                        color: "#333",
                        zIndex: 10001
                    }, e.appendChild(ke.createTextNode("-")), e.onclick = U, e.title = "Toggle SM2 debug console", _e.match(/msie 6/i) && (e.style.position = "absolute", e.style.cursor = "hand");
                    for (n in a) a.hasOwnProperty(n) && (e.style[n] = a[n]);
                    if (t = ke.createElement("div"), t.id = ge.debugID, t.style.display = ge.debugMode ? "block" : "none", ge.debugMode && !s(e.id)) {
                        try {
                            o = D(), o.appendChild(e)
                        } catch (i) {
                            throw new Error(F("domError") + " \n" + i.toString())
                        }
                        o.appendChild(t)
                    }
                }
                o = null
            }
        }, Q = this.getSoundById, p = function (e, t) {
            return e ? ge._wD(F(e), t) : ""
        }, U = function () {
            var e = s(ge.debugID), t = s(ge.debugID + "-toggle");
            e && (Te ? (t.innerHTML = "+", e.style.display = "none") : (t.innerHTML = "-", e.style.display = "block"), Te = !Te)
        }, m = function (o, a, n) {
            if (e.sm2Debugger !== t) try {
                sm2Debugger.handleEvent(o, a, n)
            } catch (i) {
                return !1
            }
            return !0
        }, N = function () {
            var e = [];
            return ge.debugMode && e.push(H.sm2Debug), ge.debugFlash && e.push(H.flashDebug), ge.useHighPerformance && e.push(H.highPerf), e.join(" ")
        }, V = function () {
            var e = F("fbHandler"), t = ge.getMoviePercent(), o = H, a = {type: "FLASHBLOCK"};
            ge.html5Only || (ge.ok() ? (ge.didFlashBlock && ge._wD(e + ": Unblocked"), ge.oMC && (ge.oMC.className = [N(), o.swfDefault, o.swfLoaded + (ge.didFlashBlock ? " " + o.swfUnblocked : "")].join(" "))) : (Ue && (ge.oMC.className = N() + " " + o.swfDefault + " " + (null === t ? o.swfTimedout : o.swfError), ge._wD(e + ": " + F("fbTimeout") + (t ? " (" + F("fbLoaded") + ")" : ""))), ge.didFlashBlock = !0, $({
                type: "ontimeout",
                ignoreInit: !0,
                error: a
            }), P(a)))
        }, y = function (e, o, a) {
            Ie[e] === t && (Ie[e] = []), Ie[e].push({method: o, scope: a || null, fired: !1})
        }, $ = function (e) {
            if (e || (e = {type: ge.ok() ? "onready" : "ontimeout"}), !Oe && e && !e.ignoreInit) return !1;
            if ("ontimeout" === e.type && (ge.ok() || De && !e.ignoreInit)) return !1;
            var t, o, a = {success: e && e.ignoreInit ? ge.ok() : !De}, n = e && e.type ? Ie[e.type] || [] : [], i = [],
                d = [a], s = Ue && !ge.ok();
            for (e.error && (d[0].error = e.error), t = 0, o = n.length; t < o; t++) n[t].fired !== !0 && i.push(n[t]);
            if (i.length) for (t = 0, o = i.length; t < o; t++) i[t].scope ? i[t].method.apply(i[t].scope, d) : i[t].method.apply(this, d), s || (i[t].fired = !0);
            return !0
        }, b = function () {
            e.setTimeout(function () {
                ge.useFlashBlock && V(), $(), "function" == typeof ge.onload && (p("onload", 1), ge.onload.apply(e), p("onloadOK", 1)), ge.waitForWindowLoad && se.add(e, "load", b)
            }, 1)
        }, le = function () {
            if (ue !== t) return ue;
            var o, a, n, i, d = !1, s = navigator, r = e.ActiveXObject;
            try {
                i = s.plugins
            } catch (u) {
                i = void 0
            }
            if (i && i.length) a = "application/x-shockwave-flash", n = s.mimeTypes, n && n[a] && n[a].enabledPlugin && n[a].enabledPlugin.description && (d = !0); else if (r !== t && !_e.match(/MSAppHost/i)) {
                try {
                    o = new r("ShockwaveFlash.ShockwaveFlash")
                } catch (u) {
                    o = null
                }
                d = !!o, o = null
            }
            return ue = d, d
        }, Z = function () {
            var e, t, o = ge.audioFormats, a = Xe && !!_e.match(/os (1|2|3_0|3_1)\s/i);
            if (a ? (ge.hasHTML5 = !1, ge.html5Only = !0, ge.oMC && (ge.oMC.style.display = "none")) : ge.useHTML5Audio && (ge.html5 && ge.html5.canPlayType || (ge._wD("SoundManager: No HTML5 Audio() support detected."), ge.hasHTML5 = !1), tt && ge._wD(we + "Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - " + (ue ? "will use flash fallback for MP3/MP4, if available" : " would use flash fallback for MP3/MP4, but none detected."), 1)), ge.useHTML5Audio && ge.hasHTML5) {
                J = !0;
                for (t in o) o.hasOwnProperty(t) && o[t].required && (ge.html5.canPlayType(o[t].type) ? ge.preferFlash && (ge.flash[t] || ge.flash[o[t].type]) && (e = !0) : (J = !1, e = !0))
            }
            return ge.ignoreFlash && (e = !1, J = !0), ge.html5Only = ge.hasHTML5 && ge.useHTML5Audio && !e, !ge.html5Only
        }, K = function (e) {
            var t, o, a, n = 0;
            if (e instanceof Array) {
                for (t = 0, o = e.length; t < o; t++) if (e[t] instanceof Object) {
                    if (ge.canPlayMIME(e[t].type)) {
                        n = t;
                        break
                    }
                } else if (ge.canPlayURL(e[t])) {
                    n = t;
                    break
                }
                e[n].url && (e[n] = e[n].url), a = e[n]
            } else a = e;
            return a
        }, X = function (e) {
            e._hasTimer || (e._hasTimer = !0, !et && ge.html5PollingInterval && (null === Ne && 0 === Ve && (Ne = setInterval(Y, ge.html5PollingInterval)), Ve++))
        }, G = function (e) {
            e._hasTimer && (e._hasTimer = !1, !et && ge.html5PollingInterval && Ve--)
        }, Y = function () {
            var e;
            if (null !== Ne && !Ve) return clearInterval(Ne), void (Ne = null);
            for (e = ge.soundIDs.length - 1; e >= 0; e--) ge.sounds[ge.soundIDs[e]].isHTML5 && ge.sounds[ge.soundIDs[e]]._hasTimer && ge.sounds[ge.soundIDs[e]]._onTimer()
        }, P = function (o) {
            o = o !== t ? o : {}, "function" == typeof ge.onerror && ge.onerror.apply(e, [{type: o.type !== t ? o.type : null}]), o.fatal !== t && o.fatal && ge.disable()
        }, ce = function () {
            if (tt && le()) {
                var e, t, o = ge.audioFormats;
                for (t in o) if (o.hasOwnProperty(t) && ("mp3" === t || "mp4" === t) && (ge._wD(be + ": Using flash fallback for " + t + " format"), ge.html5[t] = !1, o[t] && o[t].related)) for (e = o[t].related.length - 1; e >= 0; e--) ge.html5[o[t].related[e]] = !1
            }
        }, this._setSandboxType = function (e) {
            var o = ge.sandbox;
            o.type = e, o.description = o.types[o.types[e] !== t ? e : "unknown"], "localWithFile" === o.type ? (o.noRemote = !0, o.noLocal = !1, p("secNote", 2)) : "localWithNetwork" === o.type ? (o.noRemote = !1, o.noLocal = !0) : "localTrusted" === o.type && (o.noRemote = !1, o.noLocal = !1)
        }, this._externalInterfaceOK = function (e) {
            if (!ge.swfLoaded) {
                var t;
                return m("swf", !0), m("flashtojs", !0), ge.swfLoaded = !0, nt = !1, tt && ce(), e && e.replace(/\+dev/i, "") === ge.versionNumber.replace(/\+dev/i, "") ? void setTimeout(l, Ye ? 100 : 1) : (t = be + ': Fatal: JavaScript file build "' + ge.versionNumber + '" does not match Flash SWF build "' + e + '" at ' + ge.url + ". Ensure both are up-to-date.", void setTimeout(function () {
                    throw new Error(t)
                }, 0))
            }
        }, L = function (e, o) {
            function a() {
                var e, t = [], o = [], a = " + ";
                e = "SoundManager " + ge.version + (!ge.html5Only && ge.useHTML5Audio ? ge.hasHTML5 ? " + HTML5 audio" : ", no HTML5 audio support" : ""), ge.html5Only ? ge.html5PollingInterval && t.push("html5PollingInterval (" + ge.html5PollingInterval + "ms)") : (ge.preferFlash && t.push("preferFlash"), ge.useHighPerformance && t.push("useHighPerformance"), ge.flashPollingInterval && t.push("flashPollingInterval (" + ge.flashPollingInterval + "ms)"), ge.html5PollingInterval && t.push("html5PollingInterval (" + ge.html5PollingInterval + "ms)"), ge.wmode && t.push("wmode (" + ge.wmode + ")"), ge.debugFlash && t.push("debugFlash"), ge.useFlashBlock && t.push("flashBlock")), t.length && (o = o.concat([t.join(a)])), ge._wD(e + (o.length ? a + o.join(", ") : ""), 1), pe()
            }

            function n(e, t) {
                return '<param name="' + e + '" value="' + t + '" />'
            }

            if (Se && Me) return !1;
            if (ge.html5Only) return C(), a(), ge.oMC = s(ge.movieID), l(), Se = !0, Me = !0, !1;
            var i, d, r, u, c, m, p, f, h = o || ge.url, v = ge.altURL || h,
                g = "JS/Flash audio component (SoundManager 2)", y = D(), $ = N(), b = null,
                w = ke.getElementsByTagName("html")[0];
            if (b = w && w.dir && w.dir.match(/rtl/i), e = e === t ? ge.id : e, C(), ge.url = E(ut ? h : v), o = ge.url, ge.wmode = !ge.wmode && ge.useHighPerformance ? "transparent" : ge.wmode, null !== ge.wmode && (_e.match(/msie 8/i) || !Ye && !ge.useHighPerformance) && navigator.platform.match(/win32|win64/i) && (He.push(I.spcWmode), ge.wmode = null), i = {
                name: e,
                id: e,
                src: o,
                quality: "high",
                allowScriptAccess: ge.allowScriptAccess,
                bgcolor: ge.bgColor,
                pluginspage: lt + "www.macromedia.com/go/getflashplayer",
                title: g,
                type: "application/x-shockwave-flash",
                wmode: ge.wmode,
                hasPriority: "true"
            }, ge.debugFlash && (i.FlashVars = "debug=1"), ge.wmode || delete i.wmode, Ye) d = ke.createElement("div"), u = ['<object id="' + e + '" data="' + o + '" type="' + i.type + '" title="' + i.title + '" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">', n("movie", o), n("AllowScriptAccess", ge.allowScriptAccess), n("quality", i.quality), ge.wmode ? n("wmode", ge.wmode) : "", n("bgcolor", ge.bgColor), n("hasPriority", "true"), ge.debugFlash ? n("FlashVars", i.FlashVars) : "", "</object>"].join(""); else {
                d = ke.createElement("embed");
                for (r in i) i.hasOwnProperty(r) && d.setAttribute(r, i[r])
            }
            if (A(), $ = N(), y = D()) if (ge.oMC = s(ge.movieID) || ke.createElement("div"), ge.oMC.id) f = ge.oMC.className, ge.oMC.className = (f ? f + " " : H.swfDefault) + ($ ? " " + $ : ""), ge.oMC.appendChild(d), Ye && (c = ge.oMC.appendChild(ke.createElement("div")), c.className = H.swfBox, c.innerHTML = u), Me = !0; else {
                if (ge.oMC.id = ge.movieID, ge.oMC.className = H.swfDefault + " " + $, m = null, c = null, ge.useFlashBlock || (ge.useHighPerformance ? m = {
                    position: "fixed",
                    width: "8px",
                    height: "8px",
                    bottom: "0px",
                    left: "0px",
                    overflow: "hidden"
                } : (m = {
                    position: "absolute",
                    width: "6px",
                    height: "6px",
                    top: "-9999px",
                    left: "-9999px"
                }, b && (m.left = Math.abs(parseInt(m.left, 10)) + "px"))), Ke && (ge.oMC.style.zIndex = 1e4), !ge.debugFlash) for (p in m) m.hasOwnProperty(p) && (ge.oMC.style[p] = m[p]);
                try {
                    Ye || ge.oMC.appendChild(d), y.appendChild(ge.oMC), Ye && (c = ge.oMC.appendChild(ke.createElement("div")), c.className = H.swfBox, c.innerHTML = u), Me = !0
                } catch (x) {
                    throw new Error(F("domError") + " \n" + x.toString())
                }
            }
            return Se = !0, a(), !0
        }, T = function () {
            return ge.html5Only ? (L(), !1) : !$e && (ge.url ? ($e = ge.getMovie(ge.id), $e || (je ? (Ye ? ge.oMC.innerHTML = Re : ge.oMC.appendChild(je), je = null, Se = !0) : L(ge.id, ge.url), $e = ge.getMovie(ge.id)), "function" == typeof ge.oninitmovie && setTimeout(ge.oninitmovie, 1), fe(), !0) : (p("noURL"), !1))
        }, w = function () {
            setTimeout(x, 1e3)
        }, _ = function () {
            e.setTimeout(function () {
                W(we + "useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."), ge.setup({preferFlash: !1}).reboot(), ge.didFlashBlock = !0, ge.beginDelayedInit()
            }, 1)
        }, x = function () {
            var t, o = !1;
            if (ge.url && !Ee) {
                if (Ee = !0, se.remove(e, "load", w), ue && nt && !at) return void p("waitFocus");
                Oe || (t = ge.getMoviePercent(), t > 0 && t < 100 && (o = !0)), setTimeout(function () {
                    return t = ge.getMoviePercent(), o ? (Ee = !1, ge._wD(F("waitSWF")), void e.setTimeout(w, 1)) : (Oe || (ge._wD(be + ": No Flash response within expected time. Likely causes: " + (0 === t ? "SWF load failed, " : "") + "Flash blocked or JS-Flash security error." + (ge.debugFlash ? " " + F("checkSWF") : ""), 2), !ut && t && (p("localFail", 2), ge.debugFlash || p("tryDebug", 2)), 0 === t && ge._wD(F("swf404", ge.url), 1), m("flashtojs", !1, ": Timed out" + (ut ? " (Check flash security or flash blockers)" : " (No plugin/missing SWF?)"))), void (!Oe && it && (null === t ? ge.useFlashBlock || 0 === ge.flashLoadTimeout ? (ge.useFlashBlock && V(), p("waitForever")) : !ge.useFlashBlock && J ? _() : (p("waitForever"), $({
                        type: "ontimeout",
                        ignoreInit: !0,
                        error: {type: "INIT_FLASHBLOCK"}
                    })) : 0 === ge.flashLoadTimeout ? p("waitForever") : !ge.useFlashBlock && J ? _() : R(!0))))
                }, ge.flashLoadTimeout)
            }
        }, k = function () {
            function t() {
                se.remove(e, "focus", k)
            }

            return at || !nt ? (t(), !0) : (it = !0, at = !0, p("gotFocus"), Ee = !1, w(), t(), !0)
        },fe = function () {
            He.length && (ge._wD("SoundManager 2: " + He.join(" "), 1), He = [])
        },pe = function () {
            fe();
            var e, t = [];
            if (ge.useHTML5Audio && ge.hasHTML5) {
                for (e in ge.audioFormats) ge.audioFormats.hasOwnProperty(e) && t.push(e + " = " + ge.html5[e] + (!ge.html5[e] && Ue && ge.flash[e] ? " (using flash)" : ge.preferFlash && ge.flash[e] && Ue ? " (preferring flash)" : ge.html5[e] ? "" : " (" + (ge.audioFormats[e].required ? "required, " : "") + "and no flash support)"));
                ge._wD("SoundManager 2 HTML5 support: " + t.join(", "), 1)
            }
        },f = function (t) {
            if (Oe) return !1;
            if (ge.html5Only) return p("sm2Loaded", 1), Oe = !0, b(), m("onload", !0), !0;
            var o, a = ge.useFlashBlock && ge.flashLoadTimeout && !ge.getMoviePercent(), n = !0;
            return a || (Oe = !0), o = {type: !ue && Ue ? "NO_FLASH" : "INIT_TIMEOUT"}, ge._wD("SoundManager 2 " + (De ? "failed to load" : "loaded") + " (" + (De ? "Flash security/load error" : "OK") + ") " + String.fromCharCode(De ? 10006 : 10003), De ? 2 : 1), De || t ? (ge.useFlashBlock && ge.oMC && (ge.oMC.className = N() + " " + (null === ge.getMoviePercent() ? H.swfTimedout : H.swfError)), $({
                type: "ontimeout",
                error: o,
                ignoreInit: !0
            }), m("onload", !1), P(o), n = !1) : m("onload", !0), De || (ge.waitForWindowLoad && !Le ? (p("waitOnload"), se.add(e, "load", b)) : (ge.waitForWindowLoad && Le && p("docLoaded"), b())), n
        },u = function () {
            var e, o = ge.setupOptions;
            for (e in o) o.hasOwnProperty(e) && (ge[e] === t ? ge[e] = o[e] : ge[e] !== o[e] && (ge.setupOptions[e] = ge[e]))
        },l = function () {
            function t() {
                se.remove(e, "load", ge.beginDelayedInit)
            }

            if (Oe) return p("didInit"), !1;
            if (ge.html5Only) return Oe || (t(), ge.enabled = !0, f()), !0;
            T();
            try {
                $e._externalInterfaceTest(!1), B(!0, ge.flashPollingInterval || (ge.useHighPerformance ? 10 : 50)), ge.debugMode || $e._disableDebug(), ge.enabled = !0, m("jstoflash", !0), ge.html5Only || se.add(e, "unload", r)
            } catch (o) {
                return ge._wD("js/flash exception: " + o.toString()), m("jstoflash", !1), P({
                    type: "JS_TO_FLASH_EXCEPTION",
                    fatal: !0
                }), R(!0), f(), !1
            }
            return f(), t(), !0
        },S = function () {
            return !O && (O = !0, u(), A(), !ue && ge.hasHTML5 && (ge._wD("SoundManager 2: No Flash detected" + (ge.useHTML5Audio ? ". Trying HTML5-only mode." : ", enabling HTML5."), 1), ge.setup({
                useHTML5Audio: !0,
                preferFlash: !1
            })), de(), !ue && Ue && (He.push(I.needFlash), ge.setup({flashLoadTimeout: 1})), ke.removeEventListener && ke.removeEventListener("DOMContentLoaded", S, !1), T(), !0)
        },ie = function () {
            return "complete" === ke.readyState && (S(), ke.detachEvent("onreadystatechange", ie)), !0
        },M = function () {
            Le = !0, S(), se.remove(e, "load", M)
        },le(),se.add(e, "focus", k),se.add(e, "load", w),se.add(e, "load", M),ke.addEventListener ? ke.addEventListener("DOMContentLoaded", S, !1) : ke.attachEvent ? ke.attachEvent("onreadystatechange", ie) : (m("onload", !1), P({
            type: "NO_DOM2_EVENTS",
            fatal: !0
        }))
    }

    if (!e || !e.document) throw new Error("SoundManager requires a browser with window and document objects.");
    var a = null;
    e.SM2_DEFER !== t && SM2_DEFER || (a = new o), "object" == typeof module && module && "object" == typeof module.exports ? (module.exports.SoundManager = o, module.exports.soundManager = a) : "function" == typeof define && define.amd && define(function () {
        function t(t) {
            if (!e.soundManager && t instanceof Function) {
                var a = t(o);
                a instanceof o && (e.soundManager = a)
            }
            return e.soundManager
        }

        return {constructor: o, getInstance: t}
    }), e.SoundManager = o, e.soundManager = function () {
        var t = null, a = [];
        return {
            setup: function (n) {
                t = new o, (n.onready || a.length > 0) && (n.onready && a.push(n.onready), t.onready(function () {
                    for (var e = 0; e < a.length; e++) try {
                        a[e]()
                    } catch (t) {
                    }
                }), n.onready && delete n.onready);
                var i = t.setup(n);
                return t.beginDelayedInit(), t.setupM = function () {
                }, e.soundManager = t, i
            }, onready: function (e) {
                a.push(e)
            }, stopAll: function () {
            }, setupM: function (e) {
                var o;
                return o = e ? {
                    url: "/flash/soundmanager2_flash9.swf",
                    flashVersion: 9,
                    useHighPerformance: !0,
                    preferFlash: !1,
                    forceUseGlobalHTML5Audio: !0,
                    html5PollingInterval: 10,
                    wmode: "transparent",
                    debugMode: !1,
                    defaultOptions: {volume: 100}
                } : {
                    url: "/flash/soundmanager2_flash9.swf",
                    flashVersion: 9,
                    useHighPerformance: !0,
                    preferFlash: !0,
                    wmode: "transparent",
                    debugMode: !1,
                    html5PollingInterval: 10,
                    defaultOptions: {volume: 100},
                    ontimeout: function () {
                        t.preferFlash = !1, t.onerror = {}
                    }
                }, this.setup(o)
            }
        }
    }()
}(window);
var twemoji = function () {
    "use strict";

    function e(e) {
        return document.createTextNode(e)
    }

    function t(e) {
        return e.replace(y, s)
    }

    function o(e, t) {
        return "".concat(t.base, t.size, "/", e, t.ext)
    }

    function a(e, t) {
        for (var o, n, i = e.childNodes, d = i.length; d--;) o = i[d], n = o.nodeType, 3 === n ? t.push(o) : 1 !== n || $.test(o.nodeName) || a(o, t);
        return t
    }

    function n(e, t) {
        return f("️" === t ? e.slice(0, -1) : 3 === e.length && "️" === e.charAt(1) ? e.charAt(0) + e.charAt(2) : e)
    }

    function i(t, o) {
        for (var i, d, s, r, u, l, c, m, p, f, h, v, y, $, b = a(t, []), w = b.length; w--;) {
            for (s = !1, r = document.createDocumentFragment(), u = b[w], l = u.nodeValue, m = 0; c = g.exec(l);) {
                if (p = c.index, p !== m && r.appendChild(e(l.slice(m, p))), h = c[0], v = c[1], y = c[2], m = p + h.length, "︎" !== y && ($ = o.callback(n(v, y), o, y))) {
                    f = new Image, f.onerror = o.onerror, f.setAttribute("draggable", "false"), i = o.attributes(v, y);
                    for (d in i) i.hasOwnProperty(d) && 0 !== d.indexOf("on") && !f.hasAttribute(d) && f.setAttribute(d, i[d]);
                    f.className = o.className, f.alt = h, f.src = $, s = !0, r.appendChild(f)
                }
                f || r.appendChild(e(h)), f = null
            }
            s && (m < l.length && r.appendChild(e(l.slice(m))), u.parentNode.replaceChild(r, u))
        }
        return t
    }

    function d(e, o) {
        return m(e, function (e, a, i) {
            var d, s, r, u = e;
            if ("︎" !== i && (r = o.callback(n(a, i), o, i))) {
                u = "<img ".concat('class="', o.className, '" ', 'draggable="false" ', 'alt="', e, '"', ' src="', r, '"'), d = o.attributes(a, i);
                for (s in d) d.hasOwnProperty(s) && 0 !== s.indexOf("on") && u.indexOf(" " + s + "=") === -1 && (u = u.concat(" ", s, '="', t(d[s]), '"'));
                u = u.concat(">")
            }
            return u
        })
    }

    function s(e) {
        return v[e]
    }

    function r() {
        return null
    }

    function u(e) {
        return "number" == typeof e ? e + "x" + e : e
    }

    function l(e) {
        var t = "string" == typeof e ? parseInt(e, 16) : e;
        return t < 65536 ? b(t) : (t -= 65536, b(55296 + (t >> 10), 56320 + (1023 & t)))
    }

    function c(e, t) {
        return t && "function" != typeof t || (t = {callback: t}), ("string" == typeof e ? d : i)(e, {
            callback: t.callback || o,
            attributes: "function" == typeof t.attributes ? t.attributes : r,
            base: "string" == typeof t.base ? t.base : h.base,
            ext: t.ext || h.ext,
            size: t.folder || u(t.size || h.size),
            className: t.className || h.className,
            onerror: t.onerror || h.onerror
        })
    }

    function m(e, t) {
        return String(e).replace(g, t)
    }

    function p(e) {
        g.lastIndex = 0;
        var t = g.test(e);
        return g.lastIndex = 0, t
    }

    function f(e, t) {
        for (var o = [], a = 0, n = 0, i = 0; i < e.length;) a = e.charCodeAt(i++), n ? (o.push((65536 + (n - 55296 << 10) + (a - 56320)).toString(16)), n = 0) : 55296 <= a && a <= 56319 ? n = a : o.push(a.toString(16));
        return o.join(t || "-")
    }

    var h = {
            base: ("https:" === location.protocol ? "https:" : "http:") + "//twemoji.maxcdn.com/",
            ext: ".png",
            size: "36x36",
            className: "emoji",
            convert: {fromCodePoint: l, toCodePoint: f},
            onerror: function () {
                this.parentNode && this.parentNode.replaceChild(e(this.alt), this)
            },
            parse: c,
            replace: m,
            test: p
        }, v = {"&": "&amp;", "<": "&lt;", ">": "&gt;", "'": "&#39;", '"': "&quot;"},
        g = /((?:\ud83c\udde8\ud83c\uddf3|\ud83c\uddfa\ud83c\uddf8|\ud83c\uddf7\ud83c\uddfa|\ud83c\uddf0\ud83c\uddf7|\ud83c\uddef\ud83c\uddf5|\ud83c\uddee\ud83c\uddf9|\ud83c\uddec\ud83c\udde7|\ud83c\uddeb\ud83c\uddf7|\ud83c\uddea\ud83c\uddf8|\ud83c\udde9\ud83c\uddea|\u0039\ufe0f?\u20e3|\u0038\ufe0f?\u20e3|\u0037\ufe0f?\u20e3|\u0036\ufe0f?\u20e3|\u0035\ufe0f?\u20e3|\u0034\ufe0f?\u20e3|\u0033\ufe0f?\u20e3|\u0032\ufe0f?\u20e3|\u0031\ufe0f?\u20e3|\u0030\ufe0f?\u20e3|\u0023\ufe0f?\u20e3|\ud83d\udeb3|\ud83d\udeb1|\ud83d\udeb0|\ud83d\udeaf|\ud83d\udeae|\ud83d\udea6|\ud83d\udea3|\ud83d\udea1|\ud83d\udea0|\ud83d\ude9f|\ud83d\ude9e|\ud83d\ude9d|\ud83d\ude9c|\ud83d\ude9b|\ud83d\ude98|\ud83d\ude96|\ud83d\ude94|\ud83d\ude90|\ud83d\ude8e|\ud83d\ude8d|\ud83d\ude8b|\ud83d\ude8a|\ud83d\ude88|\ud83d\ude86|\ud83d\ude82|\ud83d\ude81|\ud83d\ude36|\ud83d\ude34|\ud83d\ude2f|\ud83d\ude2e|\ud83d\ude2c|\ud83d\ude27|\ud83d\ude26|\ud83d\ude1f|\ud83d\ude1b|\ud83d\ude19|\ud83d\ude17|\ud83d\ude15|\ud83d\ude11|\ud83d\ude10|\ud83d\ude0e|\ud83d\ude08|\ud83d\ude07|\ud83d\ude00|\ud83d\udd67|\ud83d\udd66|\ud83d\udd65|\ud83d\udd64|\ud83d\udd63|\ud83d\udd62|\ud83d\udd61|\ud83d\udd60|\ud83d\udd5f|\ud83d\udd5e|\ud83d\udd5d|\ud83d\udd5c|\ud83d\udd2d|\ud83d\udd2c|\ud83d\udd15|\ud83d\udd09|\ud83d\udd08|\ud83d\udd07|\ud83d\udd06|\ud83d\udd05|\ud83d\udd04|\ud83d\udd02|\ud83d\udd01|\ud83d\udd00|\ud83d\udcf5|\ud83d\udcef|\ud83d\udced|\ud83d\udcec|\ud83d\udcb7|\ud83d\udcb6|\ud83d\udcad|\ud83d\udc6d|\ud83d\udc6c|\ud83d\udc65|\ud83d\udc2a|\ud83d\udc16|\ud83d\udc15|\ud83d\udc13|\ud83d\udc10|\ud83d\udc0f|\ud83d\udc0b|\ud83d\udc0a|\ud83d\udc09|\ud83d\udc08|\ud83d\udc07|\ud83d\udc06|\ud83d\udc05|\ud83d\udc04|\ud83d\udc03|\ud83d\udc02|\ud83d\udc01|\ud83d\udc00|\ud83c\udfe4|\ud83c\udfc9|\ud83c\udfc7|\ud83c\udf7c|\ud83c\udf50|\ud83c\udf4b|\ud83c\udf33|\ud83c\udf32|\ud83c\udf1e|\ud83c\udf1d|\ud83c\udf1c|\ud83c\udf1a|\ud83c\udf18|\ud83c\udccf|\ud83c\udd8e|\ud83c\udd91|\ud83c\udd92|\ud83c\udd93|\ud83c\udd94|\ud83c\udd95|\ud83c\udd96|\ud83c\udd97|\ud83c\udd98|\ud83c\udd99|\ud83c\udd9a|\ud83d\udc77|\ud83d\udec5|\ud83d\udec4|\ud83d\udec3|\ud83d\udec2|\ud83d\udec1|\ud83d\udebf|\ud83d\udeb8|\ud83d\udeb7|\ud83d\udeb5|\ud83c\ude01|\ud83c\ude32|\ud83c\ude33|\ud83c\ude34|\ud83c\ude35|\ud83c\ude36|\ud83c\ude38|\ud83c\ude39|\ud83c\ude3a|\ud83c\ude50|\ud83c\ude51|\ud83c\udf00|\ud83c\udf01|\ud83c\udf02|\ud83c\udf03|\ud83c\udf04|\ud83c\udf05|\ud83c\udf06|\ud83c\udf07|\ud83c\udf08|\ud83c\udf09|\ud83c\udf0a|\ud83c\udf0b|\ud83c\udf0c|\ud83c\udf0f|\ud83c\udf11|\ud83c\udf13|\ud83c\udf14|\ud83c\udf15|\ud83c\udf19|\ud83c\udf1b|\ud83c\udf1f|\ud83c\udf20|\ud83c\udf30|\ud83c\udf31|\ud83c\udf34|\ud83c\udf35|\ud83c\udf37|\ud83c\udf38|\ud83c\udf39|\ud83c\udf3a|\ud83c\udf3b|\ud83c\udf3c|\ud83c\udf3d|\ud83c\udf3e|\ud83c\udf3f|\ud83c\udf40|\ud83c\udf41|\ud83c\udf42|\ud83c\udf43|\ud83c\udf44|\ud83c\udf45|\ud83c\udf46|\ud83c\udf47|\ud83c\udf48|\ud83c\udf49|\ud83c\udf4a|\ud83c\udf4c|\ud83c\udf4d|\ud83c\udf4e|\ud83c\udf4f|\ud83c\udf51|\ud83c\udf52|\ud83c\udf53|\ud83c\udf54|\ud83c\udf55|\ud83c\udf56|\ud83c\udf57|\ud83c\udf58|\ud83c\udf59|\ud83c\udf5a|\ud83c\udf5b|\ud83c\udf5c|\ud83c\udf5d|\ud83c\udf5e|\ud83c\udf5f|\ud83c\udf60|\ud83c\udf61|\ud83c\udf62|\ud83c\udf63|\ud83c\udf64|\ud83c\udf65|\ud83c\udf66|\ud83c\udf67|\ud83c\udf68|\ud83c\udf69|\ud83c\udf6a|\ud83c\udf6b|\ud83c\udf6c|\ud83c\udf6d|\ud83c\udf6e|\ud83c\udf6f|\ud83c\udf70|\ud83c\udf71|\ud83c\udf72|\ud83c\udf73|\ud83c\udf74|\ud83c\udf75|\ud83c\udf76|\ud83c\udf77|\ud83c\udf78|\ud83c\udf79|\ud83c\udf7a|\ud83c\udf7b|\ud83c\udf80|\ud83c\udf81|\ud83c\udf82|\ud83c\udf83|\ud83c\udf84|\ud83c\udf85|\ud83c\udf86|\ud83c\udf87|\ud83c\udf88|\ud83c\udf89|\ud83c\udf8a|\ud83c\udf8b|\ud83c\udf8c|\ud83c\udf8d|\ud83c\udf8e|\ud83c\udf8f|\ud83c\udf90|\ud83c\udf91|\ud83c\udf92|\ud83c\udf93|\ud83c\udfa0|\ud83c\udfa1|\ud83c\udfa2|\ud83c\udfa3|\ud83c\udfa4|\ud83c\udfa5|\ud83c\udfa6|\ud83c\udfa7|\ud83c\udfa8|\ud83c\udfa9|\ud83c\udfaa|\ud83c\udfab|\ud83c\udfac|\ud83c\udfad|\ud83c\udfae|\ud83c\udfaf|\ud83c\udfb0|\ud83c\udfb1|\ud83c\udfb2|\ud83c\udfb3|\ud83c\udfb4|\ud83c\udfb5|\ud83c\udfb6|\ud83c\udfb7|\ud83c\udfb8|\ud83c\udfb9|\ud83c\udfba|\ud83c\udfbb|\ud83c\udfbc|\ud83c\udfbd|\ud83c\udfbe|\ud83c\udfbf|\ud83c\udfc0|\ud83c\udfc1|\ud83c\udfc2|\ud83c\udfc3|\ud83c\udfc4|\ud83c\udfc6|\ud83c\udfc8|\ud83c\udfca|\ud83c\udfe0|\ud83c\udfe1|\ud83c\udfe2|\ud83c\udfe3|\ud83c\udfe5|\ud83c\udfe6|\ud83c\udfe7|\ud83c\udfe8|\ud83c\udfe9|\ud83c\udfea|\ud83c\udfeb|\ud83c\udfec|\ud83c\udfed|\ud83c\udfee|\ud83c\udfef|\ud83c\udff0|\ud83d\udc0c|\ud83d\udc0d|\ud83d\udc0e|\ud83d\udc11|\ud83d\udc12|\ud83d\udc14|\ud83d\udc17|\ud83d\udc18|\ud83d\udc19|\ud83d\udc1a|\ud83d\udc1b|\ud83d\udc1c|\ud83d\udc1d|\ud83d\udc1e|\ud83d\udc1f|\ud83d\udc20|\ud83d\udc21|\ud83d\udc22|\ud83d\udc23|\ud83d\udc24|\ud83d\udc25|\ud83d\udc26|\ud83d\udc27|\ud83d\udc28|\ud83d\udc29|\ud83d\udc2b|\ud83d\udc2c|\ud83d\udc2d|\ud83d\udc2e|\ud83d\udc2f|\ud83d\udc30|\ud83d\udc31|\ud83d\udc32|\ud83d\udc33|\ud83d\udc34|\ud83d\udc35|\ud83d\udc36|\ud83d\udc37|\ud83d\udc38|\ud83d\udc39|\ud83d\udc3a|\ud83d\udc3b|\ud83d\udc3c|\ud83d\udc3d|\ud83d\udc3e|\ud83d\udc40|\ud83d\udc42|\ud83d\udc43|\ud83d\udc44|\ud83d\udc45|\ud83d\udc46|\ud83d\udc47|\ud83d\udc48|\ud83d\udc49|\ud83d\udc4a|\ud83d\udc4b|\ud83d\udc4c|\ud83d\udc4d|\ud83d\udc4e|\ud83d\udc4f|\ud83d\udc50|\ud83d\udc51|\ud83d\udc52|\ud83d\udc53|\ud83d\udc54|\ud83d\udc55|\ud83d\udc56|\ud83d\udc57|\ud83d\udc58|\ud83d\udc59|\ud83d\udc5a|\ud83d\udc5b|\ud83d\udc5c|\ud83d\udc5d|\ud83d\udc5e|\ud83d\udc5f|\ud83d\udc60|\ud83d\udc61|\ud83d\udc62|\ud83d\udc63|\ud83d\udc64|\ud83d\udc66|\ud83d\udc67|\ud83d\udc68|\ud83d\udc69|\ud83d\udc6a|\ud83d\udc6b|\ud83d\udc6e|\ud83d\udc6f|\ud83d\udc70|\ud83d\udc71|\ud83d\udc72|\ud83d\udc73|\ud83d\udc74|\ud83d\udc75|\ud83d\udc76|\ud83d\udeb4|\ud83d\udc78|\ud83d\udc79|\ud83d\udc7a|\ud83d\udc7b|\ud83d\udc7c|\ud83d\udc7d|\ud83d\udc7e|\ud83d\udc7f|\ud83d\udc80|\ud83d\udc81|\ud83d\udc82|\ud83d\udc83|\ud83d\udc84|\ud83d\udc85|\ud83d\udc86|\ud83d\udc87|\ud83d\udc88|\ud83d\udc89|\ud83d\udc8a|\ud83d\udc8b|\ud83d\udc8c|\ud83d\udc8d|\ud83d\udc8e|\ud83d\udc8f|\ud83d\udc90|\ud83d\udc91|\ud83d\udc92|\ud83d\udc93|\ud83d\udc94|\ud83d\udc95|\ud83d\udc96|\ud83d\udc97|\ud83d\udc98|\ud83d\udc99|\ud83d\udc9a|\ud83d\udc9b|\ud83d\udc9c|\ud83d\udc9d|\ud83d\udc9e|\ud83d\udc9f|\ud83d\udca0|\ud83d\udca1|\ud83d\udca2|\ud83d\udca3|\ud83d\udca4|\ud83d\udca5|\ud83d\udca6|\ud83d\udca7|\ud83d\udca8|\ud83d\udca9|\ud83d\udcaa|\ud83d\udcab|\ud83d\udcac|\ud83d\udcae|\ud83d\udcaf|\ud83d\udcb0|\ud83d\udcb1|\ud83d\udcb2|\ud83d\udcb3|\ud83d\udcb4|\ud83d\udcb5|\ud83d\udcb8|\ud83d\udcb9|\ud83d\udcba|\ud83d\udcbb|\ud83d\udcbc|\ud83d\udcbd|\ud83d\udcbe|\ud83d\udcbf|\ud83d\udcc0|\ud83d\udcc1|\ud83d\udcc2|\ud83d\udcc3|\ud83d\udcc4|\ud83d\udcc5|\ud83d\udcc6|\ud83d\udcc7|\ud83d\udcc8|\ud83d\udcc9|\ud83d\udcca|\ud83d\udccb|\ud83d\udccc|\ud83d\udccd|\ud83d\udcce|\ud83d\udccf|\ud83d\udcd0|\ud83d\udcd1|\ud83d\udcd2|\ud83d\udcd3|\ud83d\udcd4|\ud83d\udcd5|\ud83d\udcd6|\ud83d\udcd7|\ud83d\udcd8|\ud83d\udcd9|\ud83d\udcda|\ud83d\udcdb|\ud83d\udcdc|\ud83d\udcdd|\ud83d\udcde|\ud83d\udcdf|\ud83d\udce0|\ud83d\udce1|\ud83d\udce2|\ud83d\udce3|\ud83d\udce4|\ud83d\udce5|\ud83d\udce6|\ud83d\udce7|\ud83d\udce8|\ud83d\udce9|\ud83d\udcea|\ud83d\udceb|\ud83d\udcee|\ud83d\udcf0|\ud83d\udcf1|\ud83d\udcf2|\ud83d\udcf3|\ud83d\udcf4|\ud83d\udcf6|\ud83d\udcf7|\ud83d\udcf9|\ud83d\udcfa|\ud83d\udcfb|\ud83d\udcfc|\ud83d\udd03|\ud83d\udd0a|\ud83d\udd0b|\ud83d\udd0c|\ud83d\udd0d|\ud83d\udd0e|\ud83d\udd0f|\ud83d\udd10|\ud83d\udd11|\ud83d\udd12|\ud83d\udd13|\ud83d\udd14|\ud83d\udd16|\ud83d\udd17|\ud83d\udd18|\ud83d\udd19|\ud83d\udd1a|\ud83d\udd1b|\ud83d\udd1c|\ud83d\udd1d|\ud83d\udd1e|\ud83d\udd1f|\ud83d\udd20|\ud83d\udd21|\ud83d\udd22|\ud83d\udd23|\ud83d\udd24|\ud83d\udd25|\ud83d\udd26|\ud83d\udd27|\ud83d\udd28|\ud83d\udd29|\ud83d\udd2a|\ud83d\udd2b|\ud83d\udd2e|\ud83d\udd2f|\ud83d\udd30|\ud83d\udd31|\ud83d\udd32|\ud83d\udd33|\ud83d\udd34|\ud83d\udd35|\ud83d\udd36|\ud83d\udd37|\ud83d\udd38|\ud83d\udd39|\ud83d\udd3a|\ud83d\udd3b|\ud83d\udd3c|\ud83d\udd3d|\ud83d\udd50|\ud83d\udd51|\ud83d\udd52|\ud83d\udd53|\ud83d\udd54|\ud83d\udd55|\ud83d\udd56|\ud83d\udd57|\ud83d\udd58|\ud83d\udd59|\ud83d\udd5a|\ud83d\udd5b|\ud83d\uddfb|\ud83d\uddfc|\ud83d\uddfd|\ud83d\uddfe|\ud83d\uddff|\ud83d\ude01|\ud83d\ude02|\ud83d\ude03|\ud83d\ude04|\ud83d\ude05|\ud83d\ude06|\ud83d\ude09|\ud83d\ude0a|\ud83d\ude0b|\ud83d\ude0c|\ud83d\ude0d|\ud83d\ude0f|\ud83d\ude12|\ud83d\ude13|\ud83d\ude14|\ud83d\ude16|\ud83d\ude18|\ud83d\ude1a|\ud83d\ude1c|\ud83d\ude1d|\ud83d\ude1e|\ud83d\ude20|\ud83d\ude21|\ud83d\ude22|\ud83d\ude23|\ud83d\ude24|\ud83d\ude25|\ud83d\ude28|\ud83d\ude29|\ud83d\ude2a|\ud83d\ude2b|\ud83d\ude2d|\ud83d\ude30|\ud83d\ude31|\ud83d\ude32|\ud83d\ude33|\ud83d\ude35|\ud83d\ude37|\ud83d\ude38|\ud83d\ude39|\ud83d\ude3a|\ud83d\ude3b|\ud83d\ude3c|\ud83d\ude3d|\ud83d\ude3e|\ud83d\ude3f|\ud83d\ude40|\ud83d\ude45|\ud83d\ude46|\ud83d\ude47|\ud83d\ude48|\ud83d\ude49|\ud83d\ude4a|\ud83d\ude4b|\ud83d\ude4c|\ud83d\ude4d|\ud83d\ude4e|\ud83d\ude4f|\ud83d\ude80|\ud83d\ude83|\ud83d\ude84|\ud83d\ude85|\ud83d\ude87|\ud83d\ude89|\ud83d\ude8c|\ud83d\ude8f|\ud83d\ude91|\ud83d\ude92|\ud83d\ude93|\ud83d\ude95|\ud83d\ude97|\ud83d\ude99|\ud83d\ude9a|\ud83d\udea2|\ud83d\udea4|\ud83d\udea5|\ud83d\udea7|\ud83d\udea8|\ud83d\udea9|\ud83d\udeaa|\ud83d\udeab|\ud83d\udeac|\ud83d\udead|\ud83d\udeb2|\ud83d\udeb6|\ud83d\udeb9|\ud83d\udeba|\ud83d\udebb|\ud83d\udebc|\ud83d\udebd|\ud83d\udebe|\ud83d\udec0|\ud83c\udde6|\ud83c\udde7|\ud83c\udde8|\ud83c\udde9|\ud83c\uddea|\ud83c\uddeb|\ud83c\uddec|\ud83c\udded|\ud83c\uddee|\ud83c\uddef|\ud83c\uddf0|\ud83c\uddf1|\ud83c\uddf2|\ud83c\uddf3|\ud83c\uddf4|\ud83c\uddf5|\ud83c\uddf6|\ud83c\uddf7|\ud83c\uddf8|\ud83c\uddf9|\ud83c\uddfa|\ud83c\uddfb|\ud83c\uddfc|\ud83c\uddfd|\ud83c\uddfe|\ud83c\uddff|\ud83c\udf0d|\ud83c\udf0e|\ud83c\udf10|\ud83c\udf12|\ud83c\udf16|\ud83c\udf17|\ue50a|\u27b0|\u2797|\u2796|\u2795|\u2755|\u2754|\u2753|\u274e|\u274c|\u2728|\u270b|\u270a|\u2705|\u26ce|\u23f3|\u23f0|\u23ec|\u23eb|\u23ea|\u23e9|\u27bf|\u00a9|\u00ae)|(?:(?:\ud83c\udc04|\ud83c\udd70|\ud83c\udd71|\ud83c\udd7e|\ud83c\udd7f|\ud83c\ude02|\ud83c\ude1a|\ud83c\ude2f|\ud83c\ude37|\u3299|\u303d|\u3030|\u2b55|\u2b50|\u2b1c|\u2b1b|\u2b07|\u2b06|\u2b05|\u2935|\u2934|\u27a1|\u2764|\u2757|\u2747|\u2744|\u2734|\u2733|\u2716|\u2714|\u2712|\u270f|\u270c|\u2709|\u2708|\u2702|\u26fd|\u26fa|\u26f5|\u26f3|\u26f2|\u26ea|\u26d4|\u26c5|\u26c4|\u26be|\u26bd|\u26ab|\u26aa|\u26a1|\u26a0|\u2693|\u267f|\u267b|\u3297|\u2666|\u2665|\u2663|\u2660|\u2653|\u2652|\u2651|\u2650|\u264f|\u264e|\u264d|\u264c|\u264b|\u264a|\u2649|\u2648|\u263a|\u261d|\u2615|\u2614|\u2611|\u260e|\u2601|\u2600|\u25fe|\u25fd|\u25fc|\u25fb|\u25c0|\u25b6|\u25ab|\u25aa|\u24c2|\u231b|\u231a|\u21aa|\u21a9|\u2199|\u2198|\u2197|\u2196|\u2195|\u2194|\u2139|\u2122|\u2049|\u203c|\u2668)([\uFE0E\uFE0F]?)))/g,
        y = /[&<>'"]/g, $ = /IFRAME|NOFRAMES|NOSCRIPT|SCRIPT|SELECT|STYLE|TEXTAREA|[a-z]/, b = String.fromCharCode;
    return h
}(), MISSEVAN_CDN_URL = "//static.missevan.com", index = {
    ERROR_CODE: {LOGIN_REQUIRED_CODE: 100010006}, mo: {
        mPath: MISSEVAN_CDN_URL + "/",
        iconPath: MISSEVAN_CDN_URL + "/icons/",
        soundPath: MISSEVAN_CDN_URL + "/sound/",
        soundTestPath: MISSEVAN_CDN_URL + "/soundtests/",
        tagPath: MISSEVAN_CDN_URL + "/tags/",
        imgPath: MISSEVAN_CDN_URL + "/images/",
        lazyLoadPath: MISSEVAN_CDN_URL + "/assets/images/index/lazy_load.png",
        coversPath: MISSEVAN_CDN_URL + "/covers/",
        coversMiniPath: MISSEVAN_CDN_URL + "/coversmini/",
        mImagesPath: MISSEVAN_CDN_URL + "/mimages/",
        mImagesMiniPath: MISSEVAN_CDN_URL + "/mimagesmini/",
        seiyPath: MISSEVAN_CDN_URL + "/seiys/",
        animationPath: MISSEVAN_CDN_URL + "/animations/",
        characterPath: MISSEVAN_CDN_URL + "/characters/",
        componentsPath: MISSEVAN_CDN_URL + "/components/",
        blankImg: "nocover.png",
        roomId: 0,
        roomCode: 0,
        maxLength: 200,
        lastId: 0,
        ajaxNum: 0,
        noAct: 0,
        members: [],
        chatLine: 0,
        pChatLine: 0,
        delLine: 0,
        sendFlag: 0,
        privateSendFlag: [],
        privateColors: "#ffffffm#ffffffm#ffffffm#ffffffm#ffffff",
        soundEffect: 1,
        bubbleType: 1,
        messageType: 1,
        bgType: 1,
        firstLoad: 0,
        serviceColors: "#ffffffm#ffffffm#ffffffm#ffffffm#ffffff",
        servicePicture: "icon00.png",
        serviceSpikeColor: "#ffffff",
        serviceCharColor: "#000000",
        serviceName: "黑化店长",
        defaultColors: "#91c0edm#cde1edm#709cc9m#5079c9m#709cc9",
        defaultIcon: MISSEVAN_CDN_URL + "/mimages/icon01.png",
        soundObj: [],
        tmr: -1,
        start: 0,
        soundDemo: void 0,
        dmImages: [],
        frontComponents: [],
        loadFlag: 0
    }, browser: {
        versions: function () {
            var e = navigator.userAgent;
            navigator.appVersion;
            return {
                trident: e.indexOf("Trident") > -1,
                presto: e.indexOf("Presto") > -1,
                webKit: e.indexOf("AppleWebKit") > -1,
                gecko: e.indexOf("Gecko") > -1 && e.indexOf("KHTML") == -1,
                mobile: !!e.match(/AppleWebKit.*Mobile.*/) || !!e.match(/AppleWebKit/),
                ios: !!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
                android: e.indexOf("Android") > -1,
                iPhone: e.indexOf("iPhone") > -1,
                iPad: e.indexOf("iPad") > -1,
                webApp: e.indexOf("Safari") == -1
            }
        }(), isMobile: function () {
            return index.browser.versions.android || index.browser.versions.iPhone || index.browser.versions.iPad
        }
    }, init: function () {
        moTool.createModalBox(), moTool.loadInputDefaultValue()
    }, showBt: function (e, t, o, a) {
        var n = parseInt(9 * Math.random() + 1) / 10;
        $(e).bt({
            showTip: function (t) {
                var o = $(".bt-content", t).hide(), a = $("canvas", t).hide(), n = a[0].width, i = a[0].height,
                    d = a[0].height, s = a[0].height - 70;
                d > 100 ? ($(e).css("padding-top", s / 2), $(e).css("margin-bottom", s / 4 * 1.4).fadeIn(200)) : ($(e).css("padding-top", 6), $(e).css("margin-bottom", 0).fadeIn(200)), $(t).show(), a.css({
                    width: .25 * n,
                    height: .25 * i,
                    left: .01 * n,
                    top: .3 * i,
                    opacity: .1
                }).show().animate({
                    width: n,
                    height: i,
                    left: 0,
                    top: 0,
                    opacity: 1
                }, 450, "easeOutBounce", function () {
                    o.show()
                })
            },
            hideTip: function (e, t) {
                var o = ($(".bt-content", e).hide(), $("canvas", e)), a = o[0].width, n = o[0].height;
                o.animate({width: .5 * a, height: .5 * n, left: .25 * a, top: .25 * n, opacity: 0}, 0, "swing", t)
            },
            position: ["right"],
            padding: 20,
            width: 600,
            shrinkToFit: !0,
            spikeLength: 22,
            spikeGirth: 12,
            centerPointY: n,
            cornerRadius: 15,
            fill: "rgba(255, 255, 255, .8)",
            strokeWidth: 4,
            strokeStyle: o,
            mowangsk_colors: t,
            addType: 1,
            shadow: !0,
            shadowOffsetX: 3,
            shadowOffsetY: 3,
            shadowBlur: 8,
            shadowColor: "rgba(0,0,0,.9)",
            cssStyles: {
                color: a,
                fontSize: 24,
                fontFamily: "Microsoft YaHei,Verdana",
                letterSpacing: 6,
                wordBreak: "break-all",
                wordWrap: "break-word"
            }
        }).btOn()
    }, ueditorLoad: {
        toolBar1: {
            toolbars: [["undo", "redo", "|", "bold", "italic", "underline", "strikethrough", "forecolor", "fontfamily", "fontsize", "|", "link", "unlink", "|", "insertimage", "emotion", "scrawl", "insertvideo", "music", "attachment", "map", "gmap", "webapp", "spechars", "drafts", "fullscreen"]],
            initialFrameWidth: 990,
            initialFrameHeight: 220
        },
        toolBar2: {
            toolbar: ["bold italic underline strikethrough | forecolor |", "fontfamily fontsize |", "emotion image", "| drafts"],
            initialFrameWidth: 600,
            initialFrameHeight: 250
        },
        toolBar3: {
            toolbar: ["bold italic underline strikethrough | forecolor |", "fontfamily fontsize |", "emotion image", "| drafts"],
            initialFrameWidth: 960,
            initialFrameHeight: 100
        },
        toolBar4: {
            toolbar: ["bold italic underline strikethrough | forecolor |fontfamily fontsize | emotion"],
            initialFrameWidth: 460,
            initialFrameHeight: 100
        },
        toolBar5: {toolbar: ["bold italic underline strikethrough"], initialFrameWidth: 540, initialFrameHeight: 100},
        toolBar6: {
            toolbar: ["bold italic underline strikethrough | forecolor |fontfamily fontsize | emotion"],
            initialFrameWidth: 600,
            initialFrameHeight: 120
        },
        loadReply: function () {
            var e = new UE.ui.Editor(index.ueditorLoad.toolBar1);
            e.render("boardreplywritearea")
        },
        loadBoard: function () {
            var e = new UE.ui.Editor(index.ueditorLoad.toolBar1);
            e.render("boardwritearea")
        },
        loadMsg: function () {
            UM.getEditor("msgwrite", index.ueditorLoad.toolBar2)
        },
        loadMsgReply: function () {
            UM.getEditor("msgreply", index.ueditorLoad.toolBar3)
        },
        loadNewsReply: function () {
            UM.getEditor("leftnewsreply", index.ueditorLoad.toolBar4)
        },
        loadAlbum: function () {
            UM.getEditor("MAlbum_intro", index.ueditorLoad.toolBar5)
        },
        loadUserintro: function () {
            UM.getEditor("UserIntroForm_userintro", index.ueditorLoad.toolBar5)
        },
        loadSound: function () {
            UM.getEditor("MSound_intro", index.ueditorLoad.toolBar5)
        },
        loadEvent: function () {
            UM.getEditor("MEvent_intro", index.ueditorLoad.toolBar1)
        },
        loadChannel: function () {
            UM.getEditor("MChannel_intro", index.ueditorLoad.toolBar5)
        }
    }, boxStrLoad: {
        loadSoundLikeStr: function (e) {
            var t = "", o = $("#slsound");
            e.sounds.length && $.each(e.sounds, function (e, o) {
                t = t + "<div class='slsound'><div class='slsoundimg'><a href='/sound/" + o.id + "'><img width='150px' height='150px' src='" + o.front_cover + "'/></a></div><div class='slsoundstr'><a href='/sound/" + o.id + "'>" + o.soundstr + "</a></div></div>"
            }), o.html(t).show()
        }, loadSoundSelectStr: function (e) {
            var t = "", o = $("#soundselectcontent");
            if (e.sr.length) {
                var a = $(".soundtypestr"), n = a.val();
                if (1 == n) var i = index.mo.characterPath; else if (2 == n) var i = index.mo.seiyPath; else if (3 == n) var i = index.mo.animationPath;
                $.each(e.sr, function (e, o) {
                    t = t + "<div data-id='" + o.id + "' class='soundselectcheck'><img width='100px' height='100px' src='" + i + o.icon + "' /><span class='soundselectcheckstr'>" + o.name + "</span></div>"
                })
            }
            o.html(t).show()
        }, loadUsernameId: function (e) {
            var t = "", o = $("#usernameidinfo");
            e.users.length && $.each(e.users, function (e, o) {
                t = t + "<div class='userinfocheck'>M号：" + o.id + " 称呼：" + o.username + " 小鱼干：" + o.point + "</div><div class='clear'></div>"
            }), o.html(t).show()
        }, loadMsgStr: function (e) {
            var t = "", o = $("#msgcontent");
            e.message.length && $.each(e.message, function (o, a) {
                t = t + "<div class='boardreplysubtitle'>" + a.time + "</div><div class='boardreplybody'><div class='boardarrow2' style='border-right-color:" + e.user[a.userid].iconcolor.split("m")[0] + ";'></div><div class='boardreplyicon'><div class='boardiconbox pie'><img src='" + e.user[a.userid].iconurl + "' width='70px' height='70px'></div><div class='boardusername'>" + e.user[a.userid].username + "</div></div><div class='boardreplyvalueout'><div class='boardreplyvalue pie' style='background-color:" + e.user[a.userid].iconcolor.split("m")[0] + "'>" + ("" == a.message ? "　" : a.message) + "</div></div></div><div class='clear'></div>"
            }), o.html(t).show()
        }
    }, boxLoad: {
        loadSoundSelect: function () {
            var e = $(".soundselectcheck"), t = $(".soundtypestr"), o = $("#soundcharacterselect"),
                a = $("#soundseiyselect"), n = $("#soundanimationselect"), i = $(".soundtypebtn");
            e.click(function () {
                var e = t.val();
                1 == e ? (o.find("input").val($(this).data("id")), o.find(".soundselect").html($(this).find(".soundselectcheckstr").html()), i.val($(this).find(".soundselectcheckstr").html())) : 2 == e ? (a.find("input").val($(this).data("id")), a.find(".soundselect").html($(this).find(".soundselectcheckstr").html()), i.val($(this).find(".soundselectcheckstr").html())) : 3 == e && (n.find("input").val($(this).data("id")), n.find(".soundselect").html($(this).find(".soundselectcheckstr").html()), i.val($(this).find(".soundselectcheckstr").html()))
            })
        }
    }, js: {
        initSentry: function (e) {
            Raven.config("https://ef897521db204e3eae7324e9b64c8924@sentry.missevan.com/2", $.extend(e || {}, window.ravenConfig)).install(), $(document).ajaxError(function (e, t, o, a) {
                "abort" !== t.statusText && Raven.captureMessage(a || t.statusText, {
                    extra: {
                        type: o.type,
                        url: o.url,
                        data: o.data,
                        status: t.status,
                        error: a || t.statusText,
                        response: t.responseText ? t.responseText.substring(0, 100) : ""
                    }
                })
            })
        }, eventPlaySound: function (e) {
            void 0 == index.mo.soundObj[e] ? (index.mo.soundObj[e] = soundManager.createSound({
                id: e,
                url: index.mo.mPath + e
            }), index.mo.soundObj[e].play()) : (index.mo.soundObj[e].stop(), index.mo.soundObj[e].play())
        }, eventPlay: function () {
            $(".play-event-sound-btn").click(function () {
                var e = $(this).parent().parent().parent().data("soundurl"), t = $(this), o = index.mo.mPath;
                soundManager.onready(function () {
                    void 0 == index.mo.soundObj[e] ? (index.mo.soundObj[e] = soundManager.createSound({
                        id: e, url: o + e, onload: function () {
                            t.removeClass("play-event-sound-btn-loading"), t.addClass("play-event-sound-btn-loaded"), t.addClass("play-event-sound-btn-play"), t.parent().addClass("play-event-sound-play");
                            var e = t.parents(".soundeventsound").find(".soundevent-likes-div").data("soundid");
                            moTool.postAjax({
                                url: "/sound/addplaytimes?sound_id=" + e, callBack: function (e) {
                                }, showLoad: !1, showError: !1
                            })
                        }, onpause: function () {
                            t.removeClass("play-event-sound-btn-play"), t.parent().removeClass("play-event-sound-play"), t.addClass("play-event-sound-btn-pause")
                        }, onresume: function () {
                            t.removeClass("play-event-sound-btn-pause"), t.addClass("play-event-sound-btn-play"), t.parent().addClass("play-event-sound-play")
                        }, onplay: function () {
                            t.removeClass("play-event-sound-btn-pause"), t.addClass("play-event-sound-btn-play"), t.parent().addClass("play-event-sound-play")
                        }, onfinish: function () {
                            t.removeClass("play-event-sound-btn-play"), t.parent().removeClass("play-event-sound-play"), t.addClass("play-event-sound-btn-pause")
                        }, whileplaying: function () {
                            t.parent().find(".soundevent-soundtime").html("时间：" + play.soundBox.getTime(this.position) + " / " + t.parent().find(".soundevent-soundtime").data("time"))
                        }, whileloading: function () {
                            t.addClass("play-event-sound-btn-loading")
                        }
                    }), index.mo.soundObj[e].play()) : index.mo.soundObj[e].togglePause()
                })
            }), $(".soundeventcover").hover(function () {
                $(this).find(".play-event-sound").addClass("play-event-sound-hover")
            }, function () {
                $(this).find(".play-event-sound").removeClass("play-event-sound-hover")
            }), $(".soundevent-likes").click(function () {
                var e = parseInt($(this).parent().data("soundid")), t = $(this), o = t.hasClass("mpczg") ? 0 : 1;
                moTool.postAjax({
                    url: "/person/ChangeSoundStatus",
                    value: {soundid: e, like: o},
                    callBack: function (e) {
                        e.success ? o ? (t.parent().find(".mpcrnum span").html(e.info.uptimes), t.addClass("mpczg").removeClass("mpcz").html("已投票")) : (t.parent().find(".mpcrnum span").html(e.info.uptimes), t.removeClass("mpczg").addClass("mpcz").html("投票")) : moTool.showError(e.info)
                    },
                    showLoad: !1
                })
            })
        }, loadChatDm: function () {
            index.strBox.loadChatDmXml(), window.cm = new CommentManager(document.getElementById("commentCanvas")), index.strBox.indexUserDm(), index.strBox.startUserDm()
        }, loadReport: function (e, t) {
            $("#reportmodalinner").show(), $(".report_success").hide(), $("#report_confirm").data("sourceid", e), $("#report_confirm").data("type", t), $("#reportmodal").show(), $("#reportmodal button.close").unbind("click").click(function () {
                $("#reportmodal").hide(), $('#reportmodal input[name="reason"]:checked').attr("checked", !1), $("#reportmodal .report_content").val("")
            })
        }, videoReport: function () {
            $(".video-report").click(function () {
                index.js.loadReport($(this).parent().parent().parent().parent().data("id"), $(this).data("type"))
            })
        }, imageReport: function () {
            $(".image-report").click(function () {
                index.js.loadReport($(this).parent().parent().parent().parent().data("id"), $(this).data("type"))
            })
        }, commitReport: function () {
            $("#report_confirm").click(function () {
                var e = $('input[name="reason"]:checked').val(), t = $("#report_confirm").data("sourceid"),
                    o = $("#report_confirm").data("type"), a = $(".report_content").val();
                return void 0 == e ? (R.components.toggleToast("请选择举报原因"), !1) : void $.ajax({
                    type: "POST",
                    url: "/mreport/commit",
                    data: {reasonid: e, sourceid: t, type: o, report_content: a},
                    dataType: "json",
                    success: function (e) {
                        "success" === e || e.success ? ($("#reportmodalinner").hide(), $(".report_success span").html("举报提交成功，我们会尽快处理"), $(".report_success").show()) : 100010006 === e.code ? $("#reportmodal").hide() : ($("#reportmodalinner").hide(), $(".report_success span").html(e.info || e), $(".report_success").show())
                    },
                    error: function () {
                    }
                })
            })
        }, masterControlMimage: function () {
            $(".a-ma-mimage-zc").hover(function () {
                $(".mask1").show(), $(".mask2").hide()
            }, function () {
                $(".mask1").hide()
            }), $(".mask1 .t").click(function () {
                $(".mask1").hide(), $(".mask2").show(), index.mo.soundDemo.pause()
            })
        }, bindConfirm: function () {
            $(".confirminfohint").click(function () {
                $(".web-sound-image-time").appendTo($("body")), $(".web-sound-image-time").hide();
                var e = index.js.startAlbum(),
                    t = $(this).parent().parent().parent().parent().parent().parent().data("imageid"),
                    o = $("#mpi").data("soundid"), a = {start_time: parseInt(e), image_id: t, sound_id: o};
                moTool.postAjax({
                    url: "/mimage/bindsound", value: a, callBack: function (e) {
                        index.strBox.endAlbum()
                    }, showLoad: !1, success: !1
                })
            })
        }, masterControlMimage: function () {
            $(".a-ma-mimage-zc").hover(function () {
                $(this).find(".imageinfo").show(), $(".mask1").show(), $(".mask2").hide();
                var e = $(this).find("img").attr("src"), t = $(this).find("img").attr("title");
                $("#dmd").show(), $("#dmd>img").attr("src", e), $("#dmd>span").text(t)
            }, function () {
                $(this).find(".imageinfo").hide(), $(".mask1").hide(), $("#dmd").hide()
            }), $(".mask1 .t").click(function () {
                $(".mask1").hide(), $(".mask2").show(), index.mo.soundDemo.pause()
            })
        }, loadLeftIcon: function () {
            var e = $(".l_i_b, .s_m_h_r_b");
            e.hover(function () {
                soundManager.pauseAll(), play.soundBox.playSound($(this).data("soundurl"), $(this), index.mo.mPath)
            }, function () {
                soundManager.pauseAll(), $(this).removeClass("lefticonboxhover")
            })
        }, loadExamSound: function () {
            var e = $(".examsound");
            e.hover(function () {
                soundManager.pauseAll(), play.soundBox.playSound($(this).data("soundurl"), $(this), index.mo.soundPath)
            }, function () {
                soundManager.pauseAll()
            })
        }, loadLeftM: function () {
            var e = $("#mr"), t = $("#ml");
            e.hover(function () {
                e.animate({right: "0px"}, 200, function () {
                    t.animate({left: "-109px"}, 500, function () {
                        play.soundBox.playChatStr("201202/22/d070d38f0876965ec88d126f4dc8d119.mp3")
                    })
                })
            }, function () {
            }), t.hover(function () {
                t.animate({left: "0px"}, 200, function () {
                    e.animate({right: "-109px"}, 500, function () {
                        play.soundBox.playChatStr("201202/22/d070d38f0876965ec88d126f4dc8d119.mp3")
                    })
                })
            }, function () {
            })
        }, startAlbum: function () {
            return void 0 == index.mo.soundDemo ? (moTool.showError("必须开始播放后才能插图"), !1) : 0 == index.mo.soundDemo.playState ? (moTool.showError("必须在播放结束前插图"), !1) : (index.mo.soundDemo.paused || index.mo.soundDemo.pause(), index.mo.soundDemo.position)
        }, clickalbumRefresh: function () {
            $(".a-ma-e").unbind("click"), $(".a-ma-e").bind("click", function () {
                $(this).addClass("a-ma-e-active"), $(this).siblings().removeClass("a-ma-e-active")
            }), $(".refresh-album").click(function () {
                moTool.postAjax({
                    url: "/malbum/getalbums", callBack: function (e) {
                        $("#newstylealbum").html(e), index.js.clickalbumRefresh()
                    }, showLoad: !1, json: !1
                })
            })
        }, usercomponent: function () {
            $(".mpcs").click(function () {
                favFrame.inited || favFrame.init(), favFrame.bindSound($(this).attr("data-soundid")), favFrame.show()
            }), $("#cna").toggle(function () {
                $(this).text("选择已有音单")
            }, function () {
                $(this).text("收藏到新音单")
            }), $("#cna").click(function () {
                $(".a-ma-e").siblings().removeClass("a-ma-e-active"), $("#yoursnewalbuminput").val("").blur(), $("#yoursnewalbumtextarea").val("").blur(), $("#a-ma-yoursalbums").toggle(), $("#a-ma-yoursnewalbum").toggle()
            }), $("#addalbum").click(function () {
                $soundid = $("#newstylealbum").data("soundid"), $albumid = $(".a-ma-e-active:eq(0)").data("albumid"), $title = $("#yoursnewalbuminput").val(), $intro = $("#yoursnewalbumtextarea").val(), null != $albumid ? moTool.postAjax({
                    url: "/person/addSoundToAlbum",
                    value: {soundid: $soundid, albumid: $albumid},
                    callBack: function (e) {
                        $soundcount = $("div[data-albumid=" + $albumid + "]").find(".soundcount"), num = parseInt($soundcount.text()) + 1, $soundcount.text(num)
                    },
                    success: !0
                }) : "" != $title ? moTool.postAjax({
                    url: "/person/addSoundInNewAlbum",
                    value: {soundid: $soundid, title: $title, intro: $intro},
                    callBack: function (e) {
                        $("#a-ma-yoursalbums").append('<div class="a-ma-e d-k-l" data-albumid = "' + e.albumid + '"><div class="d-k-l"><div class="a-ma-e-zc d-k-l"><img src="http://static.missevan.com/mimagesmini/nocover.png" class="a-ma-e-cb d-k-l"></div><div class="d-k-l a-ma-e-nN"><div class="a-ma-e-kb d-k-l" title="' + $title + '" style="-webkit-user-select: none;">' + $title + '</div><div class="a-ma-msound d-k-l"><span class="soundcount">1</span>个声音</div></div></div></div>'), $(".a-ma-e").unbind("click"), $(".a-ma-e").bind("click", function () {
                            $(this).addClass("a-ma-e-active"), $(this).siblings().removeClass("a-ma-e-active")
                        })
                    },
                    success: !0
                }) : alert("新专集的标题不可为空。"), $("#a-ma-yoursalbums").show(), $("#a-ma-yoursnewalbum").hide()
            })
        }, loadTask: function () {
            var e = $("#profilego"), t = $("#newsprofilego"), o = $("#sharego"), a = $("#feedgo"),
                n = $("#rcprofilego");
            e.click(function () {
                $.ajax({
                    url: "/member/getcatears?gtype=1", dataType: "json", success: function (t) {
                        if (t.success) {
                            var o = ["02", "23", "14", "09"], a = o[t.info.type],
                                n = t.info.message.replace("小鱼干 x", '<i class="sticker-fish"></i><i class="sticker-multi"></i>'),
                                i = '<div id="sticker-modal"><div class="sticker-modal-content"><div class="sticker-content"><img class="sticker" src="//static.missevan.com/system/emotions/mm' + a + '.png" /></div><div class="sticker-message">' + n + '</div><span class="sticker-modal-cancel"></span></div></div>';
                            $("body").append(i), $("#sticker-modal").click(function (e) {
                                "sticker-modal" !== e.target.id && "sticker-modal-cancel" !== e.target.className || $("#sticker-modal").remove()
                            }), e.prev().html("小鱼干已领取~!"), e.html("已领取"), e.parent().find("span").html("1/1"), e.parent().find("b").width("100%")
                        } else moTool.showError(t.info)
                    }
                })
            }), t.click(function () {
                moTool.getAjax({
                    url: "/member/getcatears?gtype=2", callBack: function (e) {
                        e.success ? (moTool.showSuccess(e.info.message), t.prev().html("小鱼干已领取~!"), t.html("已领取"), t.parent().find("span").html("3/3"), t.parent().find("b").width("100%")) : moTool.showError(e.info)
                    }, showLoad: !0
                })
            }), o.click(function () {
                moTool.getAjax({
                    url: "/member/getsharetasks" + window.location.search, callBack: function (e) {
                        e.success && (o.prev().html("任务已完成!"), o.html("已完成"), o.parent().find("span").html("1/1"), o.parent().find("b").width("100%"))
                    }, showLoad: !0, success: !0
                })
            }), a.click(function () {
                moTool.getAjax({
                    url: "/member/getcatears?gtype=4", callBack: function (e) {
                        e.success ? (moTool.showSuccess(e.info.message), a.prev().html("小鱼干已领取~!"), a.html("已领取"), a.parent().find("span").html("3/3"), a.parent().find("b").width("100%")) : moTool.showError(e.info)
                    }, showLoad: !0
                })
            }), n.click(function () {
                moTool.getAjax({
                    url: "/member/getrctask" + window.location.search, callBack: function (e) {
                    }, showLoad: !0, success: !0
                })
            })
        }, loadUnreadMsg: function () {
            var e = "/mperson/getUnreadMessageNumber";
            $.post(e, function (e) {
                if (e.success && e.info && e.info.not_read) {
                    var t = e.info.not_read, o = $(".menu-msg-reminder");
                    $(".user-menu .reminder").css("display", "inline-block"), o.data("count", t), $(document).trigger("unreadmessage", {
                        comment: Boolean(e.info.comment),
                        message: Boolean(e.info.msg),
                        sysmsg: Boolean(e.info.sys),
                        like: Boolean(e.info.like),
                        at: Boolean(e.info.at)
                    }), t >= 100 ? (o.text("99"), $(".person-menu").css("width", 150)) : (o.text(t), $(".person-menu").css("width", 140)), o.show()
                }
            }, "json"), $(".messages").click(function () {
                $(this).parents(".user-menu").find(".reminder").remove(), $(this).find(".menu-msg-reminder").remove()
            }), $(".opt-news").click(function () {
                $(this).find(".message-reminder").remove()
            }), $("li.opt-news").mouseenter(function () {
                $(".news-pop").stop(!0, !0).fadeIn(), $("#news").children().length || R.components.Header.init(1, "news")
            }).mouseleave(function () {
                $(".news-pop").stop(!0, !0).fadeOut(100)
            }), $("li.history").mouseenter(function () {
                $(".history-pop").stop(!0, !0).fadeIn(), $("#history").children().length || R.components.Header.init(0, "history")
            }).mouseleave(function () {
                $(".history-pop").stop(!0, !0).fadeOut(100)
            }), $(".user-menu").mouseenter(function () {
                $(".person-menu").css({left: -(65 - $(this).width() / 2) + "px"}), $(".person-menu").stop(!0, !0).fadeIn()
            }).mouseleave(function () {
                $(".person-menu").stop(!0, !0).fadeOut(100)
            }), $(".upload").mouseenter(function () {
                var e = $(".upload-pop");
                e.stop(!0, !0), "block" !== e.attr("display") && e.stop(!0, !0).fadeIn()
            }).mouseleave(function () {
                var e = $(".upload-pop");
                e.stop(!0, !0), e.hasClass("pop-loading") || e.fadeOut(100)
            }), $(".upload-pop .person-center").click(function () {
                $(".upload-pop").addClass("pop-loading"), $(".upload-pop .person-center").addClass("btn-loading"), R.components.ShowPersonEntranceModal(function () {
                    $(".upload-pop").removeClass("pop-loading").fadeOut(100), $(".upload-pop .person-center").removeClass("btn-loading")
                })
            })
        }, loadMsg: function () {
            var e = $(".msg"), t = $("#msgboxcontent"), o = $("#msgreplyid");
            e.hover(function () {
                $(this).addClass("msghover")
            }, function () {
                $(this).removeClass("msghover")
            }).click(function () {
                $(this).find(".msgtitle").removeClass("unread");
                var e = $(this).data("id");
                o.val(e), moTool.getAjax({
                    url: "/member/getmsg" + window.location.search + "&msgid=" + e,
                    callBack: function (e) {
                        var e = e.successVal;
                        index.boxStrLoad.loadMsgStr(e), moTool.showModalBox(t, {showBackground: !1})
                    },
                    showLoad: !0
                })
            })
        }, loadLogo: function () {
            swfobject.embedSWF("/flash/miao.swf", "logo", "84", "90", "9", "#ffffff", null, {wmode: "transparent"})
        }, loadTopTab: function () {
            var e = $(".boardrank");
            e.click(function () {
                $(".b-p").hide(), $(".boardranktop").hide(), $(".br-c").removeClass("br-c-h"), $(".br-c").find("img").hide(), $(this).find(".boardranktop").show(), $(this).find(".br-c").addClass("br-c-h"), $(this).find(".br-c").find("img").show(), $("#b-p-" + $(this).data("f")).show()
            })
        }, loadSoundMoveBox: function (e) {
            function t() {
                n = setInterval(function () {
                    i != o.length - 1 ? i++ : i = 0, o.eq(i).click()
                }, 1e4)
            }

            var o = $(e + " .fc-slidebtn"), a = $(e + " .fc-slideimage"), n = !1, i = 0, d = 1e3;
            $(e + " .fc-slideimage a");
            o.click(function () {
                i = $(this).index(), o.removeClass("fc-slidebtn-active"), $(this).addClass("fc-slidebtn-active"), a.fadeOut(d), a.eq(i).fadeIn(d), n && (clearInterval(n), t())
            }), t()
        }, loadEventMoveBox: function () {
            function e() {
                a = setInterval(function () {
                    n != t.length - 1 ? n++ : n = 0, $(".e_m_h_p_b").eq(n).click()
                }, 1e4)
            }

            var t = $(".e_m_h_p_b"), o = $(".e_m_h_l_c"), a = !1, n = 0, i = 1e3;
            $(".e_m_h_l_c a");
            t.click(function () {
                n = $(this).index(), t.removeClass("e_m_h_p_b_h"), $(this).addClass("e_m_h_p_b_h"), o.fadeOut(i), o.eq(n).fadeIn(i), a && (clearInterval(a), e())
            }), e()
        }, showhideMenu: function () {
            $(".web-sound-m .menu .menu-image").click(function () {
                $(this).hasClass("active") ? ($(".web-sound-m .menu-panel").hide(), $(this).removeClass("active")) : ($(".web-sound-m .menu-panel").show(), $(this).addClass("active"))
            })
        }, loadIndexTab: function () {
            var e = $(".s_m_t_r_b"), t = $(".s_h_m_h_i");
            e.click(function () {
                1 != $(this).parent().find(".s_m_t_r_b").length && ($(this).parent().find(".s_m_t_r_b").removeClass("active"), $(this).addClass("active"), $(this).parent().parent().parent().find(".s_h_x").hide(), $(this).parent().parent().parent().find(".s_h_x").eq($(this).parent().find(".s_m_t_r_b").index(this)).show())
            }), t.hover(function () {
            })
        }, loadDepotTab: function () {
            var e = $(".fc-depotlist");
            e.click(function () {
                1 != $(this).parent().find(".fc-depotlist").length && ($(this).parent().find(".fc-depotlist").removeClass("fc-depotlist-active"), $(this).addClass("fc-depotlist-active"), $(this).parent().parent().parent().find(".fc-depotlist-content").hide(), $(this).parent().parent().parent().find(".fc-depotlist-content").eq($(this).parent().find(".fc-depotlist").index(this)).show())
            })
        }, loadIconTab: function () {
            var e = $(".tab-nav");
            e.click(function () {
                1 != $(this).parent().find(".tab-nav").length && ($(this).parent().find(".tab-nav").removeClass("active"), $(this).addClass("active"), $(this).parent().parent().parent().find(".indexiconlist").hide(), $(this).parent().parent().parent().find(".indexiconlist").eq($(this).parent().find(".tab-nav").index(this)).show())
            })
        }, loadErrorStr: function () {
            $errorStrId = $("#errorstr"), "" != $errorStrId.html() && moTool.showError($errorStrId.html())
        }, loadUsernameId: function () {
            var e = $("#profilego"), t = $("#usernameid");
            e.click(function () {
                moTool.postAjax({
                    url: "/member/getuserinfo", value: {usernameid: t.val()}, callBack: function (e) {
                        index.boxStrLoad.loadUsernameId(e.successVal), moTool.showModalBox($("#usernameidcontent"))
                    }, showLoad: !1
                })
            })
        }, drplaysound: function (e) {
            $(".dr-play-sound-btn").click(function () {
                var e = $(this).data("soundurl");
                if (e) {
                    var t = $(this), o = index.mo.soundPath;
                    soundManager.onready(function () {
                        void 0 == index.mo.soundObj[e] ? (index.mo.soundObj[e] = soundManager.createSound({
                            id: e,
                            url: o + e,
                            onload: function () {
                                t.removeClass("dr-play-sound-btn-loading"), t.addClass("dr-play-sound-btn-loaded"), t.addClass("dr-play-sound-btn-play"), t.parent().addClass("dr-play-sound-play")
                            },
                            onpause: function () {
                                t.removeClass("dr-play-sound-btn-play"), t.parent().removeClass("dr-play-sound-play"), t.addClass("dr-play-sound-btn-pause")
                            },
                            onresume: function () {
                                t.removeClass("dr-play-sound-btn-pause"), t.addClass("dr-play-sound-btn-play"), t.parent().addClass("dr-play-sound-play")
                            },
                            onplay: function () {
                                t.removeClass("dr-play-sound-btn-pause"), t.addClass("dr-play-sound-btn-play"), t.parent().addClass("dr-play-sound-play")
                            },
                            onfinish: function () {
                                t.removeClass("dr-play-sound-btn-play"), t.parent().removeClass("dr-play-sound-play"), t.addClass("dr-play-sound-btn-pause")
                            },
                            whileplaying: function () {
                                t.parent().find(".dr-play-soundtime").html("时间：" + play.soundBox.getTime(this.position) + " / " + t.parent().find(".dr-play-soundtime").data("time"))
                            },
                            whileloading: function () {
                                t.addClass("dr-play-sound-btn-loading")
                            }
                        }), index.mo.soundObj[e].play()) : index.mo.soundObj[e].togglePause()
                    })
                }
            }), $(".drplaybottom").hover(function () {
                $(this).find(".dr-play-sound").addClass("dr-play-sound-hover")
            }, function () {
                $(this).find(".dr-play-sound").removeClass("dr-play-sound-hover")
            })
        }, loadSoundIndex: function () {
            var e = $("#soundinfo"), t = $(".sound"), o = $(".soundplay"), a = $(".sounddown"), n = $(".soundcollect");
            t.hover(function () {
                $(this).addClass("soundouthover")
            }, function () {
                $(this).removeClass("soundouthover")
            }), e.parent().click(function () {
                void 0 != e.data("soundids") && ("" == e.data("oristr") ? (e.data("oristr", e.html()), soundManager.onready(function () {
                    var t = e.data("soundids").split(",");
                    play.soundBox.playIconSound($(".headsound" + t[0]))
                })) : (e.html(e.data("oristr")), e.data("oristr", ""), e.css("margin-left", "0px"), clearTimeout(index.mo.soundObj.timeout)))
            }), t.hover(function () {
                $(this).addClass("soundhover")
            }, function () {
                $(this).removeClass("soundhover")
            }), o.click(function (e) {
                e.stopPropagation(), play.soundBox.playAdminSound($(this).parent().data("soundurl"), $(this), index.mo.soundPath)
            }), a.click(function () {
                var e = $(this).parent().data("id");
                moTool.getAjax({
                    url: "/sound/down?soundid=" + e, callBack: function (e) {
                    }, showLoad: !0, success: !0
                })
            }), n.click(function () {
                var e = $(this).parent().data("id");
                moTool.getAjax({
                    url: "/sound/collect?soundid=" + e, callBack: function (e) {
                    }, showLoad: !0, success: !0
                })
            })
        }
    }, strBox: {
        loadChatDmXml: function () {
            $.ajax({
                type: "GET", url: "/sound/getchatdm", dataType: "XML", cache: !1, async: !0, success: function (e) {
                    "string" == typeof e ? (xml = new ActiveXObject("Microsoft.XMLDOM"), xml.async = !1, xml.loadXML(e)) : xml = e, cm.load(BilibiliParser(xml, e))
                }, error: function (e, t, o) {
                }
            })
        }, endAlbum: function () {
            $.each(index.mo.dmImages, function (e, t) {
                $("#imageCanvas").html(""), $(".mpf").remove(), index.mo.soundDemo.clearOnPosition(t[1])
            }), play.strBox.loadDmImages(index.mo.soundDemo)
        }, initDm: function () {
            cm.init(), cm.clear();
            try {
                clearTimeout(index.mo.tmr)
            } catch (e) {
            }
        }, indexUserDm: function () {
            cm.options.scroll.scale = 4, cm.init(), cm.clear();
            try {
                clearTimeout(index.mo.tmr)
            } catch (e) {
            }
        }, startUserDm: function () {
            cm.startTimer(), start = (new Date).getTime(), tmr = setInterval(function () {
                playhead = (new Date).getTime() - start, cm.time(playhead)
            }, 42)
        }, startDm: function () {
            cm.startTimer(), index.mo.tmr = setInterval(function () {
                index.mo.soundDemo && cm.time(index.mo.soundDemo.position)
            }, 42)
        }, stopDm: function () {
            cm.stopTimer(), clearInterval(index.mo.tmr), index.mo.tmr = -1
        }, resetDm: function () {
            cm.clear()
        }, pauseDm: function () {
            cm.stopTimer(), clearInterval(index.mo.tmr), index.mo.tmr = -1
        }, resumeDm: function () {
            index.mo.tmr === -1 && (cm.startTimer(), index.mo.tmr = setInterval(function () {
                index.mo.soundDemo && cm.time(index.mo.soundDemo.position)
            }, 42))
        }, clickMimage: function () {
            $(".a-ma-mimage").click(function () {
                $(this).addClass("a-ma-mimage-active"), $(this).siblings().removeClass("a-ma-mimage-active"), $("#imagemodalinner").data("image_id", $(this).data("imageid"))
            })
        }, bindConfirm: function () {
            $("#bind_confirm").click(function () {
                var e = $("#imagemodalinner").data("start_time"), t = $("#imagemodalinner").data("image_id"),
                    o = $("#mpi").data("soundid"), a = {start_time: parseInt(e), image_id: t, sound_id: o};
                moTool.postAjax({
                    url: "/mimage/bindsound", value: a, callBack: function (e) {
                        index.strBox.endAlbum()
                    }, showLoad: !1, success: !0
                })
            })
        }
    }
};
$(document).ready(function () {
    index.init(), $(".s_n_m").hover(function () {
        $(this).find(".s_n_m_s").show()
    }, function () {
        $(this).find(".s_n_m_s").hide()
    }), $(".fc-topcatalog-item").hover(function () {
        $(this).find(".fc-topcatalog-subitem-container").show(), $(this).addClass("fc-topcatalog-item-active")
    }, function () {
        $(this).find(".fc-topcatalog-subitem-container").hide(), $(this).removeClass("fc-topcatalog-item-active")
    }), $(document).ajaxComplete(function (e, t) {
        t.responseJSON && !t.responseJSON.success && parseInt(t.responseJSON.code) === index.ERROR_CODE.LOGIN_REQUIRED_CODE && R.utils.toggleLoginModal()
    })
}), jQuery.easing.jswing = jQuery.easing.swing, jQuery.extend(jQuery.easing, {
    def: "easeOutQuad", swing: function (e, t, o, a, n) {
        return jQuery.easing[jQuery.easing.def](e, t, o, a, n)
    }, easeInQuad: function (e, t, o, a, n) {
        return a * (t /= n) * t + o
    }, easeOutQuad: function (e, t, o, a, n) {
        return -a * (t /= n) * (t - 2) + o
    }, easeInOutQuad: function (e, t, o, a, n) {
        return (t /= n / 2) < 1 ? a / 2 * t * t + o : -a / 2 * (--t * (t - 2) - 1) + o
    }, easeInCubic: function (e, t, o, a, n) {
        return a * (t /= n) * t * t + o
    }, easeOutCubic: function (e, t, o, a, n) {
        return a * ((t = t / n - 1) * t * t + 1) + o
    }, easeInOutCubic: function (e, t, o, a, n) {
        return (t /= n / 2) < 1 ? a / 2 * t * t * t + o : a / 2 * ((t -= 2) * t * t + 2) + o
    }, easeInQuart: function (e, t, o, a, n) {
        return a * (t /= n) * t * t * t + o
    }, easeOutQuart: function (e, t, o, a, n) {
        return -a * ((t = t / n - 1) * t * t * t - 1) + o
    }, easeInOutQuart: function (e, t, o, a, n) {
        return (t /= n / 2) < 1 ? a / 2 * t * t * t * t + o : -a / 2 * ((t -= 2) * t * t * t - 2) + o
    }, easeInQuint: function (e, t, o, a, n) {
        return a * (t /= n) * t * t * t * t + o
    }, easeOutQuint: function (e, t, o, a, n) {
        return a * ((t = t / n - 1) * t * t * t * t + 1) + o
    }, easeInOutQuint: function (e, t, o, a, n) {
        return (t /= n / 2) < 1 ? a / 2 * t * t * t * t * t + o : a / 2 * ((t -= 2) * t * t * t * t + 2) + o
    }, easeInSine: function (e, t, o, a, n) {
        return -a * Math.cos(t / n * (Math.PI / 2)) + a + o
    }, easeOutSine: function (e, t, o, a, n) {
        return a * Math.sin(t / n * (Math.PI / 2)) + o
    }, easeInOutSine: function (e, t, o, a, n) {
        return -a / 2 * (Math.cos(Math.PI * t / n) - 1) + o
    }, easeInExpo: function (e, t, o, a, n) {
        return 0 == t ? o : a * Math.pow(2, 10 * (t / n - 1)) + o
    }, easeOutExpo: function (e, t, o, a, n) {
        return t == n ? o + a : a * (-Math.pow(2, -10 * t / n) + 1) + o
    }, easeInOutExpo: function (e, t, o, a, n) {
        return 0 == t ? o : t == n ? o + a : (t /= n / 2) < 1 ? a / 2 * Math.pow(2, 10 * (t - 1)) + o : a / 2 * (-Math.pow(2, -10 * --t) + 2) + o
    }, easeInCirc: function (e, t, o, a, n) {
        return -a * (Math.sqrt(1 - (t /= n) * t) - 1) + o
    }, easeOutCirc: function (e, t, o, a, n) {
        return a * Math.sqrt(1 - (t = t / n - 1) * t) + o
    }, easeInOutCirc: function (e, t, o, a, n) {
        return (t /= n / 2) < 1 ? -a / 2 * (Math.sqrt(1 - t * t) - 1) + o : a / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + o
    }, easeInElastic: function (e, t, o, a, n) {
        var i = 1.70158, d = 0, s = a;
        if (0 == t) return o;
        if (1 == (t /= n)) return o + a;
        if (d || (d = .3 * n), s < Math.abs(a)) {
            s = a;
            var i = d / 4
        } else var i = d / (2 * Math.PI) * Math.asin(a / s);
        return -(s * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * n - i) * (2 * Math.PI) / d)) + o
    }, easeOutElastic: function (e, t, o, a, n) {
        var i = 1.70158, d = 0, s = a;
        if (0 == t) return o;
        if (1 == (t /= n)) return o + a;
        if (d || (d = .3 * n), s < Math.abs(a)) {
            s = a;
            var i = d / 4
        } else var i = d / (2 * Math.PI) * Math.asin(a / s);
        return s * Math.pow(2, -10 * t) * Math.sin((t * n - i) * (2 * Math.PI) / d) + a + o
    }, easeInOutElastic: function (e, t, o, a, n) {
        var i = 1.70158, d = 0, s = a;
        if (0 == t) return o;
        if (2 == (t /= n / 2)) return o + a;
        if (d || (d = n * (.3 * 1.5)), s < Math.abs(a)) {
            s = a;
            var i = d / 4
        } else var i = d / (2 * Math.PI) * Math.asin(a / s);
        return t < 1 ? -.5 * (s * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * n - i) * (2 * Math.PI) / d)) + o : s * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * n - i) * (2 * Math.PI) / d) * .5 + a + o
    }, easeInBack: function (e, t, o, a, n, i) {
        return void 0 == i && (i = 1.70158), a * (t /= n) * t * ((i + 1) * t - i) + o
    }, easeOutBack: function (e, t, o, a, n, i) {
        return void 0 == i && (i = 1.70158), a * ((t = t / n - 1) * t * ((i + 1) * t + i) + 1) + o
    }, easeInOutBack: function (e, t, o, a, n, i) {
        return void 0 == i && (i = 1.70158), (t /= n / 2) < 1 ? a / 2 * (t * t * (((i *= 1.525) + 1) * t - i)) + o : a / 2 * ((t -= 2) * t * (((i *= 1.525) + 1) * t + i) + 2) + o
    }, easeInBounce: function (e, t, o, a, n) {
        return a - jQuery.easing.easeOutBounce(e, n - t, 0, a, n) + o
    }, easeOutBounce: function (e, t, o, a, n) {
        return (t /= n) < 1 / 2.75 ? a * (7.5625 * t * t) + o : t < 2 / 2.75 ? a * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + o : t < 2.5 / 2.75 ? a * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + o : a * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + o
    }, easeInOutBounce: function (e, t, o, a, n) {
        return t < n / 2 ? .5 * jQuery.easing.easeInBounce(e, 2 * t, 0, a, n) + o : .5 * jQuery.easing.easeOutBounce(e, 2 * t - n, 0, a, n) + .5 * a + o
    }
}), jQuery.bt = {version: "0.9.5-rc1"}, function ($) {
    jQuery.fn.bt = function (content, options) {
        function drawIt(e, t) {
            var o = navigator.userAgent.toLowerCase();
            if (this.moveTo(e[0].x, e[0].y), /msie/.test(o) && /8.0|7.0|6.0/.test(o)) for (i = 1; i < e.length; i++) "arcStart" == e[i - 1].type ? (this.quadraticCurveTo(e[i].x, e[i].y, e[(i + 1) % e.length].x, e[(i + 1) % e.length].y, t), i++) : this.lineTo(e[i].x, e[i].y, t); else for (i = 1; i < e.length; i++) "arcStart" == e[i - 1].type ? (this.quadraticCurveTo(round5(e[i].x, t), round5(e[i].y, t), round5(e[(i + 1) % e.length].x, t), round5(e[(i + 1) % e.length].y, t)), i++) : this.lineTo(round5(e[i].x, t), round5(e[i].y, t))
        }

        function round5(e, t) {
            var o;
            return t = numb(t), o = t % 2 ? e : Math.round(e - .5) + .5
        }

        function numb(e) {
            return parseInt(e) || 0
        }

        function arrayRemove(e, t) {
            var o, a = new Array;
            for (o in e) e[o] != t && a.push(e[o]);
            return a
        }

        function canvasSupport() {
            var e = !1;
            try {
                e = !!document.createElement("canvas").getContext("2d")
            } catch (t) {
                e = !!document.createElement("canvas").getContext
            }
            return e
        }

        function shadowSupport() {
            try {
                var e = navigator.userAgent.toLowerCase();
                if (/gecko|webkit|opera/.test(e) || /msie/.test(e) && /9.0|10.0|11.0/.test(e)) return !0
            } catch (t) {
            }
            return !1
        }

        function betweenPoint(e, t, o) {
            var a, n;
            return e.x == t.x ? (a = e.y < t.y ? e.y + o : e.y - o, {
                x: e.x,
                y: a
            }) : e.y == t.y ? (n = e.x < t.x ? e.x + o : e.x - o, {x: n, y: e.y}) : void 0
        }

        function centerPoint(e, t, o) {
            var a, n, i = t.x == e.x ? o.x : e.x, d = t.y == e.y ? o.y : e.y;
            return e.x < o.x ? e.y > o.y ? (a = Math.PI / 180 * 180, n = Math.PI / 180 * 90) : (a = Math.PI / 180 * 90, n = 0) : e.y > o.y ? (a = Math.PI / 180 * 270, n = Math.PI / 180 * 180) : (a = 0, n = Math.PI / 180 * 270), {
                x: i,
                y: d,
                type: "center",
                startAngle: a,
                endAngle: n
            }
        }

        function findIntersect(e, t, o, a, n, i, d, s) {
            if (n == d) return findIntersectY(e, t, o, a, n);
            if (i == s) return findIntersectX(e, t, o, a, i);
            var r = (t - a) / (e - o), u = t - r * e, l = (i - s) / (n - d), c = i - l * n, m = (c - u) / (r - l),
                p = r * m + u;
            return {x: m, y: p}
        }

        function findIntersectY(e, t, o, a, n) {
            if (t == a) return {x: n, y: t};
            var i = (t - a) / (e - o), d = t - i * e, s = i * n + d;
            return {x: n, y: s}
        }

        function findIntersectX(e, t, o, a, n) {
            if (e == o) return {x: e, y: n};
            var i = (t - a) / (e - o), d = t - i * e, s = (n - d) / i;
            return {x: s, y: n}
        }

        var contentSelect = !0, options = content, content = !1;
        return this.each(function (index) {
            var opts = jQuery.extend(!1, jQuery.bt.defaults, jQuery.bt.options, options);
            opts.spikeLength = numb(opts.spikeLength), opts.spikeGirth = numb(opts.spikeGirth), this.btOn = function () {
                "object" == typeof $(this).data("bt-box") && this.btOff(), opts.preBuild.apply(this), $(this).addClass(opts.activeClass), contentSelect && (content = eval(opts.contentSelector));
                var shadowMarginX = 0, shadowMarginY = 0, shadowShiftX = 0, shadowShiftY = 0;
                shadowMarginX = opts.shadowBlur > Math.abs(opts.shadowOffsetX) ? 2 * opts.shadowBlur : opts.shadowBlur + Math.abs(opts.shadowOffsetX), shadowShiftX = opts.shadowBlur - opts.shadowOffsetX > 0 ? opts.shadowBlur - opts.shadowOffsetX : 0, shadowMarginY = opts.shadowBlur > Math.abs(opts.shadowOffsetY) ? 2 * opts.shadowBlur : opts.shadowBlur + Math.abs(opts.shadowOffsetY), shadowShiftY = opts.shadowBlur - opts.shadowOffsetY > 0 ? opts.shadowBlur - opts.shadowOffsetY : 0;
                var $mowangsktext = $('<div class="bt-content"></div>').append(content).css({
                        padding: opts.padding,
                        position: "absolute",
                        width: opts.shrinkToFit ? "auto" : opts.width,
                        zIndex: opts.textzIndex,
                        left: shadowShiftX,
                        top: shadowShiftY
                    }).css(opts.cssStyles),
                    $mowangskbox = $('<div class="bt-wrapper"></div>').append($mowangsktext).addClass(opts.cssClass).css({
                        position: "relative",
                        width: opts.width,
                        zIndex: opts.wrapperzIndex,
                        visibility: "hidden"
                    });
                1 == opts.addType ? $mowangskbox.prependTo($(this).parent()) : $(this).parent().children(":last").before($mowangskbox), parseInt($mowangsktext.btOuterWidth()) >= parseInt(opts.width) && $mowangsktext.css("width", opts.width), $(this).data("bt-box", $mowangskbox);
                var points = new Array, textTop, textLeft, textRight, textBottom, textTopSpace, textBottomSpace,
                    textLeftSpace, textRightSpace, crossPoint, textCenter, spikePoint;
                $mowangsktext.css("margin-left", opts.spikeLength + "px"), 1 == opts.addType ? $mowangskbox.css({
                    top: "3px",
                    left: "77px"
                }) : $mowangskbox.css({top: "3px", left: "77px"});
                var yShift = shadowShiftY;
                textTop = $mowangsktext.btPosition().top + numb($mowangsktext.css("margin-top")), textLeft = $mowangsktext.btPosition().left + numb($mowangsktext.css("margin-left")), textRight = textLeft + $mowangsktext.btOuterWidth(), textBottom = textTop + $mowangsktext.outerHeight(), textCenter = {
                    x: textLeft + $mowangsktext.btOuterWidth() * opts.centerPointX,
                    y: textTop + $mowangsktext.outerHeight() * opts.centerPointY
                }, 1 == opts.addType ? (points[points.length] = spikePoint = {
                    x: shadowShiftX,
                    y: .5 * (textBottom - textTop) + yShift,
                    type: "spike"
                }, crossPoint = findIntersectY(spikePoint.x, spikePoint.y, textCenter.x, textCenter.y, textLeft), crossPoint.y = crossPoint.y < textTop + opts.spikeGirth / 2 + opts.cornerRadius ? textTop + opts.spikeGirth / 2 + opts.cornerRadius : crossPoint.y, crossPoint.y = crossPoint.y > textBottom - opts.spikeGirth / 2 - opts.cornerRadius ? textBottom - opts.spikeGirth / 2 - opts.cornerRadius : crossPoint.y) : (points[points.length] = spikePoint = {
                    x: shadowShiftX,
                    y: 30 + yShift,
                    type: "spike"
                }, crossPoint = findIntersectY(spikePoint.x, spikePoint.y, textLeft, spikePoint.y, textLeft), crossPoint.y = crossPoint.y < textTop + opts.spikeGirth / 2 + opts.cornerRadius ? textTop + opts.spikeGirth / 2 + opts.cornerRadius : crossPoint.y, crossPoint.y = crossPoint.y > textBottom - opts.spikeGirth / 2 - opts.cornerRadius ? textBottom - opts.spikeGirth / 2 - opts.cornerRadius : crossPoint.y), points[points.length] = {
                    x: textLeft,
                    y: crossPoint.y - opts.spikeGirth / 2,
                    type: "join"
                }, points[points.length] = {
                    x: textLeft,
                    y: textTop,
                    type: "corner"
                }, points[points.length] = {
                    x: textRight,
                    y: textTop,
                    type: "corner"
                }, points[points.length] = {
                    x: textRight,
                    y: textBottom,
                    type: "corner"
                }, points[points.length] = {
                    x: textLeft,
                    y: textBottom,
                    type: "corner"
                }, points[points.length] = {
                    x: textLeft,
                    y: crossPoint.y + opts.spikeGirth / 2,
                    type: "join"
                }, points[points.length] = spikePoint;
                var canvas = document.createElement("canvas");
                if ($(canvas).attr("width", numb($mowangsktext.btOuterWidth(!0)) + 2 * opts.strokeWidth + shadowMarginX).attr("height", numb($mowangsktext.outerHeight(!0)) + 2 * opts.strokeWidth + shadowMarginY + 5).appendTo($mowangskbox).css({
                    position: "absolute",
                    zIndex: opts.boxzIndex
                }), "undefined" != typeof G_vmlCanvasManager && (canvas = G_vmlCanvasManager.initElement(canvas)), opts.cornerRadius > 0) {
                    for (var newPoints = new Array, newPoint, i = 0; i < points.length; i++) "corner" == points[i].type ? (newPoint = betweenPoint(points[i], points[(i - 1) % points.length], opts.cornerRadius), newPoint.type = "arcStart", newPoints[newPoints.length] = newPoint, newPoints[newPoints.length] = points[i], newPoint = betweenPoint(points[i], points[(i + 1) % points.length], opts.cornerRadius), newPoint.type = "arcEnd", newPoints[newPoints.length] = newPoint) : newPoints[newPoints.length] = points[i];
                    points = newPoints
                }
                var ctx = canvas.getContext("2d");
                drawIt.apply(ctx, [points], opts.strokeWidth);
                var my_gradient = ctx.createLinearGradient(0, 0, 0, $(canvas).attr("height"));
                $.browser.msie ? (my_gradient.addColorStop(0, opts.mowangsk_colors[1]), my_gradient.addColorStop(.52, opts.mowangsk_colors[2]), my_gradient.addColorStop(.54, opts.mowangsk_colors[3]), my_gradient.addColorStop(1, opts.mowangsk_colors[4])) : (my_gradient.addColorStop(0, opts.mowangsk_colors[1]), my_gradient.addColorStop(.43, opts.mowangsk_colors[2]), my_gradient.addColorStop(.45, opts.mowangsk_colors[3]), my_gradient.addColorStop(1, opts.mowangsk_colors[4])), ctx.fillStyle = my_gradient, opts.shadow && (ctx.shadowOffsetX = opts.shadowOffsetX, ctx.shadowOffsetY = opts.shadowOffsetY, ctx.shadowBlur = opts.shadowBlur, ctx.shadowColor = opts.shadowColor), ctx.closePath(), ctx.fill(), opts.strokeWidth > 0 && (ctx.shadowColor = "rgba(0, 0, 0, 0)", ctx.lineWidth = opts.strokeWidth, ctx.strokeStyle = opts.strokeStyle, ctx.beginPath(), drawIt.apply(ctx, [points], opts.strokeWidth), ctx.closePath(), ctx.stroke()), opts.preShow.apply(this, [$mowangskbox[0]]), $mowangskbox.css({
                    display: "none",
                    visibility: "visible"
                }), opts.showTip.apply(this, [$mowangskbox[0]]), opts.postShow.apply(this, [$mowangskbox[0]])
            }, this.btOff = function () {
                var e = $(this).data("bt-box");
                opts.preHide.apply(this, [e]);
                var t = this;
                t.btCleanup = function () {
                    var e = $(t).data("bt-box");
                    "object" == typeof e && ($(e).remove(), $(t).removeData("bt-box")), $(t).removeClass(opts.activeClass), opts.postHide.apply(t)
                }, opts.hideTip.apply(this, [e, t.btCleanup])
            };
            var refresh = this.btRefresh = function () {
                this.btOff(), this.btOn()
            }
        })
    }, jQuery.fn.btPosition = function () {
        function e(e, t) {
            return e[0] && parseInt(jQuery.css(e[0], t, !0), 10) || 0
        }

        var t;
        if (this[0]) {
            var o = this.offsetParent(), a = this.offset(),
                n = /^body|html$/i.test(o[0].tagName) ? {top: 0, left: 0} : o.offset();
            a.top -= e(this, "marginTop"), a.left -= e(this, "marginLeft"), n.top += e(o, "borderTopWidth"), n.left += e(o, "borderLeftWidth"), t = {
                top: a.top - n.top,
                left: a.left - n.left
            }
        }
        return t
    }, jQuery.fn.btOuterWidth = function (e) {
        function t(e, t) {
            return e[0] && parseInt(jQuery.css(e[0], t, !0), 10) || 0
        }

        return this.innerWidth() + t(this, "borderLeftWidth") + t(this, "borderRightWidth") + (e ? t(this, "marginLeft") + t(this, "marginRight") : 0)
    }, jQuery.fn.btOn = function () {
        return this.each(function (e) {
            jQuery.isFunction(this.btOn) && this.btOn()
        })
    }, jQuery.fn.btOff = function () {
        return this.each(function (e) {
            jQuery.isFunction(this.btOff) && this.btOff()
        })
    }, jQuery.bt.defaults = {
        shrinkToFit: !1,
        width: "200px",
        padding: "10px",
        spikeGirth: 10,
        spikeLength: 15,
        killTitle: !0,
        textzIndex: 9,
        boxzIndex: 8,
        wrapperzIndex: 7,
        offsetParent: null,
        positions: ["most"],
        fill: "rgb(255, 255, 102)",
        strokeWidth: 1,
        strokeStyle: "#000",
        cornerRadius: 5,
        centerPointX: .5,
        centerPointY: .5,
        shadow: !1,
        shadowOffsetX: 2,
        shadowOffsetY: 2,
        shadowBlur: 3,
        shadowColor: "#000",
        noShadowOpts: {strokeStyle: "#999"},
        cssClass: "",
        cssStyles: {},
        activeClass: "bt-active",
        contentSelector: "$(this).data('bubble')",
        preBuild: function () {
        },
        preShow: function (e) {
        },
        showTip: function (e) {
            $(e).show()
        },
        postShow: function (e) {
        },
        preHide: function (e) {
        },
        hideTip: function (e, t) {
            $(e).hide(), t()
        },
        postHide: function () {
        }
    }, jQuery.bt.options = {}
}(jQuery);
var defaultImageUrls = [{restriction: 4}, {restriction: 2}, {restriction: 1}], moTool = {
    mo: {
        oScrollTop: 0,
        imageCache: [],
        ajaxTag: !1,
        $contentId: "",
        $oBoxId: "",
        $oContentId: "",
        $backContentId: "",
        $logBackContentId: ""
    }, abortAjax: function (e) {
        e && e.abort()
    }, jsonParse: function (e) {
        try {
            if ("YII_LOGIN_REQUIRED" === e) return {error: "login_required"};
            var e = $.parseJSON(e)
        } catch (t) {
            e = {error: "网站发生错误"}
        }
        return e
    }, loadImages: function (e, t) {
        if (0 == e.length) return void t();
        e instanceof Array || (e = [e]);
        for (var o = 0, a = 0, n = 0; n < e.length; n++) {
            var i = document.createElement("img");
            i.onload = function () {
                o++, 2 == o && (t(), a = 1), o >= e.length && 0 == a && t()
            }, i.src = e[n], moTool.mo.imageCache.push(i)
        }
    }, loadInputDefaultValue: function () {
        function e() {
            return "placeholder" in document.createElement("input")
        }

        e() || $("[placeholder]").focus(function () {
            var e = $(this);
            e.val() == e.attr("placeholder") && (e.val(""), e.removeClass("placeholder"))
        }).blur(function () {
            var e = $(this);
            "" != e.val() && e.val() != e.attr("placeholder") || (e.addClass("placeholder"), e.val(e.attr("placeholder")))
        }).blur()
    }, boardReplaceTxt: function (e) {
        if (e) return e = e.replace(/"/g, "&quot;"), e = e.replace(/'/g, "&#39;"), e = e.replace(/</g, "&lt;"), e = e.replace(/>/g, "&gt;"), e = e.replace(/\t/g, "　"), e = e.replace(/  /g, "　")
    }, replaceSoundIntroHtml: function (e) {
        return e ? e.replace(/(<(?!\/?(strong|p|br|em|u|del)(\s|>))[^>]*>)/, "").replace(/@([\u2E80-\u9FFFA-Za-z0-9_]+?)\((\d+)\)(?=\s|<|$)/g, function (e, t, o) {
            return '<a href=' + o + '"/" class="username" target="_blank">@' + moTool.boardReplaceTxt(t) + "</a>"
        }) : ""
    }, Q2B: function (e) {
        for (var t = "", o = 0; o < e.length; o++) code = e.charCodeAt(o), t += code >= 65281 && code <= 65373 ? String.fromCharCode(e.charCodeAt(o) - 65248) : 12288 == code ? String.fromCharCode(e.charCodeAt(o) - 12288 + 32) : e.charAt(o);
        return t
    }, replaceBoth: function (e, t, o) {
        var a = e.css("left"), n = e.css("top"), i = t.css("left"), d = t.css("top");
        e.css({left: i, top: d}), t.css({left: a, top: n}), o()
    }, createModalBox: function () {
        var e = [], t = $(".m_c");
        if (t.each(function () {
            e.push([$(this).attr("id"), $(this).data("width"), $(this).data("height")])
        }), !$("#b_b").length) {
            var o = '<div id="b_b"><div id="b_b_p"></div><div id="b_b_b"></div><div id="b_f"></div></div>';
            $(o).appendTo("body").hide()
        }
        if (!$("#b_f #confirmboxcontent").length) {
            var a = '<div id="confirmboxcontent"><div class="boxcontent"></div><div class="btn-row"><button class="btn-black">确定</button><button class="btn-white">取消</button></div></div>';
            $(a).appendTo("#b_f")
        }
        if (!$("#b_f #errorboxcontent").length) {
            var n = '<div id="errorboxcontent"><div id="e_t">错误提示</div><input id="errorbtn" type="button" class="boxbtn pie" value="返回" /></div>';
            $(n).appendTo("#b_f")
        }
        if (!$("#b_f #loadboxcontent").length) {
            var i = '<div id="loadboxcontent"><div class="loading"><div class="l1"></div><div class="l2"></div><div class="l3"></div><div class="l4"></div><div class="l5"></div><div class="l6"></div></div></div>';
            $(i).appendTo("#b_f")
        }
        e.push(["errorboxcontent", 800]), e.push(["loadboxcontent", 800]), $.each(e, function (e, t) {
            var o = t[0], a = t[1], n = t[2] ? t[2] : 320, i = -a / 2, d = 0;
            $("#" + o).addClass("pie").addClass("m_c").data("margintop", d).data("height", n).css({
                width: a,
                height: n,
                marginLeft: i
            }).appendTo("#b_f").hide()
        });
        var d = $("#errorbtn");
        d.click(function () {
            "" != moTool.mo.$oContentId && "loadboxcontent" == moTool.mo.$oContentId.attr("id") ? moTool.showModalBox(moTool.mo.$backContentId) : moTool.showModalBox(moTool.mo.$oContentId), moTool.mo.$backContentId = ""
        })
    }, showLoad: function () {
        if ("" == moTool.mo.$contentId || "loadboxcontent" != moTool.mo.$contentId.attr("id")) {
            var e = $("#loadboxcontent");
            moTool.mo.$backContentId = moTool.mo.$contentId, moTool.showModalBox(e, {showClose: !1})
        }
    }, hideLoad: function () {
        var e = $("#loadboxcontent");
        moTool.mo.$backContentId = "", moTool.mo.$contentId = "", moTool.hideModalBox(e)
    }, showConfirmModal: function (e, t) {
        function o() {
            moTool.hideModalBox(a), moTool.mo.$backContentId = "", moTool.mo.$logBackContentId = "", i.unbind("click"), d.unbind("click")
        }

        var a = $("#confirmboxcontent"), n = a.find(".boxcontent"), i = a.find(".btn-black"), d = a.find(".btn-white");
        n.html(e), d.click(function () {
            o(), t && t(!1)
        }), i.click(function () {
            o(), t && t(!0)
        }), moTool.showModalBox(a, {showClose: !1})
    }, showError: function (e, t) {
        if (moTool.mo.$contentId && (moTool.mo.$contentId.hide(), moTool.mo.$contentId = "", $("#b_b").hide()), "undefined" != typeof R && R.components) R.components.toggleToast(e, "body"); else {
            var o = $("#errorboxcontent"), a = $("#e_t"), n = $("#errorbtn");
            t ? n.show() : n.hide(), a.html(e), moTool.showModalBox(o)
        }
    }, showSuccess: function (e, t) {
        if (moTool.mo.$contentId && (moTool.mo.$contentId.hide(), moTool.mo.$contentId = "", $("#b_b").hide()), "undefined" != typeof R && R.components) R.components.toggleToast(e, "body"); else {
            var o = $("#errorboxcontent"), a = $("#e_t"), n = $("#errorbtn");
            t ? n.show() : n.hide(), a.html(e), moTool.showModalBox(o)
        }
    }, showSuccessLegacy: function (e, t) {
        if (!t) return void ("undefined" != typeof R && R.components ? R.components.toggleToast(e, "body") : moTool.showModalBox(e));
        var o = $("#errorboxcontent"), a = $("#e_t"), n = $("#errorbtn");
        t ? n.show() : n.hide(), a.html(e), moTool.showModalBox(o)
    }, showErrorLegacy: function (e, t) {
        var o = $("#errorboxcontent"), a = $("#e_t"), n = $("#errorbtn");
        t ? n.show() : n.hide(), a.html(e), moTool.showModalBox(o)
    }, showModalBox: function (e, t) {
        var o = $("#b_b");
        t = 2 == arguments.length ? $.extend({showClose: !0, showBackground: !0}, t) : {
            showClose: !0,
            showBackground: !0
        };
        var a = e.find(".m_c_b");
        a.length || (a = $("<div class='m_c_b'>×</div>"), e.append(a), a.css({
            left: parseInt(e.css("width")),
            bottom: parseInt(e.css("height")) - 25
        })), a.click(function () {
            moTool.hideModalBox($(this).parent()), moTool.mo.$backContentId = "", moTool.mo.$logBackContentId = ""
        }), !t.showClose && e.find(".m_c_b").length && e.find(".m_c_b").hide(), "" != moTool.mo.$contentId && moTool.mo.$contentId.hide(), t.showBackground ? o.find("#b_b_p").show() : o.find("#b_b_p").hide(), e.show(), o.show(), moTool.mo.$oContentId = moTool.mo.$contentId, moTool.mo.$contentId = e
    }, hideModalBox: function (e) {
        var t = $("#b_b");
        moTool.mo.$oContentId = "", e.hide(), t.hide()
    }, getAjax: function (e, t) {
        return moTool.mo.ajaxTag = !0, e = $.extend({
            error: !0,
            success: !1,
            errorBack: !1,
            successBack: !1,
            showLoad: !0,
            showError: !0,
            startLoad: !1,
            endLoad: !1,
            async: !0,
            json: !0
        }, e), $.ajax({
            type: "GET", url: e.url, cache: !1, async: e.async, dataType: "json", success: function (t) {
                if (moTool.mo.ajaxTag = !1, e.error && t.error) {
                    if ("stimeout" == t.error && (e.eCallBack && e.eCallBack(t), "stimeout" == t.error || "login_required" == t.error)) {
                        if (e.onAuthRequired) e.onAuthRequired(); else {
                            var o = $("#loginboxcontent");
                            moTool.mo.$logBackContentId = moTool.mo.$backContentId, moTool.showModalBox(o)
                        }
                        return
                    }
                    return void (e.showError && moTool.showError(t.error, e.errorBack))
                }
                e.callBack && e.callBack(t), e.success && t.success && moTool.showSuccess(t.success, e.successBack), 0 == moTool.mo.ajaxTag && "" != moTool.mo.$contentId && "loadboxcontent" == moTool.mo.$contentId.attr("id") && (e.endLoad ? e.endLoad() : moTool.hideLoad())
            }, error: function (t, o, a) {
                e.errorCallBack && e.errorCallBack()
            }
        })
    }, postAjax: function (e, t) {
        return moTool.mo.ajaxTag = !0, e = $.extend({
            error: !0,
            success: !1,
            errorBack: !1,
            successBack: !1,
            showSuccessLegacy: !1,
            showLoad: !0,
            startLoad: !1,
            endLoad: !1,
            showError: !0,
            async: !0,
            json: !0
        }, e), e.showLoad && (e.startLoad ? e.startLoad() : moTool.showLoad()), $.ajax({
            type: "POST",
            url: e.url,
            data: e.value,
            cache: !1,
            async: e.async,
            dataType: "json",
            success: function (t) {
                if (moTool.mo.ajaxTag = !1, e.error && t.error) {
                    if (e.eCallBack && e.eCallBack(t), "stimeout" == t.error || "login_required" == t.error) {
                        if (e.onAuthRequired) e.onAuthRequired(); else {
                            var o = $("#loginboxcontent");
                            moTool.mo.$logBackContentId = moTool.mo.$backContentId, moTool.showModalBox(o)
                        }
                        return
                    }
                    return e.showError && moTool.showError(t.error, e.errorBack), void (e.showErrorLegacy && moTool.showErrorLegacy(t.error, e.errorBack))
                }
                e.callBack && e.callBack(t), t.success && (e.success ? moTool.showSuccess(t.success, e.successBack) : e.showSuccessLegacy && moTool.showSuccessLegacy(t.success, e.successBack)), 0 == moTool.mo.ajaxTag && "" != moTool.mo.$contentId && "loadboxcontent" == moTool.mo.$contentId.attr("id") && (e.endLoad ? e.endLoad() : moTool.hideLoad())
            },
            error: function (t, o, a) {
                e.errorCallBack && e.errorCallBack()
            }
        })
    }, navtabs: function () {
        $(".nav-tabs li").click(function () {
            var e = $(this).parent();
            e.find(".dmcnum.active").removeClass("active"), $(this).addClass("active");
            var t = $(this).data("tab");
            e.parent().find(".nav-content > li").removeClass("active"), e.parent().find("#" + t).addClass("active")
        })
    }, hoverheight: function () {
        $(".fc-hoverheight-container").hover(function () {
            $(this).find(".fc-hoverheight-" + $(this).data("hoverheight")).addClass("fc-hoverheight-full")
        }, function () {
            $(this).find(".fc-hoverheight-" + $(this).data("hoverheight")).removeClass("fc-hoverheight-full")
        })
    }, chooseitem: function () {
        $(".fc-chooseitem li").click(function () {
            var e = $(this).parent(), t = e.data("itemscontainer");
            e.find(".fc-chooseitem-active").removeClass("fc-chooseitem-active"), $(this).addClass("fc-chooseitem-active");
            var o = $(this).data("blockindex"), a = o.split(",");
            tabid2 = a.join("_"), $(".fc-chooseitem-" + t).removeClass("fc-chooseitem-div-active");
            var n = $(".fc-chooseitem-" + tabid2);
            n.addClass("fc-chooseitem-div-active");
            var i = n.find(".lazy-ajax");
            i && i.length > 0 && i.lazyload(), $("#frontpage-" + tabid2 + " .fc-hoverheight-container").hover(function () {
                $(this).find(".fc-hoverheight-" + $(this).data("hoverheight")).addClass("fc-hoverheight-full")
            }, function () {
                $(this).find(".fc-hoverheight-" + $(this).data("hoverheight")).removeClass("fc-hoverheight-full")
            })
        })
    }, vtime1: function (e) {
        var t = e, o = Math.floor(t / 36e5);
        t -= 36e5 * o;
        var a = Math.floor(t / 6e4);
        t -= 6e4 * a;
        var n = Math.floor(t / 1e3), i = 0 === o ? "" : o + ":", d = (o > 0 ? R.utils.ii(a) : a) + ":",
            s = R.utils.ii(n);
        return i + d + s
    }, formatCount: function (e) {
        var t = "";
        return t = e >= 1e5 ? parseInt(e / 1e4) + " 万" : e >= 1e4 ? parseInt(e / 1e3) / 10 + " 万" : e + ""
    }, dateFormat: function (e) {
        var t = new Date;
        t.setTime(e);
        var o = t.getFullYear(), a = t.getMonth() + 1 < 10 ? "0" + (t.getMonth() + 1) : t.getMonth() + 1,
            n = t.getDate() < 10 ? "0" + t.getDate() : t.getDate(),
            i = t.getHours() < 10 ? "0" + t.getHours() : t.getHours(),
            d = t.getMinutes() < 10 ? "0" + t.getMinutes() : t.getMinutes();
        t.getSeconds() < 10 ? "0" + t.getSeconds() : t.getSeconds();
        return o + "-" + a + "-" + n + " " + i + ":" + d
    }
}, news = {
    boxStrLoad: {
        loadReplyStr: function (e) {
            var t = "", o = $("#leftreplylist");
            $.each(e.replies, function (o, a) {
                var n = "";
                if ("" != a.quote) {
                    var i = a.quote.split("[:mr]");
                    $.each(i, function (e, t) {
                        var t = t.split("[:m]"), o = e == i.length - 1 ? "style='width:470px;'" : "";
                        t[1] = "" == t[1] || "Guest" == t[1] ? "匿名游客" : t[1], n = "<div class='inrl'><div class='inrlt'><span class='inrltm'></span><span class='inrltt'>来自 <span class='inrlnum'>" + t[0] + "</span>楼 <span class='inrlcreator'>" + t[1] + "</span> 发表于 <span class='inrlctime'>" + t[2] + "</span></span></div><div class='inrlc' " + o + ">" + n + "<span class='inrlcontent'>" + t[3] + "</span></div></div>"
                    })
                }
                if (e.replyUsers && e.replyUsers.boardIconUrls[a.userid]) var d = e.replyUsers.boardIconUrls[a.userid],
                    s = e.replyUsers.boardIconColors[a.userid].split("m")[0]; else var d = "http://static.missevan.com/mimages/icon01.png",
                    s = "#91c0ed;";
                a.creator = "" == a.creator || "Guest" == a.creator ? "匿名访客" : a.creator, page = $("#postbtn").data("replytimes"), t = t + "<div class='rb' data-newsid='" + a.newsid + "' data-replyid='" + a.id + '\'><div class="rbsub"><div class="rbreply">回复</div><div class="rbdown">反对<span class="rbdownnum">(' + a.downtimes + ')</span></div><div class="rbup">赞<span class="rbupnum">(' + a.uptimes + ")</span></div><div class='rbtitle'> 客人<span class='rbnum'>" + (page - o) + "</span> <span class='rbtime'>" + a.ctime + "</span></div></div><div class=\"clear\"></div><div class='rbbody'><div class='rbarrow1'></div><div class='rbarrow2' style='border-right-color:" + s + "'></div><div class='rbicon'><div class='rbiconbox pie'><img width='64px' height='64px' src='" + d + "'></div><div class='rbusername'>" + a.creator + "</div></div><div class='rbvalueout'><div class='rbvalue pie' style='background-color:" + s + "'>" + n + "<div class='rbcontent'>" + a.replies + '</div></div></div></div></div><div class="clear"></div>'
            }), 1 != e.replyPage && (t += "<div id='addallreply'>加载所有回复↓↓</div>"), o.html(t)
        }, loadAddReplyStr: function () {
            var e = "", t = "", o = "", a = index.mo.defaultIcon, n = index.mo.defaultColors.split("m")[0],
                i = UM.getEditor("leftnewsreply"), d = i.getContent(), s = $("#postbtn"), r = $("#leftreplylist");
            o = "我的留言", 0 != s.data("replyid") && (t = "<div class='inrl'><div class='inrlt'><span class='inrltm'></span><span class='inrltt'>来自 <span class='inrlnum'>" + s.data("quotenum") + "</span>楼 <span class='inrlcreator'>" + s.data("quotename") + "</span> 发表于 <span class='inrlctime'>" + s.data("quotetime") + "</span></span></div><div class='inrlc' style='width:470px;'>" + s.data("quoteinrl").replace("width:470px", "") + "<span class='inrlcontent'>" + s.data("quotecontent") + "</span></div></div>"), e = e + "<div class='rb' data-newsid='" + s.data("newsid") + "'><div class='rbsub'><div class='rbtitle'> 我刚刚评论</div></div><div class=\"clear\"></div><div class='rbbody'><div class='rbarrow1'></div><div class='rbarrow2' style='border-right-color:" + n + "'></div><div class='rbicon'><div class='rbiconbox pie'><img width='64px' height='64px' src='" + a + "'></div><div class='rbusername'>" + o + "</div></div><div class='rbvalueout'><div class='rbvalue pie' style='background-color:" + n + "'>" + t + d + '</div></div></div></div><div class="clear"></div>', r.find(".rb").length || r.html(""), r.prepend(e)
        }
    }, boxLoad: {
        loadReply: function () {
            var e = $(".rbreply"), t = $(".rbup,.rbdown"), o = $("#postquoteclose"), a = $("#postquote"),
                n = $("#postquotestr"), i = $("#postbtn"), d = $("#addallreply"),
                s = $.browser.webkit ? $("body") : $("html");
            t.click(function () {
                var e = $(this), t = $(this).parent().parent().data("replyid"), o = 1, a = 0;
                o = $(this).hasClass("rbup") ? 1 : 0, a = parseInt($(this).find("span").html().replace("(", "").replace(")", "")), moTool.postAjax({
                    url: "/news/updownreply",
                    value: {replyid: t, updownflag: o},
                    callBack: function (t) {
                        e.find("span").html("(" + (a + 1) + ")")
                    }
                })
            }), o.click(function () {
                news.js.clearReply()
            }), e.click(function () {
                a.show(100), s.animate({scrollTop: $("#postquote").offset().top - 20}, 500), i.data("replyid", $(this).parent().parent().data("replyid")), i.data("quotenum", $(this).parent().parent().find(".rbnum").html()), i.data("quotename", $(this).parent().parent().find(".rbusername").html()), i.data("quotetime", $(this).parent().parent().find(".rbtime").html()), i.data("quotecontent", $(this).parent().parent().find(".rbcontent").html()), $(this).parent().parent().find(".inrl").length ? i.data("quoteinrl", '<div class="inrl">' + $(this).parent().parent().find(".inrl").eq(0).html() + "</div>") : i.data("quoteinrl", ""), n.html("回复 " + i.data("quotenum") + "楼 " + i.data("quotename") + ": " + $("<div />").html(i.data("quotecontent")).text().substr(0, 10) + "...")
            }), d.click(function () {
                moTool.getAjax({
                    url: "/news/getreply?newsid=" + i.data("newsid") + "&p=1", callBack: function (e) {
                        news.boxStrLoad.loadReplyStr(e.successVal), news.boxLoad.loadReply()
                    }
                })
            })
        }
    }, js: {
        loadReply: function () {
            var e = $("#postbtn"), t = e.data("newsid");
            moTool.getAjax({
                url: "/news/getreply?newsid=" + t + "&p=0", callBack: function (e) {
                    news.boxStrLoad.loadReplyStr(e.successVal), news.boxLoad.loadReply()
                }, showLoad: !1, showError: !1
            }), e.click(function () {
                var t = UM.getEditor("leftnewsreply"), o = t.getContent();
                return "" == o ? void moTool.showErrorLegacy("评论内容不能为空~") : void moTool.postAjax({
                    url: "/news/addreply",
                    value: {
                        newsid: e.data("newsid"),
                        replyid: e.data("replyid"),
                        replynum: e.data("quotenum"),
                        replytext: o
                    },
                    callBack: function (e) {
                        news.boxStrLoad.loadAddReplyStr(), news.js.clearReply(), t.setContent("")
                    },
                    showErrorLegacy: !0,
                    showSuccessLegacy: !0
                })
            })
        }, clearReply: function () {
            var e = $("#postquote"), t = $("#postbtn");
            e.hide(100), t.data("replyid", 0), t.data("quotenum", 0), t.data("quotename", ""), t.data("quotetime", 0), t.data("quotecontent", ""), t.data("quoteinrl", "")
        }, loadTopLink: function () {
            swfobject.embedSWF("/flash/miao.swf", "miaoicon", "84", "90", "9", "#ffffff", null, {wmode: "transparent"}), swfobject.embedSWF("/flash/shuimu.swf", "shuimu", "30", "30", "9", "#ffffff", null, {wmode: "transparent"}), swfobject.embedSWF("/flash/link.swf", "linkicon", "200", "100", "9", "#ffffff", null, {wmode: "transparent"})
        }, loadTagBox: function () {
            var e = $(".tag"), t = $("#tags"), o = $("#tagclear"),
                a = [0, 4, 8, 12, 16, 1, 5, 9, 13, 17, 2, 6, 10, 14, 18, 3, 7, 11, 15, 19];
            e.hover(function () {
                $(this).children().addClass("taghover")
            }, function () {
                $(this).children().removeClass("taghover")
            }), e.each(function (e) {
                e < 4 ? $(this).children().addClass("tagrandom1") : e < 8 ? $(this).children().addClass("tagrandom2") : e < 12 ? $(this).children().addClass("tagrandom3") : e < 16 ? $(this).children().addClass("tagrandom4") : $(this).children().addClass("tagrandom5")
            });
            for (no in a) t.append(e.eq(a[no]));
            t.append(o)
        }, loadLazy: function () {
            $("img.lazy").lazyload({failure_limit: 60})
        }, loadMoveBox: function () {
            function e() {
                a = setInterval(function () {
                    n != t.length - 1 ? n++ : n = 0, $(".movepointout").eq(n).click()
                }, 1e4)
            }

            var t = $(".movepointout"), o = $(".movepic"), a = !1, n = 0, i = 1e3, o = $(".movepic"),
                d = $(".movepic a");
            t.click(function () {
                n = $(this).index(), t.removeClass("movepointouthover").children().removeClass("movepointhover"), $(this).addClass("movepointouthover").children().addClass("movepointhover"), o.fadeOut(i), o.eq(n).fadeIn(i), a && (clearInterval(a), e())
            }), e(), d.click(function (e) {
                e.preventDefault()
            }), o.click(function () {
                window.open($(this).find("a").attr("href"))
            })
        }, loadImageOri: function () {
            var e = $("#articlebox img");
            e.each(function () {
                void 0 != $(this).attr("src") && ("/image" == $(this).attr("src").substr(0, 6) && $(this).attr("src", "http://58.215.240.77:8081" + $(this).attr("src")), "images" == $(this).attr("src").substr(0, 6) && $(this).attr("src", "http://58.215.240.77:8081/" + $(this).attr("src")))
            })
        }, loadHeadTab: function () {
            var e = $("#headtop li"), t = $(".headbottom");
            e.click(function () {
                e.removeClass("active"), $(this).addClass("active"), t.hide(), $("#headbottom" + ($(this).index() + 1)).show()
            })
        }
    }
}, ERROR_CODE_LOGIN_REQUIRED = 100010006, ERROR_CODE_SLIDE_CHECK_REQUIRED = 100010017, play = {
    vars: {
        playerType: "web",
        bindProgressBar: !1,
        edition: !1,
        firstLoad: !0,
        ptab: null,
        playlist: null,
        playlistapi: null,
        noticeinterval: null
    }, boxStrLoad: {
        escape: moTool.boardReplaceTxt, playlistSound: function (e) {
            var t = R.utils.URLProtocolRemove(e.front_cover), o = "";
            return o += '<div id="pld-sound-', o += e.id, o += '" class="playlist-sound pld-sound' + (1 == parseInt(e.download) ? " forbiddown" : ""), o += '" data-like="', o += 0 == parseInt(e.like) ? "mpcz" : "mpczg", o += '" data-checked="', o += e.checked, o += '" data-cover="', o += t, o += '" data-duration="', o += e.duration, o += '" data-sounduserid="', o += e.user_id, o += '" data-soundid="', o += e.id, e.redirect_id && (o += '" data-soundredirectid="', o += e.redirect_id), e.pay_type > 0 && 2 != e.need_pay && (o += '" data-pay="true', o += '" data-num="', o += e.num || "", e.drama_id && (o += '" data-dramaid="', o += e.drama_id)), e.soundurl && (o += '" data-soundurl="', o += R.utils.URLProtocolRemove(e.soundurl || ""), o += '" data-soundurl64="', o += R.utils.URLProtocolRemove(e.soundurl_64 || "")), e.videourl && (o += '" data-videourl="', o += R.utils.URLProtocolRemove(e.videourl)), o += '">', o += '<div class="playlist-sound-box">', o += '<div class="playlist-sound-image">', o += '<img src="' + t + '?x-oss-process=style/playlist" />', o += "</div>", o += '<div class="playlist-sound-title">', o += '<a class="title" href="/sound/player?id=' + e.id + '"onclick="play.js.listSoundPlay(event, ' + e.id + ')" title="' + play.boxStrLoad.escape(e.soundstr) + '">' + play.boxStrLoad.escape(e.soundstr) + "</a>", o += '<a class="playlist-sound-username" href="/' + e.user_id + '/"', o += '" target="_blank" title="' + play.boxStrLoad.escape(e.username) + '">' + play.boxStrLoad.escape(e.username) + "</a>", o += "</div>", o += '<div class="playlist-sound-additional">', o += '<span class="play-count">' + play.soundBox.getTime(e.duration) + "</span>", o += '<div class="func"><div class="btn icon down" title="下载"></div><div class="btn icon share" title="分享"></div><div class="btn icon like" title="收藏"></div><div class="btn icon delete" title="删除"></div></div>', o += "</div></div>", o += "</div>"
        }
    }, strBox: {
        formattime: function (e) {
            var t = new Date / 1e3, o = t - e;
            if (o < 60) return parseInt(o) + "秒前";
            if (o < 3600) return parseInt(o / 60) + "分钟前";
            if (o < 86400) return parseInt(o / 3600) + "小时前";
            var a = new Date(1e3 * e);
            return a.getYear() + 1900 + "-" + (a.getMonth() + 1) + "-" + a.getDate()
        }, flatSlideImageleftright: function () {
            $(".slide-image-show").first().index() > 0 ? $(".slide-left").addClass("slide-left-show") : $(".slide-left").removeClass("slide-left-show"), $(".slide-image-show").last().index() < $(".sound-image-single").length - 1 ? $(".slide-right").addClass("slide-right-show") : $(".slide-right").removeClass("slide-right-show")
        }, flatSlideImage: function (e) {
            var t = e.data("shownum"), o = e.find(".image-container").find("li"), a = o.eq(0).data("path"),
                n = o.length;
            0 === n ? e.find(".self-adjest").html('<div style="width: 300px;position: relative;float: left;text-align: center;margin: 100px 50px 0px 90px;height: 50px;line-height: 50px;color: #fff;border-radius: 10px;background-color: rgba(0, 0, 0, 0.5);">还没插入图片啊 ~</div>') : (e.find(".self-adjest").html('<img src="' + a + '"/>'), o.eq(0).addClass("slide-image-active"));
            for (var i = 0; i < t; i++) o.eq(i).addClass("slide-image-show");
            n > t && e.find(".slide-right").addClass("slide-right-show"), e.find(".slide-left").unbind("click"), e.find(".slide-right").unbind("click"), e.find(".slide-right").click(function () {
                e.find(".slide-image-show").eq(t - 1).index() < n - 1 && e.find(".slide-image-show").eq(t - 1).index() != -1 && (e.find(".slide-image-show").eq(t - 1).next().addClass("slide-image-show"), e.find(".slide-image-show").eq(0).removeClass("slide-image-show"), (e.find(".slide-image-show").eq(t - 1).index() >= n - 1 || e.find(".slide-image-show").eq(t - 1).index() == -1) && e.find(".slide-right").removeClass("slide-right-show"), e.find(".slide-image-show").eq(0).index() > 0 && e.find(".slide-left").addClass("slide-left-show"))
            }), e.find(".slide-left").click(function () {
                e.find(".slide-image-show").eq(0).index() > 0 && (e.find(".slide-image-show").eq(t - 1).removeClass("slide-image-show"), e.find(".slide-image-show").eq(0).prev().addClass("slide-image-show"), e.find(".slide-image-show").eq(0).index() <= 0 && e.find(".slide-left").removeClass("slide-left-show"), e.find(".slide-image-show").eq(t - 1).index() < n - 1 && e.find(".slide-image-show").eq(t - 1).index() != -1 && e.find(".slide-right").addClass("slide-right-show"))
            })
        }, imageDrag: function (e) {
            play.js.dragmpf($(".mpf"))
        }, loadSendDm: function () {
            R.components.DanmakuArea.mountTo($("#prdm")[0])
        }, loadDmImages: function () {
            var e = ($(".mpl"), $(".mplr"), $(window).height() - 157 + "px");
            "iframe" == $("#mpi").data("loadtype") && (e = $(window).height() + "px"), $.ajax({
                type: "GET",
                url: "/sound/getimages?soundid=" + $("#mpi").data("soundid"),
                async: !0,
                success: function (e) {
                    play.vars.bindProgressBar || (play.vars.bindProgressBar = !0, play.js.bindDraggableProgressBar()), $(".web-sound-image-time").appendTo($("body"));
                    var t = $(".mpfo"), o = $(".player"), a = [];
                    0 == index.mo.dmImages.length && t.click(function (e) {
                        var t = e.offsetX / parseInt($(this).css("width")) * $("#mpi").data("duration");
                        play.js.changeSoundPosition(t), play.js.changeSoundImage(t)
                    }), index.mo.dmImages = $.parseJSON(e).successVal.images, index.mo.dmImages.sort(function (e, t) {
                        return e[1] > t[1] ? 1 : -1
                    }), $(".mpfo").html("");
                    var n = "", i = "", d = o.hasClass("video-mode");
                    $.each(index.mo.dmImages, function (e, t) {
                        var o = index.mo.mImagesPath + t[0], s = index.mo.mImagesMiniPath + t[0],
                            r = s + "?x-oss-process=style/playbar";
                        window.R && R.utils && (o = R.utils.imageUrlConvert(o), s = R.utils.imageUrlConvert(s)), a.push(o), !d && index.mo.soundDemo && index.mo.soundDemo.onPosition(t[1], function (e) {
                            index.mo.soundDemo.paused || play.js.insertImage(t[0])
                        }), i += '<div class="mpf mpf' + t[1] + " soundimg" + t[6] + '" data-time="' + t[1] + '" data-id="' + t[6] + '" style="left:' + t[1] / $("#mpi").data("duration") * 100 + '%;"><div class="mpfi"><img src="' + r + '" data-original="' + s + '" /></div></div>';
                        var u = $("#p").height();
                        u < 400 && "iframe" == $("#mpi").data("loadtype") && $(".mpf").hide(), n = n + '<div class="picl" data-id="' + t[7] + '" data-index="' + e + '"><a class="pici"><img class="lazy-ajax" src="' + index.mo.lazyLoadPath + '" data-original="' + s + '" width="130px" height="130px" /></a></div>'
                    }), d || $(".mpfo").html(i), $("#picnum").html("图片:" + index.mo.dmImages.length), $("#picc").html(n), play.strBox.flatSlideImage($("#picture-container"));
                    var s = play.soundBox.getAccurateTime($("#sound-image-container").find("li").eq(0).data("time"));
                    0 == index.mo.dmImages.length ? s = "0:0:0" : play.strBox.flatSlideImageleftright(), $("#soundimagetime-minutes").val(s.split(":")[0]), $("#soundimagetime-seconds").val(s.split(":")[1]), $("#soundimagetime-msec").val(s.split(":")[2]), $(".sound-image-single").click(function () {
                        $("#soundimagetime").removeClass("editing"), $("#soundimagetime-check").removeClass("editing"), $(".mpf.editing").css("left", 100 * $(".mpf.editing").data("time") / $(".mpi").data("duration") + "%"), $(".mpf").removeClass("editing"), $(".soundimg" + $(this).data("id")).addClass("editing"), $(".sound-image-single").removeClass("slide-image-active"), $(this).addClass("slide-image-active"), $("#sound-image-preview").html('<img src="' + $(this).data("path") + '">');
                        var e = play.soundBox.getAccurateTime($(this).data("time"));
                        $("#soundimagetime-minutes").val(e.split(":")[0]), $("#soundimagetime-seconds").val(e.split(":")[1]), $("#soundimagetime-msec").val(e.split(":")[2])
                    }), $(".picl").click(function () {
                        var e = parseInt($("#mpi").data("userid")) === parseInt($("#mpi").data("sounduserid"));
                        window.ImageViewer.init(index.mo.dmImages, $(this).data("index"), e)
                    }), $(".picdel").click(function () {
                        moTool.showModalBox($("#delpicmodal"))
                    }), moTool.loadImages(a, function () {
                        play.js.readyToPlay(3)
                    });
                    var r = $(".mpf");
                    r.click(function (e) {
                        e.stopPropagation();
                        var t = parseInt($(this).css("left")) / parseInt($(this).parent().css("width")) * $("#mpi").data("duration");
                        play.js.changeSoundPosition(t), play.js.insertImage($(this).find("img").attr("src").replace("mimagesmini", "mimages").replace(index.mo.mImagesPath, "").replace("?x-oss-process=style/playbar", ""))
                    }), r.hover(function () {
                        $(this).addClass("mpfh")
                    }, function () {
                        $(this).removeClass("mpfh")
                    }), play.strBox.imageDrag(), $("#bjbtn").hasClass("editing") || $(".mpf").draggable("disable"), $(".mpf").click(function () {
                        var e = $(this);
                        if (0 == e.find(".edition-panel").length) {
                            if ($("#bjbtn").hasClass("editing")) {
                                $(".web-sound-image-time").appendTo($("body")), $(".web-sound-image-time").hide(), $(".edition-panel").remove();
                                var t = e.find(".mpfi").find("img").data("original"), o = '<div class="edition-panel">';
                                o += '<div class="prev">&lt;&nbsp;上一张</div>', o += '<div class="current">\n  <div class="soundimage-delete">\n    <div class="soundimage-delete-mask">删除</div>\n    <img src="' + t + '" />\n  </div>\n</div>\n', o += '<div class="next">下一张&nbsp;&gt;</div>', o += "</div>", e.prepend(o), $(".mpf").last().find(".edition-panel").find(".next").hide(), $(".mpf").first().find(".edition-panel").find(".prev").hide();
                                var a = e.find(".edition-panel");
                                a.find(".soundimage-delete-mask").click(function () {
                                    if (confirm("确认删除这张图片吗？")) {
                                        var e = $(this).parents(".mpf").data("id");
                                        moTool.getAjax({
                                            url: "/mimage/deletebindmimages?id=" + e,
                                            callBack: function (e) {
                                                play.strBox.loadDmImages()
                                            },
                                            success: !0
                                        })
                                    }
                                    return !1
                                }), $(".web-sound-image-time").prependTo(e.find(".current")), a.find(".web-sound-image-time").show(), a.find(".next").click(function (t) {
                                    return e.next() && e.next().click(), !1
                                }), a.find(".prev").click(function (t) {
                                    return e.prev() && e.prev().click(), !1
                                })
                            }
                            $("#soundimagetime").removeClass("editing"), $("#soundimagetime-check").removeClass("editing"), $(".mpf").removeClass("editing"), $(".sound-image-single").removeClass("slide-image-active");
                            var n = $(".sound-image-single.soundimg" + $(this).data("id"));
                            n.addClass("slide-image-active"), $(".slide-image-show").removeClass("slide-image-show"), $("#bjbtn").hasClass("editing") && $(this).addClass("editing");
                            var i = play.soundBox.getAccurateTime($(this).data("time"));
                            $("#soundimagetime-minutes").val(i.split(":")[0]), $("#soundimagetime-seconds").val(i.split(":")[1]), $("#soundimagetime-msec").val(i.split(":")[2]), $("#sound-image-preview").html('<img src="' + $(".slide-image-active").data("path") + '">')
                        } else a = e.find(".edition-panel"), a.find(".web-sound-image-time").appendTo($("body")), $(".web-sound-image-time").hide(), a.remove()
                    })
                },
                error: function (e, t, o) {
                }
            })
        }
    }, soundBox: {
        init: function () {
            play.vars.playerType = $("#mpi").data("loadtype");
            var e = navigator.userAgent.indexOf("Chrome") > -1 && "iframe" == $("#mpi").data("loadtype");
            soundManager.setupM(e)
        }, calculateTime: function (e, t, o) {
            return t > 59 || o > 999 ? -1 : o + 1e3 * t + 6e4 * e
        }, getTime: function (e) {
            var t = Math.floor(e / 1e3), o = Math.floor(t / 60), a = t - 60 * o;
            return o + ":" + (a < 10 ? "0" + a : a)
        }, getAccurateTime: function (e) {
            var t = Math.floor(e / 1e3), o = Math.floor(t / 60), a = t - 60 * o, n = parseInt(e % 1e3), i = "";
            return i = n < 10 ? "00" + n : n < 100 ? "0" + n : n, o + ":" + (a < 10 ? "0" + a : a) + ":" + i
        }, getAccurateTimeFormat: function (e) {
            var t = Math.floor(e / 1e3), o = Math.floor(t / 60), a = t - 60 * o, n = e % 1e3, i = "";
            return i = n < 10 ? "00" + n : n < 100 ? "0" + n : n, o + ":" + (a < 10 ? "0" + a : a) + "." + i
        }, bindVolumeController: function () {
            var e = $(".mpsv"), t = $(".mpsvb"), o = e.find(".volume-label");
            t.slider({
                orientation: "vertical", range: "min", min: 0, max: 100, value: 100, slide: function (e, t) {
                    o.text(t.value)
                }, change: function (e, t) {
                    play.soundBox.setVolume(t.value)
                }
            }), e.click(function (t) {
                var o = t.target || t.srcElement;
                if (o === e[0] || $(o).hasClass("mpsv-btn")) if (e.hasClass("mpsvc")) {
                    var a = store.get("volume");
                    a = a <= 100 || a >= 0 ? a : 100, play.soundBox.updateVolume(a)
                } else play.soundBox.updateVolume(0, !1)
            })
        }, getVolume: function () {
            var e = store.get("volume");
            e = e <= 100 || e >= 0 ? e : 100, play.soundBox.updateVolume(e, !1)
        }, updateVolume: function (e, t) {
            var o = $(".mpsv");
            o.find(".mpsvb .ui-slider-range").css("height", e.toString() + "%"), o.find(".mpsvb .ui-slider-handle").css("bottom", e.toString() + "%"), o.find(".volume-label").text(parseInt(e)), play.soundBox.setVolume(parseInt(e), t)
        }, setVolume: function (e, t) {
            var o = $(".mpsv");
            void 0 != index.mo.soundDemo && (index.mo.soundDemo.setVolume(e), t !== !1 && store.set("volume", e), 0 == e ? o.hasClass("mpsvc") || o.addClass("mpsvc") : o.removeClass("mpsvc"))
        }, playChat: function () {
            0 != index.mo.soundEffect && soundManager.play("soundeffect", "/flash/sound" + index.mo.soundEffect + ".mp3")
        }, playChatStr: function (e) {
            soundManager.play(e, index.mo.soundPath + e)
        }, toggleLoadStatus: function (e) {
            var t = $(".mppl"), o = e.bytesLoaded / e.bytesTotal, a = !e.isHTML5 && !index.browser.versions.iPad && .05;
            if (t.css("width", 100 * o + "%"), !a || e.bytesLoaded > e.bytesTotal * a) {
                var n = $("#mpi");
                if (n.hasClass("soundloaded")) return;
                n.addClass("soundloaded");
                var i = $(".mpsa");
                i.html(play.soundBox.getTime($("#mpi").data("duration")));
                $("#mpi").data("loadtype");
                play.strBox.loadDmImages(), play.js.readyToPlay(1)
            }
        }, startLoad: function (e, t, o, a) {
            var n = $(".mpl"), i = $(".mplr"), d = $("#mpi"), s = $(".mppl"), r = $(".mpsp"), u = $(".mpsa"),
                l = ($(".mpsvbl"), $(".mpsvblr"), $("#mpiloop"));
            void 0 == window.cm && (window.cm = new CommentManager(document.getElementById("commentCanvas")));
            var c = 0, m = !1, p = !1;
            "web" == play.vars.playerType && (p = !0), t && (e = index.mo.mPath + t), soundManager.onready(function () {
                if (e && "undefined" != e) if ("iframe" == play.vars.playerType) index.mo.soundDemo = soundManager.createSound({
                    id: e, useEQData: p, url: e, multiShot: !1, autoLoad: !0, onload: function () {
                        $("#b_b, #s_l, .loading").hide(), i.addClass("pause")
                    }, onplay: function () {
                        $("#centerplaybtn").hide();
                        var e = this.bytesLoaded / this.bytesTotal;
                        s.css("width", 100 * e + "%"), index.strBox.initDm(), index.strBox.startDm(), play.soundBox.getVolume(), d.removeClass("mpir"), d.addClass("mpip"), d.attr("title", "暂停"), d.removeClass("mpiframe"), i.removeClass("pause").addClass("playing")
                    }, onpause: function () {
                        index.strBox.pauseDm(), $("#centerplaybtn").show(), r.html(play.soundBox.getTime(this.position)), d.removeClass("mpip"), d.attr("title", "播放"), i.removeClass("playing").addClass("pause")
                    }, onresume: function () {
                        index.strBox.resumeDm(this.position), $("#centerplaybtn").hide(), d.addClass("mpip"), d.attr("title", "暂停"), i.removeClass("pause").addClass("playing")
                    }, onstop: function () {
                    }, whileloading: function () {
                        play.soundBox.toggleLoadStatus(this)
                    }, whileplaying: function () {
                        var e = this.position / $("#mpi").data("duration"), e = e > 1 ? 1 : e;
                        if (c % 5 !== 0 || i.hasClass("ui-draggable-dragging") || r.html(play.soundBox.getTime(this.position)), "web" == play.vars.playerType && c % 5 == 0 && $(".web-sound-container").hasClass("show-cover")) {
                            c = 0;
                            for (var t = $(".wave .left .scale .inner"), o = $(".wave .right .scale .inner"), a = 200, d = 0; d < 32; d++) t.eq(d).height(Math.ceil(this.eqData.left[4 * d] * a / 2) + "px"), o.eq(d).height(Math.ceil(this.eqData.right[4 * d] * a / 2) + "px")
                        }
                        c++, i.hasClass("ui-draggable-dragging") || (n.css("width", 100 * e + "%"), i.css("left", 100 * e + "%"))
                    }, onfinish: function () {
                        $("#centerplaybtn").show(), d.removeClass("mpip"), d.addClass("mpir"), d.attr("title", "重新播放"), i.removeClass("playing").addClass("pause"), $("#c_c").show(), $("#imageCanvas").hide(), l.hasClass("mpiloopa") ? (play.js.addPlaytimes(), d.click()) : moTool.showModalBox($("#soundlikemodal"), {showBackground: !1}), $("#fullScreen").hasClass("active") || ($(".web-sound-container").addClass("show-cover"), $(".player").height(400), $("#commentCanvas").height(400), $(".pause-area").hide()), window.cm && window.cm.setBounds()
                    }
                }), index.mo.soundDemo.loaded || index.mo.soundDemo.bytesLoaded && index.mo.soundDemo.bytesTotal && index.mo.soundDemo.bytesLoaded == index.mo.soundDemo.bytesTotal ? d.hasClass("soundloaded") || (d.addClass("soundloaded"), u.html(play.soundBox.getTime($("#mpi").data("duration"))), play.strBox.loadDmImages(), play.js.readyToPlay(1)) : index.mo.soundDemo.load(); else {
                    var t = R.utils.URLProtocolRemove($("#mpi").data("videourl")), o = function () {
                        $("#mpi").data("duration", this.duration), u.html(play.soundBox.getTime(this.duration)), i.addClass("pause")
                    }, a = function () {
                        var e = this.bytesLoaded / this.bytesTotal;
                        s.css("width", 100 * e + "%"), index.strBox.initDm(), index.strBox.startDm(), play.soundBox.getVolume(), d.removeClass("mpir"), d.addClass("mpip"), d.attr("title", "暂停"), d.removeClass("mpiframe"), i.removeClass("pause").addClass("playing"), play.js.addPlaytimes()
                    }, f = function () {
                        index.strBox.pauseDm(), r.html(play.soundBox.getTime(this.position)), d.removeClass("mpip"), d.attr("title", "播放"), i.removeClass("playing").addClass("pause")
                    }, h = function () {
                        index.strBox.resumeDm(this.position), d.addClass("mpip"), d.attr("title", "暂停"), i.removeClass("pause").addClass("playing")
                    }, v = function () {
                        index.strBox.stopDm()
                    }, g = function () {
                        play.soundBox.toggleLoadStatus(this)
                    }, y = function () {
                        var e = this.position / this.duration, e = e > 1 ? 1 : e;
                        i.hasClass("ui-draggable-dragging") || (n.css("width", 100 * e + "%"),
                            i.css("left", 100 * e + "%"), r.html(play.soundBox.getTime(this.position)))
                    }, b = function () {
                        d.removeClass("mpip"), d.addClass("mpir"), d.attr("title", "重新播放"), index.strBox.stopDm(), i.removeClass("playing").addClass("pause");
                        var e = $(".pld-sound.pld-sound-active").next();
                        if (l.hasClass("mpiloopa")) play.js.addPlaytimes(), d.click(); else if (l.hasClass("mpiplaypl")) e && e.length > 0 && play.js.swiftSound(e); else if (l.hasClass("mpilooppl")) e && e.length > 0 ? play.js.swiftSound(e) : play.js.swiftSound($(".pld-sound").first()); else if (l.hasClass("mpilooprand")) {
                            var t = Math.random() * ($(".pld-sound").length - 1);
                            t = parseInt(t), $(".pld-sound").eq(t).hasClass(".pld-sound-active") && (t -= 1, t == -1 && (t += 2)), play.js.swiftSound($(".pld-sound").eq(t))
                        }
                        $("#fullScreen").hasClass("active") || ($(".web-sound-container").addClass("show-cover"), $(".player").height(400), $("#commentCanvas").height(400), $(".pause-area").hide()), window.cm && window.cm.setBounds()
                    };
                    if (t && !$(".sound-intro .title").hasClass("sound-mode")) index.mo.soundDemo = play.js.insertVideo(t, {
                        onload: o,
                        onplay: function () {
                            play.js.enterVideoMode(), a.call(this)
                        },
                        onpause: f,
                        onresume: h,
                        onstop: v,
                        whileloading: g,
                        whileplaying: y,
                        onfinish: b
                    }), index.mo.soundDemo.load(); else {
                        var w = parseInt($("#mpi").data("duration"));
                        index.mo.soundDemo = soundManager.createSound({
                            id: e,
                            useEQData: p,
                            url: e,
                            multiShot: !1,
                            onload: o,
                            onplay: a,
                            onpause: f,
                            onresume: h,
                            onstop: v,
                            whileloading: g,
                            whileplaying: function () {
                                if (c % 5 !== 0 || i.hasClass("ui-draggable-dragging") || r.html(play.soundBox.getTime(this.position)), "web" == play.vars.playerType && c % 5 == 0 && $(".web-sound-container").hasClass("show-cover")) {
                                    c = 0;
                                    var e = $(".wave .left .scale .inner"), t = $(".wave .right .scale .inner"),
                                        o = 200;
                                    if (this.isHTML5) {
                                        if (m ? AudioSpectrum.analyse() : (m = !0, AudioSpectrum.init(this._a)), AudioSpectrum.spectrumArray && AudioSpectrum.spectrumArray.length) for (var a = 0; a < 32; a++) e.eq(a).height(Math.ceil(AudioSpectrum.spectrumArray[4 * a] * o / 2) + "px"), t.eq(a).height(Math.ceil(AudioSpectrum.spectrumArray[4 * a] * o / 2) + "px")
                                    } else for (var a = 0; a < 32; a++) e.eq(a).height(Math.ceil(this.eqData.left[4 * a] * o / 2) + "px"), t.eq(a).height(Math.ceil(this.eqData.right[4 * a] * o / 2) + "px")
                                }
                                c++;
                                var d = this.position / w, d = d > 1 ? 1 : d;
                                i.hasClass("ui-draggable-dragging") || (n.css("width", 100 * d + "%"), i.css("left", 100 * d + "%"))
                            },
                            onfinish: b
                        }), index.mo.soundDemo.bytesLoaded && index.mo.soundDemo.bytesTotal && index.mo.soundDemo.bytesLoaded == index.mo.soundDemo.bytesTotal ? d.hasClass("soundloaded") || (d.addClass("soundloaded"), u.html(play.soundBox.getTime($("#mpi").data("duration"))), play.strBox.loadDmImages(), play.js.readyToPlay(1)) : index.mo.soundDemo.load()
                    }
                    var x = $("#bjbtn");
                    parseInt($("#mpi").data("userid")) === parseInt($("#mpi").data("sounduserid")) ? ($("#bjbtn").click(function () {
                        window.location.href = "/sound/edit/" + $("#mpi").data("soundid")
                    }), "none" === $("#bjbtn").css("display") && x.show()) : "block" === $("#bjbtn").css("display") && x.hide()
                }
            })
        }, playSound: function (e, t, o) {
            e && soundManager.onready(function () {
                void 0 == index.mo.soundObj[e] ? index.mo.soundObj[e] = soundManager.createSound({
                    id: e,
                    url: o + e,
                    onload: function () {
                    },
                    onplay: function () {
                    },
                    onpause: function () {
                        $(".l_i_b_h .l_w").hide(), $(".l_i_b_h").removeClass("l_i_b_h")
                    },
                    onstop: function () {
                        $(".l_i_b_h .l_w").hide(), $(".l_i_b_h").removeClass("l_i_b_h")
                    },
                    whileplaying: function () {
                    },
                    onfinish: function () {
                        $(".l_i_b_h .l_w").hide(), $(".l_i_b_h").removeClass("l_i_b_h")
                    }
                }) : index.mo.soundObj[e].stop(), t.addClass("l_i_b_h"), t.find(".l_w").html(t.data("name") + "<br />" + t.data("str")), t.find(".l_w").show();
                try {
                    index.mo.soundObj[e].play()
                } catch (a) {
                    console.log(a)
                }
            })
        }, playAdminSound: function (e, t, o) {
            soundManager.onready(function () {
                if (void 0 == index.mo.soundObj[e]) {
                    t.html("加载"), index.mo.soundObj[e] = soundManager.createSound({
                        id: e,
                        url: o + e,
                        onload: function () {
                            t.html("0:00")
                        },
                        whileplaying: function () {
                            var e = Math.floor(this.position / 1e3), o = Math.floor(e / 60), a = e - 60 * o;
                            t.html(o + ":" + (a < 10 ? "0" + a : a)), 0 == $(".aicon").data("top") || $(".aicon").data("top") == -1 ? $(".aicon").data("top", 1) : $(".aicon").data("top", -1), $(".aicon").css({top: $(".aicon").data("top")})
                        },
                        onfinish: function () {
                            t.html("播放"), $(".aicon").css({top: 0})
                        }
                    });
                    try {
                        index.mo.soundObj[e].play()
                    } catch (a) {
                        console.log(a)
                    }
                } else index.mo.soundObj[e].togglePause()
            })
        }, playAnimationSound: function (e, t, o) {
            soundManager.onready(function () {
                if (void 0 == index.mo.soundObj[e]) {
                    index.mo.soundObj[e] = soundManager.createSound({
                        id: e, url: o + e, onload: function () {
                        }, onpause: function () {
                        }, onstop: function () {
                        }, whileplaying: function () {
                        }, onfinish: function () {
                        }
                    });
                    try {
                        index.mo.soundObj[e].play()
                    } catch (t) {
                        console.log(t)
                    }
                } else index.mo.soundObj[e].togglePause()
            })
        }, playIconSound: function (e, t, o, a) {
            soundManager.onready(function () {
                if (t && (e = a + t), void 0 == index.mo.soundObj[e]) {
                    index.mo.soundObj[e] = soundManager.createSound({
                        id: e, url: e, onload: function () {
                            o.find(".icoVoice").hide(), o.find(".icoVoicePlaying").show(), o.find(".voice").addClass("playing"), o.find(".unread").remove()
                        }, onplay: function () {
                            o.find(".voice").addClass("playing")
                        }, onpause: function () {
                            o.find(".icoVoicePlaying").hide(), o.find(".icoVoice").show(), o.find(".voice").removeClass("playing")
                        }, onstop: function () {
                            o.find(".icoVoicePlaying").hide(), o.find(".icoVoice").show(), o.find(".voice").removeClass("playing")
                        }, whileplaying: function () {
                        }, onfinish: function () {
                            o.find(".icoVoicePlaying").hide(), o.find(".icoVoice").show(), o.find(".voice").removeClass("playing")
                        }
                    });
                    try {
                        index.mo.soundObj[e].play()
                    } catch (n) {
                        console.log(n)
                    }
                } else o.find(".icoVoice").hide(), o.find(".icoVoicePlaying").show(), o.find(".voice").removeClass("playing"), index.mo.soundObj[e].togglePause()
            })
        }, playChatMusic: function (e, t, o) {
            soundManager.onready(function () {
                if (void 0 == index.mo.soundObj[e]) {
                    index.mo.soundObj[e] = soundManager.createSound({
                        id: e, url: o + e, onload: function () {
                        }, onplay: function () {
                            t.addClass("soundplayanimation")
                        }, onpause: function () {
                            t.removeClass("soundplayanimation")
                        }, onresume: function () {
                            t.addClass("soundplayanimation")
                        }, onstop: function () {
                            t.removeClass("soundplayanimation")
                        }, whileplaying: function () {
                        }, onfinish: function () {
                            t.removeClass("soundplayanimation")
                        }
                    }), soundManager.pauseAll();
                    try {
                        index.mo.soundObj[e].play()
                    } catch (a) {
                        console.log(a)
                    }
                } else {
                    var n = 0;
                    switch (n = index.mo.soundObj[e].paused ? 1 : 0 == index.mo.soundObj[e].playState ? 2 : 3, soundManager.pauseAll(), n) {
                        case 1:
                            index.mo.soundObj[e].resume();
                            break;
                        case 2:
                            index.mo.soundObj[e].play();
                            break;
                        case 3:
                            index.mo.soundObj[e].pause()
                    }
                }
            })
        }
    }, js: {
        registerFullScreenChangeEvent: function () {
            $(document).bind("fullscreenchange webkitfullscreenchange mozfullscreenchange", function () {
                document.fullscreen || document.webkitIsFullScreen || document.mozFullScreen || play.js.cancelfullCB()
            })
        }, fullScreenBtnHandle: function () {
            if ($(this).hasClass("active")) {
                $(this).attr("title", "全屏"), play.js.exitFullScreen();
                var e = navigator.appName, t = navigator.appVersion.split(";");
                if (t[1]) {
                    var o = t[1].replace(/[ ]/g, "");
                    "Microsoft Internet Explorer" === e && "MSIE8.0" === o && play.js.cancelfullCB()
                }
                $(this).removeClass("active")
            } else $(this).attr("title", "取消全屏"), $(this).addClass("active"), $(this).data("windowheight", $(window).height()), play.js.fullScreen(), $("#header").css("top", -42), $(".web-sound-container").hasClass("show-cover") && ($(".web-sound-container").removeClass("show-cover"), $("#c_c").attr("style", "opacity: 0; filter: alpha(opacity=0);margin: " + ($(window).width() - $("#c_c").width()) / 2 + "px;")), 0 === $("#imageCanvas").html().length && $("#imageCanvas").html('<img src="' + ($("#mpi").data("cover") ? $("#mpi").data("cover").replace("mini", "") : (index.mo.coversMiniPath + index.mo.blankImg).replace("mini", "")) + '"/>'), $(".web-sound-container").addClass("fullscreen"), $("#m, #mp, .pause-area, #bjbtn").addClass("fullscreen"), $(".danmaku-area").appendTo($("#mp")[0]), $(".player").width("100%").height("100%"), $(".pause-area").show();
            window.cm && window.cm.setBounds()
        }, fullScreen: function () {
            var e = document.documentElement,
                t = e.requestFullScreen || e.webkitRequestFullScreen || e.mozRequestFullScreen || e.msRequestFullScreen;
            if ("undefined" != typeof t && t) try {
                t.call(e)
            } catch (o) {
                console.log(o)
            } else if ("undefined" != typeof window.ActiveXObject) {
                var a = navigator.appName, n = navigator.appVersion, i = n.split(";");
                if (i[1]) {
                    var d = i[1].replace(/[ ]/g, "");
                    if ("Microsoft Internet Explorer" != a || "MSIE8.0" != d) {
                        var s = new ActiveXObject("WScript.Shell");
                        null != s && s.SendKeys("{F11}")
                    }
                }
            }
        }, exitFullScreen: function () {
            var e = document,
                t = e.cancelFullScreen || e.webkitCancelFullScreen || e.mozCancelFullScreen || e.exitFullScreen;
            if ("undefined" != typeof t && t) try {
                t.call(e)
            } catch (o) {
                console.log(o)
            } else if ("undefined" != typeof window.ActiveXObject) {
                var a = navigator.appName, n = navigator.appVersion, i = n.split(";");
                if (i[1]) {
                    var d = i[1].replace(/[ ]/g, "");
                    if ("Microsoft Internet Explorer" != a || "MSIE8.0" != d) {
                        var s = new ActiveXObject("WScript.Shell");
                        null != s && s.SendKeys("{F11}")
                    }
                }
            }
        }, playlistSound: function (e) {
            var t = e ? $("#pld-sound-" + e) : $(".pld-sound");
            t.find(".delete").click(function () {
                return $(this).parents(".pld-sound").hasClass("pld-sound-active") && soundManager.stopAll(), play.vars.ptab.list.remove($(this).parents(".pld-sound").data("soundid")), $(this).parents(".pld-sound").remove(), play.vars.playlistapi.reinitialise(), $("#playlist-btn .notice").text("M音已移除"), $(".playlist-sound").length < 100 ? $("#playlist-btn .count").text($(".playlist-sound").length) : $("#playlist-btn .count").text("99+"), $("#playlist-btn .notice").show(), play.vars.noticeinterval && clearTimeout(play.vars.noticeinterval), noticeinterval = setTimeout(function () {
                    $("#playlist-btn .notice").fadeOut()
                }, 3e3), !1
            }), t.find(".share").click(function () {
                var e = $(this).parents(".pld-sound"), t = e.data("soundid"),
                    o = e.find(".playlist-sound-title .title").html() + " - UP 主：" + e.find(".playlist-sound-username").html(),
                    a = e.data("cover");
                return play.js.showSoundShare(t, o, a), !1
            }), t.find(".down").click(function () {
                var e = $(this).parents(".pld-sound");
                return e.hasClass("forbiddown") ? R.components.toggleToast("UP 主禁止下载") : e.data("pay") && !e.data("soundurl") ? R.components.toggleToast("请付费购买") : $.ajax({
                    url: "/sound/down?soundid=" + e.data("soundid"),
                    dataType: "json",
                    success: function (e) {
                        if (e.success) {
                            var t = '<div class="download-confirm-container">' + e.success + '<button class="btn-text download-container-close">关闭</button></div>';
                            $("#sound-share-bottom").append(t), $("#sound-share-bottom .download-container-close").click(function () {
                                $(this).parent().remove()
                            })
                        } else e.error && moTool.showErrorLegacy(e.error)
                    }
                }), !1
            }), t.find(".like").click(function () {
                favFrame.inited || favFrame.init(), favFrame.bindSound($(this).parents(".pld-sound").data("soundid")), favFrame.show()
            })
        }, clearPlayer: function () {
            $("#mpi").removeClass("soundloaded"), $("#mpi").removeClass("mpir"), $("#mpi").removeClass("mpip"), $("#mpi").attr("title", "播放"), $("#m .mpsp").html("--:--"), $("#m .mppl").css("width", "0"), $("#m .mpl").css("width", "0"), $("#m .mpfi").remove(), $(".mpb .mpfo").html(""), index.mo.soundDemo && (index.mo.soundDemo.stop(), index.mo.soundDemo.destruct(), index.mo.soundDemo = null)
        }, loadSoundRecommend: function (e) {
            var t = e.id, o = parseInt(e.originAlbumId), a = $(".soundblock.sound-recommend")[0];
            a.children.length > 0 ? R.components.playerRecommendList.update(t, o) : R.components.PlayerRecommendList.mountTo(a, t, o)
        }, loadSoundPlayList: function () {
            moTool.getAjax({
                url: "/sound/playlist?sid=" + $("#mpi").data("soundid"), callBack: function (e) {
                    if (e && 0 != e.length) {
                        var t = "";
                        $.each(e, function (e, o) {
                            t += '<a class="part" href="/sound/' + o.id + '">', t += play.boxStrLoad.escape(o.soundstr), t += "</a>"
                        }), $(".web-sound .sound-relate").html(t)
                    } else $(".web-sound .sound-relate").hide()
                }, startLoad: function (e) {
                }, errorBack: function (e) {
                    $(".web-sound .sound-relate").hide()
                }
            })
        }, dragmpf: function (e) {
            $(e).draggable({
                axis: "x", containment: $(".mpo"), start: function (e) {
                    0 == $(this).find(".edition-panel").length && ($editpanel = $(".edition-panel"), $editpanel.find(".web-sound-image-time").appendTo($("body")), $(".web-sound-image-time").hide(), $editpanel.remove()), $(".mpf.editing").css("left", 100 * $(".mpf.editing").data("time") / $(".mpi").data("duration") + "%"), $("#soundimagetime-check").addClass("editing"), $("#soundimagetime").addClass("editing"), $(".mpf").removeClass("editing"), $(this).addClass("editing"), $(".sound-image-single").removeClass("slide-image-active");
                    var t = $(".sound-image-single.soundimg" + $(this).data("id"));
                    t.addClass("slide-image-active"), $("#sound-image-preview").html('<img src="' + t.data("path") + '">');
                    var o = play.soundBox.getAccurateTime(t.data("time"));
                    $("#soundimagetime-minutes").val(o.split(":")[0]), $("#soundimagetime-seconds").val(o.split(":")[1]), $("#soundimagetime-msec").val(o.split(":")[2])
                }, drag: function (e) {
                    var t = $(this).position().left, o = t / $(".mpo").width(),
                        a = play.soundBox.getAccurateTime(o * $(".mpi").data("duration"));
                    $("#soundimagetime-minutes").val(a.split(":")[0]), $("#soundimagetime-seconds").val(a.split(":")[1]), $("#soundimagetime-msec").val(a.split(":")[2])
                }, stop: function (e) {
                    var t = $(this).position().left, o = t / $(".mpo").width();
                    $(this).css("left", 100 * o + "%");
                    var a = play.soundBox.getAccurateTime(o * $(".mpi").data("duration"));
                    if ($("#soundimagetime-minutes").val(a.split(":")[0]), $("#soundimagetime-seconds").val(a.split(":")[1]), $("#soundimagetime-msec").val(a.split(":")[2]), $(this).hasClass("editing")) {
                        var n = parseInt($("#soundimagetime-minutes").val()),
                            i = parseInt($("#soundimagetime-seconds").val()),
                            d = parseInt($("#soundimagetime-msec").val()),
                            a = play.soundBox.calculateTime(n, i, d) / 1e3, s = $(this).data("id"),
                            r = $(".mpf.soundimg" + s).data("time");
                        moTool.postAjax({
                            url: "/sound/changeimagetime",
                            value: {map_id: s, time: a},
                            callBack: function (e) {
                                $(".sound-image-single.soundimg" + s).data("time", 1e3 * a), $(".mpf.soundimg" + s).data("time", 1e3 * a), $(".mpf.soundimg" + s).removeClass("mpf" + r), $(".mpf.soundimg" + s).addClass("mpf" + 1e3 * a), $(".mpf.soundimg" + s).css("left", 1e5 * a / $(".mpi").data("duration") + "%"), $("#soundimagetime").removeClass("editing"), $("#soundimagetime-check").removeClass("editing");
                                var t = null;
                                $.each($(".mpf"), function (e, o) {
                                    $(o).data("time") < 1e3 * a && (t = o)
                                }), t ? $(t).after($(".mpf.soundimg" + s)) : $(".mpf.soundimg" + s).parent().prepend($(".mpf.soundimg" + s)), $(".edition-panel .next").show(), $(".edition-panel .prev").show(), $(".mpf").last().find(".next").hide(), $(".mpf").first().find(".prev").hide(), $(".edition-panel .next").show(), $(".edition-panel .prev").show(), $(".mpf").last().find(".next").hide(), $(".mpf").first().find(".prev").hide()
                            },
                            showLoad: !1
                        })
                    }
                }
            })
        }, cancelfullCB: function () {
            $("#fullScreen").removeClass("active"), $("#m").css("opacity", 1), $("#m").css("filter", "alpha(opacity=100)"), $("#header").css("top", 0), $("#m").show();
            var e = $(".mpl").width() / $(".mpo").width() * $("#mpi").data("duration"), t = -1;
            $.each(index.mo.dmImages, function (o, a) {
                parseInt(a[1]) < e && (t = o)
            });
            var o = $(".player"), a = o.hasClass("video-mode");
            if ($(".web-sound-container").addClass("show-cover").attr("style", ""), $("#c_c").attr("style", "opacity: 1;filter:alpha(opacity=100); margin: 0 auto;"), o.height(400), $("#commentCanvas").height(400), $(".pause-area").hide(), a || t >= 0) {
                $(".web-sound-container").removeClass("show-cover"), a || play.js.insertImage(index.mo.dmImages[t][0]);
                var n = parseInt($("#fullScreen").data("windowheight")) - 185;
                $(".player").height(n), $("#commentCanvas").height(n), $(".pause-area").height(n).show()
            }
            $(".player").width(1234), $(".web-sound-container").removeClass("fullscreen"), $("#m, #mp, .pause-area, #bjbtn").removeClass("fullscreen"), $(".danmaku-area").appendTo($("#prdm")[0])
        }, insertImage: function (e) {
            if ($(".web-sound-container").removeClass("show-cover"), !window.location.href.match(/organization\/soundiframe/)) {
                if ("iframe" == $("#mpi").data("loadtype") && ($("#c_c").hide(), $("#imageCanvas").show(), maxHeight = $(window).height() + "px"), !$("#fullScreen").hasClass("active") && $(".web-sound-container").height() > 485) {
                    var t = $(window).height() - 185;
                    $(".player").height(t), $("#commentCanvas").height(t), $(".pause-area").height(t).show()
                }
                var o = index.mo.mImagesPath + e;
                window.R && R.utils && (o = R.utils.imageUrlConvert(o)), $("#imageCanvas").html('<img src="' + o + '" />')
            }
        }, createVideo: function (e, t, o) {
            var a = !0, n = {
                setVolume: function (e) {
                    t.volume = e / 100
                }, setPosition: function (e) {
                    t.currentTime = e / 1e3
                }, destruct: function () {
                    t.src = "", t.load(), t.remove()
                }, stop: function () {
                    a = !0, t.pause(), t.currentTime = 0
                }, resume: function () {
                    t.play()
                }, play: function () {
                    var e = t.play();
                    void 0 !== e && e.then()["catch"](function () {
                    })
                }, pause: function () {
                    t.pause()
                }, load: function () {
                    t.load()
                }
            };
            n.isHTML5 = !0, n.playState = 0;
            var i = function () {
                t.buffered.length <= 0 || o.whileloading && o.whileloading.call(n)
            };
            return t.addEventListener("canplay", function () {
                o.onload && o.onload.call(n)
            }, !0), t.addEventListener("pause", function () {
                o.onpause && o.onpause.call(n)
            }, !0), t.addEventListener("play", function () {
                n.playState = 1, a ? (o.onplay && o.onplay.call(n), a = !1) : o.onresume && o.onresume.call(n)
            }, !0), t.addEventListener("ended", function () {
                a = !0, n.playState = 0, o.onfinish && o.onfinish.call(n)
            }, !0), t.addEventListener("loadstart", function () {
                i()
            }, !0), t.addEventListener("durationchange", function () {
                i()
            }, !0), t.addEventListener("progress", i, !0), t.addEventListener("timeupdate", function () {
                var e = t.currentTime;
                e / t.duration;
                o.whileplaying && o.whileplaying.call(n)
            }, !0), Object.defineProperty(n, "position", {
                get: function () {
                    return 1e3 * t.currentTime
                }, enumerable: !0, configurable: !0
            }), Object.defineProperty(n, "duration", {
                get: function () {
                    return 1e3 * t.duration
                }, enumerable: !0, configurable: !0
            }), Object.defineProperty(n, "bytesLoaded", {
                get: function () {
                    return t.buffered.length > 0 ? 1e3 * t.buffered.end(0) : 0
                }, enumerable: !0, configurable: !0
            }), Object.defineProperty(n, "bytesTotal", {
                get: function () {
                    return 1e3 * t.duration
                }, enumerable: !0, configurable: !0
            }), n
        }, insertVideo: function (e, t) {
            var o = ($(".mpl"), $(".mplr"), $(".mpsp"), $(".mppl"), $("#mpi"), $(".player"));
            o.find("#video-container").html("<video></video>"), o.addClass("video-mode"), $(".web-sound-container").removeClass("show-cover");
            var a = o.find("video"), n = this.createVideo(e, a[0], t);
            return a.html('<source src="' + e + '" />'), n
        }, enterVideoMode: function () {
            if ($(".sound-intro .title").removeClass("sound-mode").addClass("video-mode"), $(".web-sound-container").removeClass("show-cover"), !$("#fullScreen").hasClass("active") && $(".web-sound-container").height() > 485) {
                var e = $(window).height() - 185;
                $(".player").height(e), $("#commentCanvas").height(e), $(".pause-area").height(e).show()
            }
            window.cm && window.cm.setBounds()
        }, readyToPlay: function (e) {
            if (index.mo.loadFlag++, $(".s_l").html(""), "iframe" == $("#mpi").data("loadtype")) switch (e) {
                case 1:
                    $("#s_l_1").html("声音加载完成~");
                    break;
                case 2:
                    $("#s_l_2").html("弹幕加载完成~");
                    break;
                case 3:
                    $("#s_l_3").html("图片加载完成~")
            }
            var t = index.browser.versions.iPad || /Version\/1[1-9].\d Safari\//.test(navigator.userAgent);
            if (3 == index.mo.loadFlag && index.mo.soundDemo) {
                if (index.mo.loadFlag = 0, 0 == index.mo.soundDemo.playState && "iframe" != $("#mpi").data("loadtype")) {
                    if (play.js.hideLoading(), !t) try {
                        index.mo.soundDemo.play(function (e) {
                            $("#mpi").click()
                        })
                    } catch (o) {
                        console.log(o)
                    }
                } else if (0 == index.mo.soundDemo.playState && "iframe" == $("#mpi").data("loadtype")) {
                    if (moTool.hideModalBox($("#loadmodal")), ("true" == $("#mpi").data("autoplay") || 1 == $("#mpi").data("autoplay")) && !t) try {
                        index.mo.soundDemo.play(function (e) {
                            $("#mpi").click()
                        })
                    } catch (o) {
                        console.log(o)
                    }
                    moTool.showModalBox($("#soundlikemodal"), {showBackground: !1}), $("#centerplaybtn").show()
                }
            } else ;
        }, checkPlaySupport: function (e) {
            return !0
        }, loadSound: function (e) {
            if (e) {
                play.js.checkPlaySupport(e.soundurl);
                var t = "";
                parseInt($("#mpi").data("userid")) !== parseInt($("#mpi").data("sounduserid")) && (t = '<span id="sound-report">举报/纠错</span>'), $("#pixelate-cover img").attr("src", R.utils.URLProtocolRemove(e.mosaic_url)).show(), $("#i_soundnumright").html("发布于：" + moTool.dateFormat(1e3 * parseInt(e.create_time)) + t), $("#sound-report").unbind("click").click(function () {
                    index.js.loadReport(e.id, "sound")
                }), document.title = e.soundstr, $("#sound-cover-info .cover-breadcrumb").html(e.breadcrumb), $("#sound-cover-info .cover-title").text(e.soundstr), $(".soundinfo .title").html("<span>" + play.boxStrLoad.escape(e.soundstr) + "</span>"), 1 == e.checked ? $(".soundinfo #i_soundnumleft .text-playtimes").html(moTool.formatCount(e.view_count)) : $(".soundinfo #i_soundnumleft .text-playtimes").html("--"), $(".soundinfo #i_soundnumleft .text-dmtimes").html(e.comment_count), $(".soundinfo #i_soundnumleft .text-catear").html(e.point), $(".soundinfo #i_soundnumleft .text-liketimes").html(e.uptimes.toString()), parseInt(e.point) > 0 && $("#feedme-btn .count").html("(" + R.utils.numFormat(e.point, 1e4, 1) + ")"), parseInt(e.uptimes) > 0 && $("#dz-btn .count").html("(" + R.utils.numFormat(e.uptimes, 1e4, 1) + ")");
                var o = $(".soundinfo-contanier .sound-intro .intro"), a = o.data("soundid");
                a != e.id && (o.html(e.intro ? moTool.replaceSoundIntroHtml(e.intro) : "暂无音频简介"), o.css("height", ""), o.height() > 70 ? (o.css("height", 70), $("#i_intro_showmore").show()) : $("#i_intro_showmore").hide(), $("#i_intro_showless").hide()), 1 == e.like ? $("#dzbtn-container").addClass("active") : $("#dzbtn-container").removeClass("active")
            }
        }, showCurrentSoundShare: function () {
            var e = $(".pld-sound.pld-sound-active"), t = e.data("soundid"),
                o = e.find(".playlist-sound-title .title").html() + " - UP 主：" + e.find(".playlist-sound-username").html(),
                a = e.data("cover");
            play.js.showSoundShare(t, o, a)
        }, showSoundShare: function (e, t, o) {
            var a = window.location.origin + "/sound/" + e, n = $("#share-modal"), i = n.find(".iframe-content");
            $(i[0]).val(a), $(i[1]).val('<iframe runat="server" src="https://www.missevan.com/soundiframe/' + e + '" width="100%" height="480px" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="yes"></iframe>'), $(i[2]).val('<iframe runat="server" src="https://www.missevan.com/soundiframe/' + e + '?type=small" width="240px" height="40px" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="yes"></iframe>'), setShareInfo(t, a, o), moTool.showModalBox($("#share-modal"), {showBackground: !1})
        }, applySoundEvent: function (e, t) {
            var o = new Date(1e3 * parseInt(e.vote_time)) <= Date.now(), a = e.do_vote ? "为它投个票吧" : "留下你的评论支持一下吧",
                n = o ? '<button class="btn-red vote"></button>' : '<span class="vote-disabled">活动尚未开始投票</span>';
            if ($("#player-vote-block").length) $("#player-vote-block a").attr("href", "/mevent/" + e.id).attr("title", e.title), $(".player-vote-block-cover").attr("src", e.cover), $(".player-vote-block-detail .title").text("这个作品正在参加《" + e.title + "》，" + a + "！"), $(".player-vote-block-detail button.vote, .player-vote-block-detail .vote-disabled").remove(), e.do_vote && $(n).insertAfter(".player-vote-block-detail .title"), $(".soundinfo-contanier #player-vote-block button.vote").unbind("click"); else {
                var i = '<div id="player-vote-block"><a href="/mevent/' + e.id + '" target="_blank" title="' + moTool.boardReplaceTxt(e.title) + '"><img class="player-vote-block-cover" src="' + e.cover + '" /></a><div class="player-vote-block-detail"><div class="title">这个作品正在参加《' + moTool.boardReplaceTxt(e.title) + "》，" + a + "！</div>" + (e.do_vote ? n : "") + "</div></div>";
                $(i).insertBefore(".sound-intro.soundblock")
            }
            var d = function (o) {
                var a = o || {};
                $.ajax({
                    type: "POST",
                    url: "/mevent/vote?event_id=" + e.id + "&id=" + t,
                    dataType: "json",
                    data: {token: a.token, session_id: a.session_id, sig: a.sig},
                    success: function (e) {
                        e.success ? R.components.toggleToast("投票成功") : e.code === ERROR_CODE_SLIDE_CHECK_REQUIRED ? R.components.SlideCheckModal.show(d) : e.code !== ERROR_CODE_LOGIN_REQUIRED && R.components.toggleToast(e.info)
                    }
                })
            };
            $(".soundinfo-contanier #player-vote-block button.vote").click(function () {
                d()
            })
        }, applyDramaEvent: function (e) {
            if ($(".player-event-alert").length) $(".player-event-alert .alert-msg").text(e.title), $(".event-alert").unbind("click"); else {
                var t = '<div class="player-event-alert"><div class="event-alert"><i class="alert-icon notifications"></i><div class="alert-msg">' + moTool.boardReplaceTxt(e.title) + '</div><i class="alert-icon double-right"></i></div></div>';
                $(t).insertBefore(".sound-intro.soundblock")
            }
            $(".event-alert").click(function () {
                R.utils.isAppLink(e.url) ? R.components.DownloadAppModal.show() : window.open(e.url, "_blank")
            })
        }, loadEventStatus: function (e, t) {
            var o = {SOUND: 0, DRAMA: 1}, a = o[t];
            $.ajax({
                url: "/mevent/inwork?id=" + e + "&type=" + a, dataType: "json", success: function (o) {
                    o.success && o.info ? "DRAMA" === t ? (play.js.applyDramaEvent(o.info), $("#player-vote-block").remove()) : (play.js.applySoundEvent(o.info, e), $(".player-event-alert").remove()) : $("#player-vote-block, .player-event-alert").remove()
                }
            })
        }, loadSoundDrama: function (e) {
            $("#player-drama-episodes .loading-wrap").show(), $.ajax({
                url: "/dramaapi/getdramabysound?sound_id=" + e, dataType: "json", success: function (t) {
                    if (t.success) {
                        var o = play.vars.ptab.list, a = o.get(e);
                        if (t.info.drama) {
                            var n = Object.assign({dramaId: t.info.drama.id}, a);
                            o.findandupdate(n)
                        }
                        if ($(".mplr").hasClass("playing") && 1 !== a.need_pay && play.js.addPlaytimes(e, t.info.drama), play.js.loadEventStatus(t.info.drama.id, "DRAMA"), t.info.current.type <= 2 ? (R.components.PlayerDramaBanner.init($("#drama-banner")[0], t.info), $(".drama-organization-container").hover(function () {
                            $(".drama-banner-popover").show()
                        }, function () {
                            $(".drama-banner-popover").hide()
                        }), $("#fullScreen").hasClass("active") || $("#drama-banner").show()) : $("#drama-banner").hide(), t.info.rewardable ? ($("#player-reward .title").length ? R.components.playerReward.update(t.info.drama) : R.components.PlayerReward.mountTo($("#player-reward")[0], {drama: t.info.drama}), $("#player-reward").show()) : $("#player-reward").empty().hide(), $(".pay-modal.pay-single").length > 0) {
                            var i = t.info.drama;
                            $('<button class="btn pay-submit" title="立即收听">立即收听</button>').insertAfter($(".pay-modal span")), $("button.btn.pay-submit").click(function () {
                                R.components.DramaPayList.show(i.id, i.name, t.info.episodes.episode, i.price, e)
                            })
                        }
                        "中文广播剧" === t.info.drama.catalog_name ? $(".cn-drama-link").css("display", "block") : $(".cn-drama-link").hide(), t.info.cvs.length > 0 ? ($(".sound-cv .cv-container").length > 0 ? R.components.playerCVList.update(t.info.cvs) : R.components.PlayerCVList.mountTo($(".sound-cv")[0], t.info.cvs), $(".sound-cv").show(), $("#lesscv").hide(), $("#lesscv").click(function () {
                            $(".cvs-container").removeClass("active"), $("#morecv").show(), $("#lesscv").hide()
                        }), $("#morecv").click(function () {
                            $(".cvs-container").addClass("active"), $("#morecv").hide(), $("#lesscv").show()
                        })) : $(".sound-cv").hide()
                    } else play.js.loadEventStatus(e, "SOUND"), $("#drama-banner").hide(), $(".sound-cv").hide(), $(".cn-drama-link").hide(), $("#player-reward").empty().hide()
                }
            })
        }, loadSoundUser: function (e) {
            e || (e = {id: 0, icon: "icon01.png", username: "", intro: "", soundnum: "", fansnum: ""});
            var t = /^https?:/.test(e.icon) ? R.utils.URLProtocolRemove(e.icon) : index.mo.mPath + "/avatars/" + e.icon,
                o = $(".sound-user .avatar");
            if (o.attr("href", "/" + e.id).attr("title", play.boxStrLoad.escape(e.username)).attr("style", "background-image:url(" + t + ")").show(), e.authenticated > 0) {
                var a = "";
                2 === e.authenticated ? a = " golden" : 3 === e.authenticated && (a = " blue"), o.html('<div class="topuservsmallicon' + a + '"></div>')
            } else o.html("");
            e.authenticated && $("#cover-img .sound-checking").remove(), $(".sound-user .user-info a.name").html(play.boxStrLoad.escape(e.username)), $(".sound-user .user-info a.name").attr("href", "/" + e.id).attr("title", play.boxStrLoad.escape(e.username)), $(".sound-user a.sendmessage").attr("href", "/mperson/message?toid=" + e.id).attr("title", "私信"), $(".sound-user .intro").html(e.intro ? moTool.boardReplaceTxt(e.intro) : "Ta 还没有简介哦~"), $(".sound-user .intro").attr("title", e.intro ? moTool.boardReplaceTxt(e.intro) : "Ta 还没有简介哦~"), $(".sound-user .intro").get(0).scrollHeight > 46 && ($(".sound-user .intro").append('<button class="btn-text btn-more">展开</button>'), $(".sound-user .intro .btn-more").click(function () {
                $(this).hasClass("active") ? ($(this).text("展开").removeClass("active").css({
                    position: "absolute",
                    top: 21
                }), $(".sound-user .intro").height(46)) : ($(this).text("收起").addClass("active").css({
                    position: "relative",
                    top: 0
                }), $(".sound-user .intro").height("auto"))
            })), $(".sound-user .user-data").html("投稿：" + e.soundnum + "&nbsp;&nbsp;&nbsp;粉丝：" + e.fansnum), $(".attention").data("attentionid", e.id), parseInt($("#mpi").data("userid")) == parseInt(e.id) ? ($(".sound-user .attention").hide(), $(".sound-user a.sendmessage").hide()) : ($(".sound-user .attention").show(), $(".sound-user a.sendmessage").show(), e.attention ? ($(".attention").data("type", 0), $(".sound-user .attention").html("已关注").attr("title", "取消关注").hover(function () {
                $(".sound-user .attention").html("取消关注")
            }, function () {
                $(".sound-user .attention").html("已关注")
            })) : ($(".attention").data("type", 1), $(".sound-user .attention").html("+&nbsp;关注").attr("title", "关注").hover(function () {
                "+&nbsp;关注" !== $(".sound-user .attention").html() && $(".sound-user .attention").html("+&nbsp;关注")
            })))
        }, loadSoundTags: function (e) {
            var t = "标签：";
            e && e.length > 0 ? $.each(e, function (e, o) {
                t += '<a href="/explore/' + o.id, t += '" target="_blank" title="' + moTool.boardReplaceTxt(o.name) + '">' + moTool.boardReplaceTxt(o.name), t += " </a>"
            }) : t = "暂无标签", $("#sound_tag").html(t)
        }, addInteractiveDramaModal: function () {
            var e = '<div class="interactive-drama-modal"><div class="interactive-drama-modal-content"><div class="title">请下载猫耳FM手机客户端</div><div class="info">该功能只能在手机客户端体验哦 ≖‿≖✧</div><div class="download-qr" style="background-image: url(' + index.mo.mPath + '/app/qrcode.png);"></div><div class="download-desc">扫描下载 APP</div></div></div>';
            $(".web-sound .interactive-drama-modal").length && $(".web-sound .interactive-drama-modal").remove(), $(".web-sound").append(e)
        }, addAppModal: function (e) {
            var t = '<div class="pay-modal pay-single"><div class="pay-modal-content"><div class="modal-pic magic"></div><span>仅需 ' + e + " 钻即可收听本音频</span></div></div>";
            $(".web-sound .pay-modal").length && $(".web-sound .pay-modal").remove(), $(".web-sound").append(t)
        }, addPayModal: function (e, t) {
            var o = '<div class="pay-modal"><div class="pay-modal-content"><div class="modal-pic magic"></div><span>本剧需支付 ' + e + ' 个钻石才能收听哦~</span><button class="btn pay-submit" title="立即收听">立即收听</button></div></div>',
                a = '<div class="pay-modal"><div class="pay-modal-content"><div class="modal-pic happy"></div><span>本剧封印已被解除~</span><button class="btn pay-submit" title="知道啦">知道啦</button></div></div>',
                n = '<div class="pay-modal"><div class="pay-modal-content"><div class="modal-pic sad"></div><span>钻石不够了啊</span><a href="/mperson/wallet" class="btn pay-submit" title="充值">充值</a></div></div>';
            $(".web-sound .pay-modal").length && $(".web-sound .pay-modal").remove(), $(".web-sound").append(o), $(".pay-modal button.pay-submit").click(function () {
                $(".pay-modal button").addClass("btn-loading").text(""), $.ajax({
                    type: "POST",
                    url: "/financial/buydrama",
                    dataType: "json",
                    data: {drama_id: t},
                    success: function (e) {
                        $(".pay-modal button").removeClass("btn-loading"), e.success ? ($(".pay-modal").remove(), $(".web-sound").append(a), $(".pay-modal button.pay-submit").click(function () {
                            $(this).addClass("btn-loading").text(""), play.vars.ptab.update($("#mp #mpi").data("soundid"), function () {
                                window.location.reload(!0)
                            })
                        })) : e.info.includes("余额不足") ? ($(".pay-modal").remove(), $(".web-sound").append(n)) : ($(".pay-modal button").text("立即收听"), e.code !== ERROR_CODE_LOGIN_REQUIRED && R.components.toggleToast(e.info))
                    },
                    error: function () {
                        $(".pay-modal button").removeClass("btn-loading").text("立即收听"), R.components.toggleToast("支付错误，请联系客服")
                    }
                })
            })
        }, swiftSound: function (e) {
            function t(e, t) {
                var o = e ? R.utils.URLProtocolRemove($("#mpi").data("cover")) : index.mo.coversMiniPath + index.mo.blankImg;
                $("#fullScreen").hasClass("active") ? $("#imageCanvas").html('<img src="' + o.replace("mini", "") + '"/>') : ($(".web-sound-container").addClass("show-cover"), $("#imageCanvas").html(""), $(".player").height(400), $("#commentCanvas").height(400), $(".pause-area").hide());
                var a = '<img src="' + o + '"/>';
                t || (a += '<div class="sound-checking"><span class="center">稿件审核中</span><span class="bottom">审核中的稿件他人无法看见，请耐心等待审核通过</span></div>'), $("#cover-img").html(a)
            }

            play.js.clearPlayer();
            var o;
            switch (e) {
                case"next":
                    o = $("#pld-sound-" + $("#mpi").data("soundid")).next().hasClass("pld-sound") ? $("#pld-sound-" + $("#mpi").data("soundid")).next() : $(".pld-sound").eq(0);
                    break;
                case"prev":
                    o = $("#pld-sound-" + $("#mpi").data("soundid")).prev().hasClass("pld-sound") ? $("#pld-sound-" + $("#mpi").data("soundid")).prev() : $(".pld-sound").eq(0);
                    break;
                case"current":
                    o = $("#pld-sound-" + $("#mpi").data("soundid"));
                    break;
                default:
                    o = "object" == typeof e ? e : $("#pld-sound-" + e)
            }
            parseInt($("#mpi").data("userid")) != parseInt($("#mpi").data("sounduserid")) && $("#bjbtn").hide(), $(".pld-sound").removeClass("pld-sound-active"), o.addClass("pld-sound-active");
            var a = o.data("soundid"), n = a;
            window.cm && window.cm.setBounds(), "iframe" == $("#mpi").data("loadtype") && (maxHeight = $(window).height() + "px"), $("#mobile-content").html(""),
            $(".web-sound").hasClass("web-sound-info") || new QRCode(document.getElementById("mobile-content"), {
                text: window.location.href,
                width: 140,
                height: 140,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: 1
            }), play.vars.ptab.current(n);
            var i = play.vars.ptab.list.get(n);
            1 === i.need_pay && $(".mplr").removeClass("playing").addClass("pause"), i || Raven.captureException("音频信息加载错误"), play.vars.ptab.update(n, function (e, a, n) {
                if (e && "abort" !== e && !a) return void Raven.captureException(e);
                if (parseInt(m) !== parseInt(a.id)) {
                    var i = o.prev();
                    i.length && (o.remove(), $(play.boxStrLoad.playlistSound(a)).insertAfter(i), o = $("#pld-sound-" + a.id), play.js.playlistSound(a.id))
                }
                o.addClass("pld-sound-active");
                var d = parseInt(o.data("checked")), s = parseInt(o.data("soundredirectid"));
                o.data("pay");
                s && (m = s);
                var r = $("#mp #mpi"), u = $("#mp .mpsa");
                r.data("sounduserid", o.data("sounduserid")), r.data("soundid", m);
                var l = o.data("videourl");
                r.data("videourl", l || ""), r.data("cover", o.data("cover")), r.removeClass("soundloaded");
                var c = $(".sound-intro .title");
                if (l ? c.hasClass("sound-mode") || $(".sound-intro .title").addClass("video-mode") : ($(".sound-intro .title").removeClass("video-mode").removeClass("sound-mode"), $(".player").removeClass("video-mode")), $(".mpcs").data("soundid", m), t(a.front_cover, d), a.pay_type > 0 && 2 !== a.need_pay || 2 === a.type ? ($("#mp .mplr").css({left: 0}), $("#mp .mpsa").text("--:--"), 2 === a.type ? play.js.addInteractiveDramaModal() : 1 === a.pay_type ? play.js.addAppModal(a.num) : play.js.addPayModal(a.num, a.drama_id), $.removeData(r[0], "soundurl"), $.removeData(r[0], "soundurl32"), $.removeData(r[0], "soundurl64"), $.removeData(r[0], "soundurl128")) : ($(".web-sound .pay-modal").remove(), $(".web-sound .interactive-drama-modal").remove(), u.html(play.soundBox.getTime(a.duration)), r.data("duration", a.duration), r.data("soundurl", a.soundurl), r.data("soundurl32", a.soundurl_32), r.data("soundurl64", a.soundurl_64), r.data("soundurl128", a.soundurl_128)), play.js.loadSound(a), n && n.user && play.js.loadSoundUser(n.user), a && a.id) {
                    var m = a.redirect_id || a.id;
                    play.js.loadSoundDrama(m), $("#mpi").data("soundid", m), R.components.dmList && !a.redirect_id ? R.components.dmList.loadData($("#mpi").data("soundid"), $("#mpi").data("sounduserid")) : a.redirect_id && play.js.readyToPlay(2)
                }
                if (n && play.js.loadSoundTags(n.tags), a && !a.forbidden_comment) {
                    var p = $("#comm-btn .nav-comment-count");
                    if (a.comments_num) {
                        var f = a.comments_num > 999 ? "999+" : a.comments_num;
                        p.text(f).addClass("notice")
                    } else p.text("").removeClass("notice");
                    var h = $(".dm-navbar #comm-btn");
                    if (h.data("soundid", m), h.hasClass("active") || h.click(), play.vars.comment) play.vars.comment.loadData(a.id); else {
                        var v = 1;
                        play.vars.comment = window.jtl.initComments({
                            eId: a.id,
                            type: v,
                            smallPagination: !0,
                            showSubcomments: !0,
                            enableDelete: !0,
                            recommend: !0,
                            enableDislike: !0,
                            containerId: "comm-li"
                        })
                    }
                    $(".sound-playlist").show()
                } else $(".sound-playlist").hide();
                play.js.loadSoundRecommend(a), play.soundBox.startLoad($("#mpi").data("soundurl"), $("#mpi").data("soundurl64"), 1, index.mo.soundPath)
            }), play.vars.playlistapi.scrollToElement($(".pld-sound.pld-sound-active").first(), !1)
        }, showLoading: function () {
            if ($("#fullScreen").hasClass("active") ? ($("#imageCanvas").html('<img src="' + ($("#mpi").data("cover") ? $("#mpi").data("cover").replace("mini", "") : (index.mo.coversMiniPath + index.mo.blankImg).replace("mini", "")) + '"/>'), $(".web-sound-container").removeClass("show-cover")) : ($(".player").height(400), $("#commentCanvas").height(400), $(".pause-area").hide()), $("#mpi").addClass("onloading"), $(".web-sound-container").addClass("onloading"), play.browser.ie && parseInt(play.browser.ie) < 10 && !play.js.ani_loading_t) {
                var e = 0, t = $("#c_c #an-girl-loading .an-girl");
                t.css("background-position", "0 0"), play.js.ani_loading_t = setInterval(function () {
                    e += 100, e >= 1200 && (e = 0), t.css("background-position", "-" + e.toString() + "px 0")
                }, 100)
            }
        }, hideLoading: function () {
            $("#mpi").removeClass("onloading"), $(".web-sound-container").removeClass("onloading"), play.js.ani_loading_t && (clearInterval(play.js.ani_loading_t), play.js.ani_loading_t = null)
        }, checkBrowser: function () {
            var e, t = {}, o = navigator.userAgent.toLowerCase();
            (e = o.match(/rv:([\d.]+)\) like gecko/)) ? t.ie = e[1] : (e = o.match(/msie ([\d.]+)/)) ? t.ie = e[1] : (e = o.match(/firefox\/([\d.]+)/)) ? t.firefox = e[1] : (e = o.match(/chrome\/([\d.]+)/)) ? t.chrome = e[1] : (e = o.match(/opera.([\d.]+)/)) ? t.opera = e[1] : (e = o.match(/version\/([\d.]+).*safari/)) ? t.safari = e[1] : 0, play.browser = t, parseInt(t.ie) < 10
        }, listSoundPlay: function (e, t) {
            e.preventDefault(), $("#playlist-container").hide(), $("#playlist-btn").removeClass("active"), play.vars.ptab.go(t)
        }, changeSoundImage: function (e) {
            if (!(0 === index.mo.dmImages.length || e < index.mo.dmImages[0][1])) {
                var t = index.mo.dmImages[0];
                $.each(index.mo.dmImages, function (o, a) {
                    return 0 === o && 1 === index.mo.dmImages.length && e > a[1] ? (play.js.insertImage(a[0]), !1) : 0 === o || (e > t[1] && e < a[1] ? (play.js.insertImage(t[0]), !1) : o === index.mo.dmImages.length - 1 && e > a[1] ? (play.js.insertImage(a[0]), !1) : (t = a, !0))
                })
            }
        }, changeSoundPosition: function (e) {
            function t() {
                index.mo.soundDemo.resume()
            }

            var o = null, a = e;
            index.mo.soundDemo && (index.mo.soundDemo.paused ? (a = 0 === a ? 2.1 : a, index.mo.soundDemo.setPosition(a)) : 1 === index.mo.soundDemo.playState ? (index.mo.soundDemo.pause(), index.mo.soundDemo.setPosition(a), o && (clearTimeout(o), o = null), o = setTimeout(t, 100)) : (index.mo.soundDemo.play(), index.mo.soundDemo.setPosition(a)), $(".mpsp").html(play.soundBox.getTime(index.mo.soundDemo.position))), window.cm && (window.cm.clear(), window.cm.seek(a))
        }, bindDraggableProgressBar: function () {
            function e() {
                var e = $(".mplr"), t = $(".mpo"), o = $(".mpl"), a = t.width();
                e.hasClass("draggable") || e.draggable({
                    axis: "x", containment: $(".mpo"), drag: function (e, t) {
                        var n = $("#mpi").data("duration"), i = t.position.left / a * 100;
                        o.css("width", i + "%");
                        var d = t.position.left / a * n;
                        d >= n - 1e3 && (d = n - 1e3), $(".mpsp").html(play.soundBox.getTime(d)), play.js.changeSoundImage(d)
                    }, stop: function (t, n) {
                        var i = $("#mpi").data("duration"), d = n.position.left / a * 100;
                        o.css("width", d + "%"), e.css("left", d + "%");
                        var s = n.position.left / a * i;
                        s >= i - 1e3 && (s = i - 1e3), play.js.changeSoundPosition(s), play.js.changeSoundImage(s)
                    }
                })
            }

            function t() {
                o && (clearTimeout(o), o = null), o = setTimeout(function () {
                    $(".mplr").draggable("destroy"), e()
                }, 500)
            }

            var o = null;
            e(), $(window).resize(R.utils.lodash.throttle(t, 500))
        }, loadPlayer: function () {
            function e() {
                var e = parseInt($(".slide-image-active").data("time")),
                    t = play.soundBox.calculateTime(parseInt($("#soundimagetime-minutes").val()), parseInt($("#soundimagetime-seconds").val()), parseInt($("#soundimagetime-msec").val()));
                e != t ? ($("#soundimagetime").addClass("editing"), $("#soundimagetime-check").addClass("editing"), t > 0 ? $(".mpf.editing").css("left", 100 * t / $(".mpi").data("duration") + "%") : alert("时间不合法")) : ($("#soundimagetime").removeClass("editing"), $("#soundimagetime-check").removeClass("editing"))
            }

            play.js.checkBrowser(), play.vars.playerType = "web", play.vars.ptab = new PlayerTab;
            var t = $("#mpi"), o = $("#mpiprev"), a = $("#mpinext"), n = $("#mpiloop"), i = $(".mpcf"),
                d = $(".mpcfu "), s = $("#dmb"), r = $("#dmcnum"), u = $("#picnum"), l = $("#imagenum"), c = $("#dmcc"),
                m = $("#picc"), p = ($("#comm-btn"), $(".dm-navbar #pic-btn")),
                f = ($(".soundimage-delete"), $("#s_l")), h = $("#s_l_p"),
                v = ($("#userb"), $("#feedme-btn"), $("#slreplay")),
                g = ($("#mobile-btn"), $("#scbtn-modal"), $("#modal-replay")),
                y = ($("#showcomment"), $("#showplay"), $("#fullScreen"));
            play.vars.playlist = $("#playlist-container .content").jScrollPane(), play.vars.playlistapi = play.vars.playlist.data("jsp"), $("#episode-btn").click(function () {
                $("#info-btn").removeClass("active"), $(this).addClass("active"), $(".episodes").addClass("active"), $(".drama-intro").removeClass("active")
            }), $("#info-btn").click(function () {
                $("#episode-btn").removeClass("active"), $(this).addClass("active"), $(".drama-intro").addClass("active"), $(".episodes").removeClass("active")
            }), $("#playlist-container").click(function (e) {
                e.stopPropagation()
            }), $("#playlist-btn").click(function () {
                $(this).hasClass("active") ? ($("#playlist-container").hide(), $(this).removeClass("active")) : ($("#playlist-container").show(), $(this).addClass("active")), play.vars.playlistapi.reinitialise(), $(".pld-sound.pld-sound-active").first().length && play.vars.playlistapi.scrollToElement($(".pld-sound.pld-sound-active").first(), !1)
            }), play.vars.ptab.on("error", function (e) {
                "abort" !== e && (e.code === R.utils.ERROR_CODE.USER_BANNED ? ($("#mp #mpi").data("banned", !0), play.js.hideLoading(), R.components.toggleToast(e.message)) : Raven.captureException(e))
            }), play.vars.ptab.on("loading", function (e, t, o) {
                o || play.js.showLoading()
            }), play.vars.ptab.on("add", function (e, t) {
                var o = play.boxStrLoad.playlistSound(e);
                play.vars.playlistapi.getContentPane().append(o);
                var a = $(".playlist-sound");
                if (a.length > 500) for (var n = a.length - 500, i = 0; i < n; ++i) $(a[i]).remove();
                play.vars.playlistapi.reinitialise(), $(".playlist-sound").length < 100 ? $("#playlist-btn .count").text($(".playlist-sound").length) : $("#playlist-btn .count").text("99+"), $("#playlist-btn .notice").text("+1"), $("#playlist-btn .notice").show(), play.vars.noticeinterval && clearTimeout(play.vars.noticeinterval), play.vars.noticeinterval = setTimeout(function () {
                    $("#playlist-btn .notice").fadeOut()
                }, 3e3), play.js.playlistSound(e.id)
            }), play.vars.ptab.on("play", function (e, t) {
                soundManager.stopAll(), play.js.showLoading(), soundManager.stopAll(), $("#mp #mpi").data("soundid") != e.id && play.js.swiftSound(e.id)
            }), play.vars.ptab.on("replace", function (e) {
                play.js.showLoading();
                var t = "";
                $.each(e, function (e, o) {
                    t += play.boxStrLoad.playlistSound(o)
                }), play.vars.playlistapi.getContentPane().html(t), play.vars.playlistapi.reinitialise(), $(".playlist-sound").length < 100 ? $("#playlist-btn .count").text($(".playlist-sound").length) : $("#playlist-btn .count").text("99+"), $("#playlist-btn .notice").text("已替换" + $(".playlist-sound").length + "首音频"), $("#playlist-btn .notice").show(), play.vars.noticeinterval && clearTimeout(play.vars.noticeinterval), play.vars.noticeinterval = setTimeout(function () {
                    $("#playlist-btn .notice").fadeOut()
                }, 3e3), play.js.playlistSound()
            }), play.vars.ptab.on("off", function (e) {
                $("#mpi").hasClass("mpip") && $("#mpi").click()
            }), play.vars.ptab.init(function (e, t) {
                var o = "";
                $.each(t, function (e, t) {
                    o += play.boxStrLoad.playlistSound(t)
                }), play.vars.playlistapi.getContentPane().html(o), $(".playlist-sound").length < 100 ? $("#playlist-btn .count").text($(".playlist-sound").length) : $("#playlist-btn .count").text("99+"), play.vars.playlistapi.reinitialise(), play.js.playlistSound()
            }), $("#playlist-container .clearall").click(function () {
                play.vars.ptab.list.clear(), play.vars.playlistapi.getContentPane().html(""), play.vars.playlistapi.reinitialise(), $("#playlist-btn .notice").text("M音已移除"), $(".playlist-sound").length < 100 ? $("#playlist-btn .count").text($(".playlist-sound").length) : $("#playlist-btn .count").text("99+"), $("#playlist-btn .notice").show(), play.vars.noticeinterval && clearTimeout(play.vars.noticeinterval), noticeinterval = setTimeout(function () {
                    $("#playlist-btn .notice").fadeOut()
                }, 3e3)
            }), $("#playlist-container .addall").click(function () {
                var e = JSON.parse(store.get("playlist"));
                return e.length <= 0 ? void R.components.toggleToast("播放列表空空的 无法收藏呢 QwQ") : (favFrame.inited || favFrame.init(), favFrame.bindSound(e.map(function (e) {
                    return e.id
                })), void favFrame.show())
            }), $(".pause-area").click(function (e) {
                t.click()
            }), t.click(function () {
                if (void 0 == index.mo.soundDemo) return void play.soundBox.startLoad($("#mpi").data("soundurl"), $("#mpi").data("soundurl64"), 1, index.mo.soundPath);
                if ($(this).hasClass("mpir") || $(this).hasClass("mpiframe")) return index.mo.soundDemo.setPosition(0), void index.mo.soundDemo.play();
                if (0 === index.mo.soundDemo.playState) {
                    if (!play.js.checkPlaySupport(index.mo.soundDemo.url)) return;
                    index.mo.soundDemo.play()
                } else $(this).hasClass("mpip") ? index.mo.soundDemo.pause() : index.mo.soundDemo.resume()
            }), t.click(), play.js.registerFullScreenChangeEvent(), y.click(play.js.fullScreenBtnHandle), o.click(function () {
                var e = index.mo.soundDemo;
                e && e.stop(), play.js.swiftSound("prev")
            }), a.click(function () {
                var e = index.mo.soundDemo;
                e && e.stop(), play.js.swiftSound("next")
            }), $(".sound-intro .title .btn-mode-switcher").click(function () {
                var e = $(this), t = e.parent();
                e.hasClass("sound-btn") ? ($(".player").removeClass("video-mode"), t.removeClass("video-mode").addClass("sound-mode")) : t.removeClass("sound-mode").addClass("video-mode"), play.js.swiftSound("current")
            }), s.click(function () {
                $(this).parent().hasClass("prc") ? $(this).parent().removeClass("prc") : $(this).parent().addClass("prc")
            }), play.soundBox.bindVolumeController(), i.click(function () {
                d.is(":visible") || (d.show(), bindDocument())
            }), n.click(function () {
                $(this).hasClass("mpilooppl") ? ($(this).removeClass("mpilooppl"), $(this).addClass("mpiloopa"), store.set("loop", "mpiloopa"), $("#loopMessage").html("单曲循环"), $(this).attr("title", "单曲循环")) : $(this).hasClass("mpiloopa") ? ($(this).removeClass("mpiloopa"), $(this).addClass("mpiplaypl"), store.set("loop", "mpiplaypl"), $("#loopMessage").html("列表播放"), $(this).attr("title", "列表播放")) : $(this).hasClass("mpiplaypl") ? ($(this).removeClass("mpiplaypl"), $(this).addClass("mpilooprand"), store.set("loop", "mpilooprand"), $("#loopMessage").html("随机播放"), $(this).attr("title", "随机播放")) : $(this).hasClass("mpilooprand") && ($(this).removeClass("mpilooprand"), $(this).addClass("mpilooppl"), store.set("loop", "mpilooppl"), $("#loopMessage").html("列表循环"), $(this).attr("title", "列表循环")), $("#loopMessage").show(), play.vars.loopmessagetime && clearTimeout(play.vars.loopmessagetime), play.vars.loopmessagetime = setTimeout(function () {
                    $("#loopMessage").fadeOut()
                }, 3e3)
            }), g.click(function () {
                t.click(), moTool.hideModalBox($("#soundlikemodal"))
            }), v.click(function () {
                t.click(), moTool.hideModalBox($("#soundlikemodal"))
            }), $("#sound-mpcr-container").click(function () {
                favFrame.inited || favFrame.init(), favFrame.bindSound($("#mpi").data("soundid")), favFrame.show()
            }), h.click(function () {
                $(".loading").show(), $(this).hide(), index.mo.soundDemo.play()
            }), index.browser.versions.iPad && (h.show(), f.hide(), $(".loading").hide()), play.strBox.loadSendDm(), moTool.navtabs(), r.click(function () {
                u.removeClass("dmch"), l.removeClass("dmch"), $(this).addClass("dmch"), c.show(), m.hide(), $imagecId.hide()
            }), u.click(function () {
                r.removeClass("dmch"), l.removeClass("dmch"), $(this).addClass("dmch"), c.hide(), $imagecId.hide(), m.show()
            }), l.click(function () {
                return !$(this).hasClass("dmch") && (r.removeClass("dmch"), u.removeClass("dmch"), $(this).addClass("dmch"), c.hide(), $imagecId.show(), void m.hide())
            }), p.click(function () {
                $("#picc-li #picc .lazy-ajax").lazyload({failure_limit: 60})
            }), $(document).keydown(function (e) {
                var t = e.keyCode || e.which || e.charCode;
                if (32 === t || 37 <= t && t <= 40 && (e.altKey || e.shiftKey)) {
                    if ($("#mpin").is(":focus")) return;
                    var o = e.target.tagName ? e.target.tagName.toLowerCase() : "";
                    if ("input" === o || "textarea" === o) return;
                    e.preventDefault();
                    var a = index.mo.soundDemo;
                    switch (t) {
                        case 32:
                            $("#mpi").click();
                            break;
                        case 38:
                        case 40:
                            var n = store.get("volume"), i = e.shiftKey ? 5 : 10;
                            38 === t ? play.soundBox.updateVolume(n + i) : play.soundBox.updateVolume(n - i);
                            break;
                        case 37:
                            e.shiftKey ? a && a.setPosition(a.position - 1e3) : $("#mpiprev").click();
                            break;
                        case 39:
                            e.shiftKey ? a && a.setPosition(a.position + 1e3) : $("#mpinext").click()
                    }
                }
            }), $("#tsbtn-container").click(function () {
                var e = {sound_id: t.data("soundid")}, o = $("#mpi").data("ablumid");
                o && "sound" !== o && (e.albumid = albumid), $.ajax({
                    type: "POST",
                    url: "/sound/ts",
                    dataType: "json",
                    data: e,
                    success: function (e) {
                        if (e.error && ~e.error.indexOf("登录")) return void moTool.showModalBox($("#loginmodal"), {showBackground: !1});
                        var t = document.getElementById("tsbtn-container").getBoundingClientRect(),
                            o = t.height + t.top, a = e.success || e.error || "投食出现错误";
                        if (e.success) {
                            var n = e.successVal.count || 0;
                            n ? $("#feedme-btn .count").html("(" + R.utils.numFormat(n, 1e4, 1) + ")") : $("#feedme-btn .count").html("(1)"), R.components.toggleToast(a, "body", o)
                        } else R.components.toggleToast(e.error, "body", o)
                    }
                })
            }), $("#download-container").click(function () {
                $(".playlist-sound.pld-sound-active .down").click()
            }), $("#dzbtn-container").click(function () {
                var e = $(this).hasClass("active") ? 0 : 1;
                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: "/person/ChangeSoundStatus",
                    data: {soundid: parseInt(t.data("soundid")), like: e},
                    success: function (t) {
                        if (t.success) {
                            var o = t.info.uptimes || 0;
                            e ? ($("#dzbtn-container").addClass("active"), $("#dz-btn .count").html("(" + R.utils.numFormat(o, 1e4, 1) + ")")) : ($("#dzbtn-container").removeClass("active"), o ? $("#dz-btn .count").html("(" + R.utils.numFormat(o, 1e4, 1) + ")") : $("#dz-btn .count").html(""))
                        } else t.code !== ERROR_CODE_LOGIN_REQUIRED && R.components.toggleToast(t.error || t.info)
                    }
                })
            }), $("#soundimagetime-minutes").keyup(function () {
                e()
            }), $("#soundimagetime-seconds").keyup(function () {
                e()
            }), $("#soundimagetime-msec").keyup(function () {
                e()
            }), $("#soundimagetime-check").click(function () {
                if ($(this).hasClass("editing")) {
                    var e = parseInt($("#soundimagetime-minutes").val()),
                        t = parseInt($("#soundimagetime-seconds").val()), o = parseInt($("#soundimagetime-msec").val()),
                        a = play.soundBox.calculateTime(e, t, o) / 1e3, n = $(this).parents(".mpf").data("id"),
                        i = $(".mpf.soundimg" + n).data("time");
                    moTool.postAjax({
                        url: "/sound/changeimagetime",
                        value: {map_id: n, time: a},
                        callBack: function (e) {
                            $(".sound-image-single.soundimg" + n).data("time", 1e3 * a), $(".mpf.soundimg" + n).data("time", 1e3 * a), $(".mpf.soundimg" + n).removeClass("mpf" + i), $(".mpf.soundimg" + n).addClass("mpf" + 1e3 * a), $(".mpf.soundimg" + n).css("left", 1e5 * a / $(".mpi").data("duration") + "%"), $("#soundimagetime").removeClass("editing"), $("#soundimagetime-check").removeClass("editing");
                            var t = null;
                            $.each($(".mpf"), function (e, o) {
                                $(o).data("time") < 1e3 * a && (t = o)
                            }), t ? $(t).after($(".mpf.soundimg" + n)) : $(".mpf.soundimg" + n).parent().prepend($(".mpf.soundimg" + n))
                        }
                    })
                }
                return !1
            }), $(".attention").click(function () {
                return $this = $(this), $this.html("").css({"pointer-events": "none"}).addClass("btn-loading"), moTool.postAjax({
                    url: "/person/ChangeAttention",
                    value: {attentionid: $this.data("attentionid"), type: $this.data("type")},
                    callBack: function (e) {
                        $this.removeClass("btn-loading").css({"pointer-events": "auto"}), e.success && (1 == $this.data("type") ? ($this.data("type", 0), $this.html("已关注").attr("title", "取消关注").hover(function () {
                            $this.html("取消关注")
                        }, function () {
                            $this.html("已关注")
                        })) : ($this.data("type", 1), $this.html("+&nbsp关注"), $this.attr("title", "关注").hover(function () {
                            "+&nbsp关注" !== $this.html() && $this.html("+&nbsp关注")
                        })))
                    },
                    showLoad: !1
                }), !1
            })
        }, loadDemo: function () {
            function e() {
                $(document).bind("click", function (e) {
                    var t = $(e.target);
                    0 === t.closest(".mpcf").length && ($(".mpcfu").hide(), $(document).unbind("click"))
                })
            }

            function t() {
                $(this).addClass("mpiloopa"), $(this).one("click", o)
            }

            function o() {
                $(this).removeClass("mpiloopa"), $(this).one("click", t)
            }

            "iframe" === $("#mpi").data("loadtype") && (play.vars.playType = "iframe", play.soundBox.startLoad($("#mpi").data("soundurl"), $("#mpi").data("soundurl64"), 1, index.mo.soundPath), moTool.showModalBox($("#loadmodal"), {
                showClose: !1,
                showBackground: !1
            }));
            var a = $("#mpi"), n = $("#mpiloop"), i = $(".mpcf"), d = $(".mpcfu"), s = $("#s_l"), r = $("#s_l_p"),
                u = $("#slreplay"), l = $("#modal-replay"), c = $("#fullScreen");
            a.click(function () {
                return void 0 === index.mo.soundDemo ? void play.soundBox.startLoad($("#mpi").data("soundurl"), $("#mpi").data("soundurl64"), 1, index.mo.soundPath) : $(this).hasClass("mpir") || $(this).hasClass("mpiframe") ? (index.mo.soundDemo.setPosition(0), void index.mo.soundDemo.play()) : void ($(this).hasClass("mpip") ? index.mo.soundDemo.pause() : index.mo.soundDemo.resume())
            }), play.js.registerFullScreenChangeEvent(), c.click(play.js.fullScreenBtnHandle), play.soundBox.bindVolumeController(), i.click(function () {
                d.is(":visible") || (d.show(), e())
            }), n.one("click", t), l.click(function () {
                a.click(), moTool.hideModalBox($("#soundlikemodal"))
            }), u.click(function () {
                a.click(), moTool.hideModalBox($("#soundlikemodal"))
            }), r.click(function () {
                $(".loading").show(), $(this).hide(), index.mo.soundDemo.play()
            }), index.browser.versions.iPad && (r.show(), s.hide(), $(".loading").hide(), a.click(function () {
                index.mo.soundDemo && 0 === index.mo.soundDemo.playState && index.mo.soundDemo.play()
            }))
        }, addPlaytimes: function (e, t) {
            var o, a = e || $("#mpi").data("soundid");
            if (t) o = t.id; else {
                var n = play.vars.ptab.list;
                o = n.get(a).dramaId
            }
            if (![246597, 223692, 75854].includes(a)) {
                var i = "/sound/addplaytimes?sound_id=" + a;
                o && (i += "&drama_id=" + o), moTool.postAjax({url: i, showLoad: !1})
            }
        }
    }
};
!function () {
    if (!Object.defineProperty || !function () {
        try {
            return Object.defineProperty({}, "x", {}), !0
        } catch (e) {
            return !1
        }
    }()) {
        var e = Object.defineProperty;
        Object.defineProperty = function (t, o, a) {
            if (e) try {
                return e(t, o, a)
            } catch (n) {
            }
            if (t !== Object(t)) throw TypeError("Object.defineProperty called on non-object");
            return Object.prototype.__defineGetter__ && "get" in a && Object.prototype.__defineGetter__.call(t, o, a.get), Object.prototype.__defineSetter__ && "set" in a && Object.prototype.__defineSetter__.call(t, o, a.set), "value" in a && (t[o] = a.value), t
        }
    }
}(), function (e) {
    function t() {
        try {
            return s in e && e[s]
        } catch (t) {
            return !1
        }
    }

    function o(e) {
        return function () {
            var t = Array.prototype.slice.call(arguments, 0);
            t.unshift(n), u.appendChild(n), n.addBehavior("#default#userData"), n.load(s);
            var o = e.apply(i, t);
            return u.removeChild(n), o
        }
    }

    function a(e) {
        return e.replace(/^d/, "___$&").replace(m, "___")
    }

    var n, i = {}, d = e.document, s = "localStorage", r = "script";
    if (i.disabled = !1, i.set = function (e, t) {
    }, i.get = function (e) {
    }, i.remove = function (e) {
    }, i.clear = function () {
    }, i.transact = function (e, t, o) {
        var a = i.get(e);
        null == o && (o = t, t = null), "undefined" == typeof a && (a = t || {}), o(a), i.set(e, a)
    }, i.getAll = function () {
    }, i.forEach = function () {
    }, i.serialize = function (e) {
        return JSON.stringify(e)
    }, i.deserialize = function (e) {
        if ("string" == typeof e) try {
            return JSON.parse(e)
        } catch (t) {
            return e || void 0
        }
    }, t()) n = e[s], i.set = function (e, t) {
        return void 0 === t ? i.remove(e) : (n.setItem(e, i.serialize(t)), t)
    }, i.get = function (e) {
        return i.deserialize(n.getItem(e))
    }, i.remove = function (e) {
        n.removeItem(e)
    }, i.clear = function () {
        n.clear()
    }, i.getAll = function () {
        var e = {};
        return i.forEach(function (t, o) {
            e[t] = o
        }), e
    }, i.forEach = function (e) {
        for (var t = 0; t < n.length; t++) {
            var o = n.key(t);
            e(o, i.get(o))
        }
    }; else if (d.documentElement.addBehavior) {
        var u, l;
        try {
            l = new ActiveXObject("htmlfile"), l.open(), l.write("<" + r + ">document.w=window</" + r + '><iframe src="/favicon.ico"></iframe>'), l.close(), u = l.w.frames[0].document, n = u.createElement("div")
        } catch (c) {
            n = d.createElement("div"), u = d.body
        }
        var m = new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]", "g");
        i.set = o(function (e, t, o) {
            return t = a(t), void 0 === o ? i.remove(t) : (e.setAttribute(t, i.serialize(o)), e.save(s), o)
        }), i.get = o(function (e, t) {
            return t = a(t), i.deserialize(e.getAttribute(t))
        }), i.remove = o(function (e, t) {
            t = a(t), e.removeAttribute(t), e.save(s)
        }), i.clear = o(function (e) {
            var t = e.XMLDocument.documentElement.attributes;
            e.load(s);
            for (var o, a = 0; o = t[a]; a++) e.removeAttribute(o.name);
            e.save(s)
        }), i.getAll = function (e) {
            var t = {};
            return i.forEach(function (e, o) {
                t[e] = o
            }), t
        }, i.forEach = o(function (e, t) {
            for (var o, a = e.XMLDocument.documentElement.attributes, n = 0; o = a[n]; ++n) t(o.name, i.deserialize(e.getAttribute(o.name)))
        })
    }
    try {
        var p = "__storejs__";
        i.set(p, p), i.get(p) != p && (i.disabled = !0), i.remove(p)
    } catch (c) {
        i.disabled = !0
    }
    i.enabled = !i.disabled, "undefined" != typeof module && module.exports && this.module !== module ? module.exports = i : "function" == typeof define && define.amd ? define(i) : e.store = i
}(Function("return this")());
var swfobject = function () {
    function e() {
        if (!U) {
            try {
                var e = j.getElementsByTagName("body")[0].appendChild(v("span"));
                e.parentNode.removeChild(e)
            } catch (t) {
                return
            }
            U = !0;
            for (var o = F.length, a = 0; a < o; a++) F[a]()
        }
    }

    function t(e) {
        U ? e() : F[F.length] = e
    }

    function o(e) {
        if (typeof A.addEventListener != S) A.addEventListener("load", e, !1); else if (typeof j.addEventListener != S) j.addEventListener("load", e, !1); else if (typeof A.attachEvent != S) g(A, "onload", e); else if ("function" == typeof A.onload) {
            var t = A.onload;
            A.onload = function () {
                t(), e()
            }
        } else A.onload = e
    }

    function a() {
        E ? n() : i()
    }

    function n() {
        var e = j.getElementsByTagName("body")[0], t = v(M);
        t.setAttribute("type", L);
        var o = e.appendChild(t);
        if (o) {
            var a = 0;
            !function () {
                if (typeof o.GetVariable != S) {
                    var n = o.GetVariable("$version");
                    n && (n = n.split(" ")[1].split(","), W.pv = [parseInt(n[0], 10), parseInt(n[1], 10), parseInt(n[2], 10)])
                } else if (a < 10) return a++, void setTimeout(arguments.callee, 10);
                e.removeChild(t), o = null, i()
            }()
        } else i()
    }

    function i() {
        var e = V.length;
        if (e > 0) for (var t = 0; t < e; t++) {
            var o = V[t].id, a = V[t].callbackFn, n = {success: !1, id: o};
            if (W.pv[0] > 0) {
                var i = h(o);
                if (i) if (!y(V[t].swfVersion) || W.wk && W.wk < 312) if (V[t].expressInstall && s()) {
                    var l = {};
                    l.data = V[t].expressInstall, l.width = i.getAttribute("width") || "0", l.height = i.getAttribute("height") || "0", i.getAttribute("class") && (l.styleclass = i.getAttribute("class")), i.getAttribute("align") && (l.align = i.getAttribute("align"));
                    for (var c = {}, m = i.getElementsByTagName("param"), p = m.length, f = 0; f < p; f++) "movie" != m[f].getAttribute("name").toLowerCase() && (c[m[f].getAttribute("name")] = m[f].getAttribute("value"));
                    r(l, c, o, a)
                } else u(i), a && a(n); else b(o, !0), a && (n.success = !0, n.ref = d(o), a(n))
            } else if (b(o, !0), a) {
                var v = d(o);
                v && typeof v.SetVariable != S && (n.success = !0, n.ref = v), a(n)
            }
        }
    }

    function d(e) {
        var t = null, o = h(e);
        if (o && "OBJECT" == o.nodeName) if (typeof o.SetVariable != S) t = o; else {
            var a = o.getElementsByTagName(M)[0];
            a && (t = a)
        }
        return t
    }

    function s() {
        return !q && y("6.0.65") && (W.win || W.mac) && !(W.wk && W.wk < 312)
    }

    function r(e, t, o, a) {
        q = !0, C = a || null, k = {success: !1, id: o};
        var n = h(o);
        if (n) {
            "OBJECT" == n.nodeName ? (x = l(n), _ = null) : (x = n, _ = o), e.id = P, (typeof e.width == S || !/%$/.test(e.width) && parseInt(e.width, 10) < 310) && (e.width = "310"), (typeof e.height == S || !/%$/.test(e.height) && parseInt(e.height, 10) < 137) && (e.height = "137"), j.title = j.title.slice(0, 47) + " - Flash Player Installation";
            var i = W.ie && W.win ? "ActiveX" : "PlugIn",
                d = "MMredirectURL=" + A.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + i + "&MMdoctitle=" + j.title;
            if (typeof t.flashvars != S ? t.flashvars += "&" + d : t.flashvars = d, W.ie && W.win && 4 != n.readyState) {
                var s = v("div");
                o += "SWFObjectNew", s.setAttribute("id", o), n.parentNode.insertBefore(s, n), n.style.display = "none", function () {
                    4 == n.readyState ? n.parentNode.removeChild(n) : setTimeout(arguments.callee, 10)
                }()
            }
            c(e, t, o)
        }
    }

    function u(e) {
        if (W.ie && W.win && 4 != e.readyState) {
            var t = v("div");
            e.parentNode.insertBefore(t, e), t.parentNode.replaceChild(l(e), t), e.style.display = "none", function () {
                4 == e.readyState ? e.parentNode.removeChild(e) : setTimeout(arguments.callee, 10)
            }()
        } else e.parentNode.replaceChild(l(e), e)
    }

    function l(e) {
        var t = v("div");
        if (W.win && W.ie) t.innerHTML = e.innerHTML; else {
            var o = e.getElementsByTagName(M)[0];
            if (o) {
                var a = o.childNodes;
                if (a) for (var n = a.length, i = 0; i < n; i++) 1 == a[i].nodeType && "PARAM" == a[i].nodeName || 8 == a[i].nodeType || t.appendChild(a[i].cloneNode(!0))
            }
        }
        return t
    }

    function c(e, t, o) {
        var a, n = h(o);
        if (W.wk && W.wk < 312) return a;
        if (n) if (typeof e.id == S && (e.id = o), W.ie && W.win) {
            var i = "";
            for (var d in e) e[d] != Object.prototype[d] && ("data" == d.toLowerCase() ? t.movie = e[d] : "styleclass" == d.toLowerCase() ? i += ' class="' + e[d] + '"' : "classid" != d.toLowerCase() && (i += " " + d + '="' + e[d] + '"'));
            var s = "";
            for (var r in t) t[r] != Object.prototype[r] && (s += '<param name="' + r + '" value="' + t[r] + '" />');
            n.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + i + ">" + s + "</object>", N[N.length] = e.id, a = h(e.id)
        } else {
            var u = v(M);
            u.setAttribute("type", L);
            for (var l in e) e[l] != Object.prototype[l] && ("styleclass" == l.toLowerCase() ? u.setAttribute("class", e[l]) : "classid" != l.toLowerCase() && u.setAttribute(l, e[l]));
            for (var c in t) t[c] != Object.prototype[c] && "movie" != c.toLowerCase() && m(u, c, t[c]);
            n.parentNode.replaceChild(u, n), a = u
        }
        return a
    }

    function m(e, t, o) {
        var a = v("param");
        a.setAttribute("name", t), a.setAttribute("value", o), e.appendChild(a)
    }

    function p(e) {
        var t = h(e);
        t && "OBJECT" == t.nodeName && (W.ie && W.win ? (t.style.display = "none", function () {
            4 == t.readyState ? f(e) : setTimeout(arguments.callee, 10)
        }()) : t.parentNode.removeChild(t))
    }

    function f(e) {
        var t = h(e);
        if (t) {
            for (var o in t) "function" == typeof t[o] && (t[o] = null);
            t.parentNode.removeChild(t)
        }
    }

    function h(e) {
        var t = null;
        try {
            t = j.getElementById(e)
        } catch (o) {
        }
        return t
    }

    function v(e) {
        return j.createElement(e)
    }

    function g(e, t, o) {
        e.attachEvent(t, o), H[H.length] = [e, t, o]
    }

    function y(e) {
        var t = W.pv, o = e.split(".");
        return o[0] = parseInt(o[0], 10), o[1] = parseInt(o[1], 10) || 0, o[2] = parseInt(o[2], 10) || 0, t[0] > o[0] || t[0] == o[0] && t[1] > o[1] || t[0] == o[0] && t[1] == o[1] && t[2] >= o[2]
    }

    function $(e, t, o, a) {
        if (!W.ie || !W.mac) {
            var n = j.getElementsByTagName("head")[0];
            if (n) {
                var i = o && "string" == typeof o ? o : "screen";
                if (a && (I = null, T = null), !I || T != i) {
                    var d = v("style");
                    d.setAttribute("type", "text/css"), d.setAttribute("media", i), I = n.appendChild(d), W.ie && W.win && typeof j.styleSheets != S && j.styleSheets.length > 0 && (I = j.styleSheets[j.styleSheets.length - 1]), T = i
                }
                W.ie && W.win ? I && typeof I.addRule == M && I.addRule(e, t) : I && typeof j.createTextNode != S && I.appendChild(j.createTextNode(e + " {" + t + "}"))
            }
        }
    }

    function b(e, t) {
        if (z) {
            var o = t ? "visible" : "hidden";
            U && h(e) ? h(e).style.visibility = o : $("#" + e, "visibility:" + o)
        }
    }

    function w(e) {
        var t = /[\\\"<>\.;]/, o = null != t.exec(e);
        return o && typeof encodeURIComponent != S ? encodeURIComponent(e) : e
    }

    var x, _, C, k, I, T, S = "undefined", M = "object", O = "Shockwave Flash", D = "ShockwaveFlash.ShockwaveFlash",
        L = "application/x-shockwave-flash", P = "SWFObjectExprInst", B = "onreadystatechange", A = window,
        j = document, R = navigator, E = !1, F = [a], V = [], N = [], H = [], U = !1, q = !1, z = !0, W = function () {
            var e = typeof j.getElementById != S && typeof j.getElementsByTagName != S && typeof j.createElement != S,
                t = R.userAgent.toLowerCase(), o = R.platform.toLowerCase(), a = o ? /win/.test(o) : /win/.test(t),
                n = o ? /mac/.test(o) : /mac/.test(t),
                i = !!/webkit/.test(t) && parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")), d = !1, s = [0, 0, 0],
                r = null;
            if (typeof R.plugins != S && typeof R.plugins[O] == M) r = R.plugins[O].description, !r || typeof R.mimeTypes != S && R.mimeTypes[L] && !R.mimeTypes[L].enabledPlugin || (E = !0, d = !1, r = r.replace(/^.*\s+(\S+\s+\S+$)/, "$1"), s[0] = parseInt(r.replace(/^(.*)\..*$/, "$1"), 10), s[1] = parseInt(r.replace(/^.*\.(.*)\s.*$/, "$1"), 10), s[2] = /[a-zA-Z]/.test(r) ? parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0); else if (typeof A.ActiveXObject != S) try {
                var u = new ActiveXObject(D);
                u && (r = u.GetVariable("$version"), r && (d = !0, r = r.split(" ")[1].split(","), s = [parseInt(r[0], 10), parseInt(r[1], 10), parseInt(r[2], 10)]))
            } catch (l) {
            }
            return {w3: e, pv: s, wk: i, ie: d, win: a, mac: n}
        }();
    (function () {
        W.w3 && ((typeof j.readyState != S && "complete" == j.readyState || typeof j.readyState == S && (j.getElementsByTagName("body")[0] || j.body)) && e(), U || (typeof j.addEventListener != S && j.addEventListener("DOMContentLoaded", e, !1), W.ie && W.win && (j.attachEvent(B, function () {
            "complete" == j.readyState && (j.detachEvent(B, arguments.callee), e())
        }), A == top && !function () {
            if (!U) {
                try {
                    j.documentElement.doScroll("left")
                } catch (t) {
                    return void setTimeout(arguments.callee, 0)
                }
                e()
            }
        }()), W.wk && !function () {
            if (!U) return /loaded|complete/.test(j.readyState) ? void e() : void setTimeout(arguments.callee, 0)
        }(), o(e)))
    })(), function () {
        W.ie && W.win && window.attachEvent("onunload", function () {
            for (var e = H.length, t = 0; t < e; t++) H[t][0].detachEvent(H[t][1], H[t][2]);
            for (var o = N.length, a = 0; a < o; a++) p(N[a]);
            for (var n in W) W[n] = null;
            W = null;
            for (var i in swfobject) swfobject[i] = null;
            swfobject = null
        })
    }();
    return {
        registerObject: function (e, t, o, a) {
            if (W.w3 && e && t) {
                var n = {};
                n.id = e, n.swfVersion = t, n.expressInstall = o, n.callbackFn = a, V[V.length] = n, b(e, !1)
            } else a && a({success: !1, id: e})
        }, getObjectById: function (e) {
            if (W.w3) return d(e)
        }, embedSWF: function (e, o, a, n, i, d, u, l, m, p) {
            var f = {success: !1, id: o};
            W.w3 && !(W.wk && W.wk < 312) && e && o && a && n && i ? (b(o, !1), t(function () {
                a += "", n += "";
                var t = {};
                if (m && typeof m === M) for (var h in m) t[h] = m[h];
                t.data = e, t.width = a, t.height = n;
                var v = {};
                if (l && typeof l === M) for (var g in l) v[g] = l[g];
                if (u && typeof u === M) for (var $ in u) typeof v.flashvars != S ? v.flashvars += "&" + $ + "=" + u[$] : v.flashvars = $ + "=" + u[$];
                if (y(i)) {
                    var w = c(t, v, o);
                    t.id == o && b(o, !0), f.success = !0, f.ref = w
                } else {
                    if (d && s()) return t.data = d, void r(t, v, o, p);
                    b(o, !0)
                }
                p && p(f)
            })) : p && p(f)
        }, switchOffAutoHideShow: function () {
            z = !1
        }, ua: W, getFlashPlayerVersion: function () {
            return {major: W.pv[0], minor: W.pv[1], release: W.pv[2]}
        }, hasFlashPlayerVersion: y, createSWF: function (e, t, o) {
            return W.w3 ? c(e, t, o) : void 0
        }, showExpressInstall: function (e, t, o, a) {
            W.w3 && s() && r(e, t, o, a)
        }, removeSWF: function (e) {
            W.w3 && p(e)
        }, createCSS: function (e, t, o, a) {
            W.w3 && $(e, t, o, a)
        }, addDomLoadEvent: t, addLoadEvent: o, getQueryParamValue: function (e) {
            var t = j.location.search || j.location.hash;
            if (t) {
                if (/\?/.test(t) && (t = t.split("?")[1]), null == e) return w(t);
                for (var o = t.split("&"), a = 0; a < o.length; a++) if (o[a].substring(0, o[a].indexOf("=")) == e) return w(o[a].substring(o[a].indexOf("=") + 1))
            }
            return ""
        }, expressInstallCallback: function () {
            if (q) {
                var e = h(P);
                e && x && (e.parentNode.replaceChild(x, e),
                _ && (b(_, !0), W.ie && W.win && (x.style.display = "block")), C && C(k)), q = !1
            }
        }
    }
}();
$(document).ready(function () {
    function e(e, t) {
        var o = $("<b>").text(t), a = e.pageX, n = e.pageY;
        o.css({
            top: n - 20,
            left: a,
            position: "absolute",
            color: "#E94F06",
            "z-index": 999
        }), $("body").append(o), o.animate({top: n - 100, opacity: 0, "font-size": "1.4em"}, 1500, function () {
            o.remove()
        }), e.stopPropagation()
    }

    $(".like_or_not_album").click(function (t) {
        albumid = $(this).data("albumid"), $this = $(this), $.ajax({
            type: "POST",
            url: "/person/ChangeAlbumStatus",
            data: {albumid: albumid},
            async: !0,
            dataType: "json",
            success: function (o) {
                100010006 !== o.code && (1 == o.type ? (e(t, "-1"), $this.removeClass("active").text("收藏音单")) : 2 == o.type && (e(t, "+1"), $this.addClass("active").text("已收藏")))
            },
            error: function (e) {
                console.log(e)
            }
        })
    }), $(".like_or_not_music").click(function (t) {
        var o = parseInt($(this).data("soundid")), a = $(this), n = a.data("like") ? 0 : 1;
        $.ajax({
            type: "POST",
            url: "/person/ChangeSoundStatus",
            dataType: "json",
            data: {soundid: o, like: n},
            success: function (o) {
                o.success ? n ? (e(t, "+1"), R.components.toggleToast("已添加到我喜欢的音频"), a.text("取消赞").data("like", n)) : (e(t, "-1"), R.components.toggleToast("已取消喜欢"), a.text("赞").data("like", n)) : moTool.showError(o.info)
            },
            error: function () {
                moTool.showError("点赞失败，请联系客服")
            }
        })
    }), $(".remove_sound_from_album").click(function () {
        $("#soundalbumdeletesure").data("soundid", $(this).data("soundid"));
        var e = $(this).parents(".magic-box-inner").find(".video-title").text();
        $("#deletesoundfromalbum .album-delete-sound-name").text(e), $("#deletesoundfromalbum").show()
    }), $("#deletesoundfromalbum .close").click(function () {
        $("#deletesoundfromalbum").hide()
    }), $("#soundalbumdeletesure").click(function () {
        $("#deletesoundfromalbum").hide(), soundid = $("#soundalbumdeletesure").data("soundid"), albumid = $("#soundalbumdeletesure").data("albumid"), moTool.postAjax({
            url: "/person/deletesoundfromalbum",
            value: {soundid: soundid, albumid: albumid},
            callBack: function (e) {
                1 == e.successVal.type ? $(".magic-box").length > 1 ? $('.magic-box[data-id="' + soundid + '"]').remove() : window.location.reload() : alert(e.successVal.msg)
            },
            success: !0
        })
    }), $(".top_user_attention").click(function () {
        attentionid = $(this).data("userid"), $(".follow_plus").toggle(), $(".follow_catch").toggle(), $.ajax({
            type: "POST",
            url: "/person/ChangeAttention",
            data: {attentionid: attentionid},
            async: !0,
            dataType: "json",
            success: function (e) {
                console.log(e.msg)
            },
            error: function (e) {
                console.log(e)
            }
        })
    }), $(".unfollow").hover(function () {
        $(this).find(".hoverhide").hide(), $(this).find(".hovershow").show()
    }, function () {
        $(this).find(".hoverhide").show(), $(this).find(".hovershow").hide()
    }), $(document).on("click", ".attentionChange", function () {
        var e = $(this).data("attentionid"), t = $(this).data("type");
        $.ajax({
            type: "POST",
            url: "/person/ChangeAttention",
            data: {attentionid: e, type: t},
            dataType: "json",
            success: function (o) {
                if (R.components.toggleToast(o.info), !o.success) return !1;
                var a = $('span[data-attentionid="' + e + '"]').parent();
                1 === t ? a.html('<span class="hoverhide">已关注</span><span class="hovershow attentionChange" data-attentionid="' + e + '" data-type="0">取消</span>').addClass("active") : a.html('<span class="attentionChange attention" data-attentionid="' + e + '" data-type="1">关注</span>').removeClass("active");
                var n = $(".home-right-panel.follow-panel .home-fans span");
                n.text(Number(n.text()) + (1 === t ? 1 : -1))
            },
            error: function () {
                R.components.toggleToast("网络错误请重试")
            }
        })
    }), $(".personspeak").click(function () {
        var e = $(this);
        play.soundBox.playIconSound(e.data("soundurl"), e.data("soundurl64"), e, index.mo.mPath)
    }), $(".soundlikeclick").click(function () {
        $("#soundlike").data("likeid", $(this).data("soundid")), moTool.showModalBox($("#soundlike"))
    }), $(".video-box").hover(function () {
        $(this).find(".video-report").show(), $(this).find(".video-delete").show()
    }, function () {
        $(this).find(".video-report").hide(), $(this).find(".video-delete").hide()
    }), $(".video-box1").hover(function () {
        $(this).find(".video-report").show(), $(this).find(".video-delete").show()
    }, function () {
        $(this).find(".video-report").hide(), $(this).find(".video-delete").hide()
    }), $(".section").hover(function () {
        $(this).find(".m_sound_toolbar").show(), $(this).find(".m_sound_num").hide()
    }, function () {
        $(this).find(".m_sound_toolbar").hide(), $(this).find(".m_sound_num").show()
    }), $(".deleteAlbum").click(function () {
        var e = $(this).parents(".home-favorite").find(".home-favorite-title a").text();
        $("#Albumdelete .album-name").text(e), $("#Albumdelete").data("deleteid", $(this).data("albumid")), $("#Albumdelete").show()
    }), $("#Albumdelete .close").click(function () {
        $("#Albumdelete").hide()
    }), $("#Albumdeletesure").click(function () {
        $("#Albumdelete").hide(), albumid = $("#Albumdelete").data("deleteid"), moTool.postAjax({
            url: "/person/deleteMyAlbum",
            value: {albumid: albumid},
            callBack: function (e) {
                1 == e.successVal.type ? $("div[data-albumboxid='" + e.successVal.albumid + "']").remove() : console.log(e.successVal.msg)
            },
            success: !0
        })
    }), $(".panel-body-slider .body-item").length > 1 && ($(".home-right-panel.organization .slider-pager").text("1 / " + $(".panel-body-slider .body-item").length), $(".home-right-panel.organization .next, .home-right-panel.organization .prev, .home-right-panel.organization .slider-pager").show()), $(".home-right-panel.organization .next, .home-right-panel.organization .prev").click(function () {
        var e, t = $(".panel-body-slider"), o = $(".panel-body-slider .body-item").length,
            a = $(".home-right-panel.organization .slider-pager"), n = a.text().split(" / ").map(function (e) {
                return Number(e.trim())
            });
        e = $(this).hasClass("next") ? n[0] + 1 > o ? 1 : n[0] + 1 : n[0] - 1 < 1 ? o : n[0] - 1, a.text(e + " / " + o), t.css({top: 80 * -(e - 1) + "px"})
    })
});